<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Eoin Lee's Blog</title><link>https://eoin.blog/</link><description>Recent content on Eoin Lee's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Mon, 24 Jun 2024 00:00:00 +0800</lastBuildDate><atom:link href="https://eoin.blog/index.xml" rel="self" type="application/rss+xml"/><item><title>ã€Œç¾é£Ÿå®¶ã€é¢˜è§£</title><link>https://eoin.blog/p/sol-luogu6772/</link><pubDate>Mon, 24 Jun 2024 00:00:00 +0800</pubDate><guid>https://eoin.blog/p/sol-luogu6772/</guid><description>&lt;ul>
&lt;li>å‡ºå¤„ï¼šNOI 2020&lt;/li>
&lt;li>é¢˜é¢ä¸è¯„æµ‹åœ°å€ï¼š&lt;a class="link" href="https://www.luogu.com.cn/problem/P6772" target="_blank" rel="noopener"
>æ´›è°· P6772&lt;/a> &amp;amp; &lt;a class="link" href="https://loj.ac/p/3339" target="_blank" rel="noopener"
>LibreOJ #3339&lt;/a>&lt;/li>
&lt;li>å‚è€ƒé¢˜è§£ï¼š&lt;a class="link" href="https://www.cnblogs.com/Plozia/p/16773840.html" target="_blank" rel="noopener"
>By Plozia&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="æš´åŠ›éƒ¨åˆ†åˆ†">æš´åŠ›éƒ¨åˆ†åˆ†
&lt;/h2>&lt;p>å…ˆè€ƒè™‘æœ´ç´ åšæ³•å¦‚ä½•å®ç°ã€‚æ ¹æ®é¢˜ç›®çš„è®¾é—®æ–¹å¼å¯ä»¥å‘ç°ï¼Œè¿™é“é¢˜éœ€è¦ç”¨åˆ°åŠ¨æ€è§„åˆ’è¿›è¡Œè§£å†³ã€‚äºæ˜¯æˆ‘ä»¬å¯ä»¥è®¾è®¡è¿™æ ·ä¸€ä¸ªçŠ¶æ€ï¼š$f_{t, v}$ï¼Œå®ƒè¡¨ç¤ºç¬¬ $t$ å¤©èµ°åˆ°äº†åŸå¸‚ $v$ æ—¶æ‰€èƒ½æŒæœ‰çš„æœ€å¤§æ„‰æ‚¦å€¼ã€‚ä»¤å›¾ä¸­èµ·ç‚¹ä¸º $u$ã€ç»ˆç‚¹ä¸º $v$ã€è€—æ—¶ä¸º $w$ çš„æœ‰å‘è¾¹ä¸º $(u, v, w)$ï¼Œåˆ™è¯¥çŠ¶æ€çš„è½¬ç§»æ»¡è¶³ï¼š&lt;/p>
&lt;p>$$
f_{t, v} = \max_{(u, v, w) \in E} \left\lbrace f_{t - w, u} \right\rbrace + c_v + \text{fest}_{t, v}
$$&lt;/p>
&lt;p>å…¶ä¸­ï¼Œ$\text{fest}_{t, v}$ ä¸ºåœ¨ç¬¬ $t$ å¤©åŸå¸‚ $v$ æ‰€ä¸¾åŠçš„ç¾é£ŸèŠ‚çš„åŠ æˆã€‚è‹¥è¿™ä¸€å¤©åœ¨è¿™åº§åŸå¸‚æ²¡æœ‰ç¾é£ŸèŠ‚ä¸¾åŠï¼Œè¯¥å€¼ç­‰äº $0$ã€‚å½“ç„¶ï¼Œå®é™…ç¼–ç æ—¶è¿˜è¦è€ƒè™‘ $i - w$ ä¸å°äº $1$ ç­‰ç­‰é—®é¢˜ï¼Œè¿™é‡Œå°±ä¸è¯¦è¿°äº†ã€‚ä»…ä»…æ˜¯è¿™æ ·æš´åŠ›çš„ $\mathcal{O}\left (Tn\right )$ å¤æ‚åº¦çš„ DPï¼Œä¹Ÿå¯ä»¥æ‹¿åˆ° 40 åˆ†ï¼Œè¿™å……åˆ†è¯´æ˜äº†å¥½å¥½æ‰“éƒ¨åˆ†åˆ†çš„é‡è¦æ€§ ğŸ˜®&lt;/p>
&lt;h2 id="çŸ©é˜µä¼˜åŒ–çš„å¼•å…¥">çŸ©é˜µä¼˜åŒ–çš„å¼•å…¥
&lt;/h2>&lt;p>å‡è®¾ç°åœ¨æ‰€æœ‰è¾¹çš„è¾¹æƒ $w$ å‡ä¸º $1$ï¼Œä¸”æš‚æ—¶ä¸è€ƒè™‘ç¾é£ŸèŠ‚çš„å½±å“ï¼Œå³ $k = 0$ã€‚é‚£ä¹ˆåŸé—®é¢˜ç®€åŒ–ä¸ºï¼šåœ¨ä¸€ä¸ª $n$ ç‚¹ $m$ è¾¹çš„å›¾ä¸­ï¼Œæ°å¥½ç»è¿‡ $p$ æ¡è¾¹çš„æœ€é•¿è·¯ã€‚æ²¿ç”¨æ­¤å‰çš„è½¬ç§»ï¼Œæˆ‘ä»¬æœ‰ï¼š&lt;/p>
&lt;p>$$
\begin{aligned}
f_{t, v} &amp;amp;= \max \left\lbrace f_{t - w, u} \right\rbrace + c_v + \text{fest} _ {t, v} \newline
&amp;amp;= \max \left\lbrace f_{t - 1, u} \right\rbrace + c_v \newline
&amp;amp;= \max \left\lbrace f_{t - 1, u} + c_v \right\rbrace
\end{aligned}
$$&lt;/p>
&lt;p>è¿™é‡Œçš„ $c_v$ å¯çœ‹ä½œæ˜¯æ¯ä¸ªç‚¹çš„ç‚¹æƒï¼Œè€ƒè™‘å°†å…¶è½¬åŒ–ä¸ºè¾¹æƒï¼Œä»¤ $d_{u, v}$ è¡¨ç¤ºèµ·ç‚¹ä¸º $u$ã€ç»ˆç‚¹ä¸º $v$ çš„è¾¹ä¸­ï¼Œç»ˆç‚¹ $v$ çš„æ„‰æ‚¦å€¼ $c_v$ã€‚é‚£ä¹ˆä¸Šå¼å°±å¯ä»¥å†™ä¸º&lt;/p>
&lt;p>$$
f_{t, v} = \max\left\lbrace f_{t - 1, u} + d_{u, v} \right\rbrace
$$&lt;/p>
&lt;p>ä½ å¯èƒ½ä¼šå‘ç°ï¼Œè¿™æ ·çš„å½¢å¼ä¸çŸ©é˜µä¹˜æ³•æœ‰äº›ç›¸ä¼¼â€”â€”ä¸¤ä¸ª $f$ çš„ç¬¬ä¸€é¡¹éƒ½ä¸ $t$ ç›¸å…³ï¼Œåé¢çš„ $f$ çš„ç¬¬äºŒé¡¹ä¸ $d$ çš„ç¬¬ä¸€é¡¹ç›¸åŒï¼Œå‰é¢çš„ $f$ çš„ç¬¬äºŒé¡¹ä¸ $d$ çš„ç¬¬äºŒé¡¹ç›¸åŒï¼Œå°±åƒä¸€ä¸ª $(t - 1) \times u$ çš„çŸ©é˜µåœ¨è·Ÿä¸€ä¸ª $u \times v$ çš„çŸ©é˜µåšä¹˜æ³•ï¼Œå¾—åˆ°äº†ä¸€ä¸ª $t \times u$ çš„çŸ©é˜µã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å°è¯•å°†ä¸Šè¿°å½¢å¼æ¨å¹¿æˆä¸€ä¸ªæ›´é€šç”¨çš„ç»“è®ºã€‚&lt;/p>
&lt;p>å®šä¹‰ä¸€ç§çŸ©é˜µè¿ç®— $\otimes$ã€‚è‹¥æœ‰ $A \otimes B = C$ï¼Œåˆ™ $A$ çš„åˆ—æ•°å’Œ $B$ çš„è¡Œæ•°ç›¸åŒï¼Œ$C$ çš„è¡Œæ•°ä¸ $A$ ç›¸åŒï¼Œåˆ—æ•°ä¸ $B$ ç›¸åŒï¼Œä¸”å¯¹çŸ©é˜µ $C$ ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½æœ‰ï¼š$C_{i, j} = \max\left\lbrace A_{i, k} + B_{k, j} \right\rbrace$ã€‚æ ¹æ®å–æœ€å¤§å€¼ $\max$ è¿ç®—çš„ç»“åˆå¾‹ï¼Œå¯ä»¥è¯æ˜ï¼Œè¯¥è¿ç®—åŒæ ·æ»¡è¶³ç»“åˆå¾‹ã€‚&lt;/p>
&lt;p>ç”±äºå›¾ä¸­ç‚¹çš„æ•°é‡æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥ $d$ å¯ä»¥è§†ä¸ºä¸€ä¸ªè¡Œåˆ—æ•°ç›¸ç­‰çš„çŸ©é˜µï¼Œåˆç”±äº $\otimes$ è¿ç®—å…·æœ‰ç»“åˆå¾‹ï¼Œå› æ­¤ $d$ å¯ä»¥é€šè¿‡å¯¹æ•°å¤æ‚åº¦çš„ã€ŒçŸ©é˜µå¿«é€Ÿå¹‚ã€ï¼ˆä½†å…¶ä¸­çš„ã€Œä¹˜æ³•ã€å®é™…ä¸Šæ˜¯ $\otimes$ è¿ç®—ï¼‰è¿›è¡Œè¿­ä»£ã€‚åœ¨è¿™æ ·çš„è§‚ç‚¹ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°† $f_t$ è§†ä¸ºä¸€ä¸ªè¡Œå‘é‡ï¼Œå…¶æ¯ä¸€ä¸ªå…ƒç´ ä¸º $f_{t, v}$ï¼Œå¹¶å¾—åˆ°ä¸€ä¸ªéå¸¸ç¥å¥‡ âœ¨ çš„è½¬ç§»æ–¹ç¨‹ï¼š&lt;/p>
&lt;p>$$
f_t = f_0 \otimes d^t
$$&lt;/p>
&lt;p>ä¸‹é¢ç”¨äººè¯æ¥è§£é‡Šä¸€ä¸‹è¿™ä¸ªæ–¹ç¨‹çš„æ„æ€ï¼š&lt;/p>
&lt;blockquote>
&lt;p>æ ¹æ®æˆ‘ä»¬åˆšæ‰å®šä¹‰çš„è¿ç®—æ‰€å…·æœ‰çš„æ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŒä¸€ç±» $d$ çš„ï¼Œä»åˆå§‹çŠ¶æ€ $t_0 = 0$ åˆ°ç‰¹å®šçŠ¶æ€ $t$ çš„è´¡çŒ®ç´¯ç§¯èµ·æ¥ï¼Œä½†è¯¥æ“ä½œæ˜¯é€šè¿‡åå¤è¿›è¡Œ $\otimes$ è¿ç®—ï¼Œç”¨ã€ŒçŸ©é˜µå¿«é€Ÿå¹‚ã€çš„å½¢å¼å°†è½¬ç§»æœ¬èº«ä¼˜åŒ–ä¸º $\mathcal{O}(\log t)$ å¤æ‚åº¦ï¼Œç”±æ­¤è®¡ç®—å‡º $d^t$ æ¥å®ç°çš„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†é€šè¿‡ä¸€æ¬¡ $\otimes$ è¿ç®—å°†è®¡ç®—å‡ºæ¥çš„è´¡çŒ®å åŠ åˆ°åˆå§‹çŠ¶æ€ $f_0$ ä¸Šï¼Œç”±æ­¤è·å¾— $f_t$ çš„çŠ¶æ€ã€‚&lt;/p>
&lt;p>ç”±äº $f$ æ˜¯è¡Œå‘é‡ï¼Œå…¶è¡Œæ•°å¯è§†ä¸º $1$ï¼Œåˆ—æ•°å¯è§†ä¸ºå…ƒç´ æ•° $n$ï¼›è€Œ $d$ ä¸º $n \times n$ çŸ©é˜µï¼Œæ‰€ä»¥ $f_0 \otimes d^t$ æ‰€å¾—åˆ°çš„ç»“æœçš„è¡Œæ•°ä¾ç„¶ä¸º $1$ï¼Œåˆ—æ•°ä¾ç„¶ä¸º $n$ï¼Œä¹Ÿå°±ä¾ç„¶ç¬¦åˆ $f$ çš„è¡Œå‘é‡çš„å½¢å¼ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°æ ¹æ® $c$ æ•°ç»„æ„å»º $d$ çŸ©é˜µï¼ˆæ²¡æœ‰è¾¹ç›¸è¿çš„åœ°æ–¹ï¼Œå€¼ä¸º $-\infty$ï¼‰ï¼Œé‚£ä¹ˆç°åœ¨çš„ä»»åŠ¡å°±æ˜¯ç¡®å®šåˆå§‹çŠ¶æ€ $f_0$ å®é™…ä¸Šåº”è¯¥æ˜¯ä»€ä¹ˆäº†ã€‚è€ƒè™‘ $f$ çš„å®šä¹‰ï¼š$f_{t, v}$ è¡¨ç¤ºç¬¬ $t$ å¤©èµ°åˆ°äº†åŸå¸‚ $v$ æ—¶æ‰€èƒ½æŒæœ‰çš„æœ€å¤§æ„‰æ‚¦å€¼ã€‚ç”±é¢˜ç›®å¯çŸ¥ï¼Œä¸»äººå…¬æœ€åˆï¼ˆç¬¬ $0$ å¤©ï¼‰åœ¨åŸå¸‚ $1$ï¼Œæ ¹æ®æ•°æ®èŒƒå›´ï¼Œç¬¬ $0$ å¤©ä¸ä¼šæœ‰ç¾é£ŸèŠ‚ï¼ˆ$1 \leqslant t_i \leqslant 10^9$ï¼‰ï¼Œæ‰€ä»¥ $f_0$ çš„å…ƒç´ ä¸­åªæœ‰ä¸€ä¸ªæœ‰å€¼ï¼Œå³ $f_{0, 1} = c_1$ï¼Œå…¶ä»–åœ°æ–¹çš„å€¼éƒ½æ˜¯ $-\infty$ã€‚&lt;/p>
&lt;h2 id="çŸ©é˜µä¼˜åŒ–çš„æ¨å¹¿">çŸ©é˜µä¼˜åŒ–çš„æ¨å¹¿
&lt;/h2>&lt;p>è¿˜è®°å¾—å—ï¼Ÿä¸Šä¸€å°èŠ‚é‡Œçš„æ¨å¯¼éƒ½æ˜¯åŸºäº $w = 1$ çš„å‰æçš„ã€‚è€Œé¢˜ç›®ä¸­ $w$ çš„å€¼å¯èƒ½åœ¨ $[1, 5]$ ä¹‹é—´å˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦æ€è€ƒå¦‚ä½•å°†åŸæ¥çš„ç»“è®ºåº”ç”¨åˆ°é¢˜ç›®ä¸­æ¥ã€‚å½“ $w = 1$ æ—¶ï¼Œæˆ‘ä»¬å¯¹ $d$ é‡å¤è¿›è¡Œçš„ $\otimes$ è¿ç®—ï¼Œæœ¬è´¨ä¸Šæ˜¯ä»¥ $w = 1$ ä¸ºå•ä½åœ¨å¯¹è´¡çŒ®è¿›è¡Œå åŠ ã€‚æˆ–è€…è¯´ï¼Œå¦‚æœ $w \in [1, 5]$ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†è¿™äº›è¾¹æƒæ‹†æˆ $1$ åˆ° $5$ æ¡ $w = 1$ çš„è¾¹ï¼Œåœ¨åŸæœ‰çš„è¿™æ¡è¾¹çš„èµ·ç‚¹å’Œç»ˆç‚¹ä¹‹é—´å†åŠ å…¥ $w - 1$ ä¸ªç‚¹æ¥æ‰¿æ¥è¿™äº›æ–°åŠ çš„è¾¹ï¼Œå†å°†å…¶è´¡çŒ®è¿›è¡Œå åŠ ã€‚è¯´ç™½äº†å°±æ˜¯ï¼Œå¦‚æœå°†æ­¤å‰æˆ‘ä»¬æ¨å¯¼æ—¶ä½¿ç”¨çš„ $d$ å†™æˆ $d^1$ï¼Œé‚£ä¹ˆç°åœ¨ä¸€æ¡è¾¹æƒä¸º $w$ çš„è¾¹çš„è´¡çŒ®å°±æ˜¯ $d^w$ï¼Œåªæ˜¯æˆ‘ä»¬å°†æŒ‡æ•° $w$ æºåˆ°äº†æ•´ä½“çš„æŒ‡æ•°é‡Œè¿›è¡Œè®¡ç®—ã€‚&lt;/p>
&lt;p>ä¸è¿‡è¿™æ ·æ‹†æœ‰ä¸ªå°é—®é¢˜ã€‚æç«¯æƒ…å†µä¸‹ï¼Œå¯¹äºæ‰€æœ‰çš„ $m_{\max} = 501$ æ¡è¾¹ï¼Œæ¯ä¸€æ¡è¾¹çš„è¾¹æƒéƒ½ä¸º $w_{\max} = 5$ï¼Œé‚£ä¹ˆå°±éœ€è¦æ–°å¢ $\left (w_{\max} - 1 \right ) m_{\max} = 2004$ ä¸ªç‚¹ã€‚åˆ«å¿˜äº†æˆ‘ä»¬æ‰€éœ€è¦ç”¨åˆ°çš„çŸ©é˜µå¿«é€Ÿå¹‚ä¸­ï¼Œå¯¹ä¸€ä¸ªå…·æœ‰ $n$ ç‚¹çš„å›¾çš„é‚»æ¥çŸ©é˜µæ‰§è¡ŒçŸ©é˜µä¹˜æ³•æœ¬èº«ä¹Ÿæ˜¯å…·æœ‰ $\mathcal{O}(n^3)$ çš„å¤æ‚åº¦çš„ï¼å‡å¦‚æˆ‘ä»¬çš„ç‚¹æ•°æ€»å…±ä¸º $\left[ n_{\max} + \left( w_{\max} - 1 \right) m \right] _ {\max} = 2054$ï¼Œé‚£ä¹ˆå…‰æ‰§è¡Œä¸€æ¬¡çŸ©é˜µä¹˜æ³•å°±å·²ç»è¦è¶…æ—¶äº†ã€‚æœ‰æ²¡æœ‰ä¸€ç§æ‹†åˆ†çš„æ–¹æ³•èƒ½å¤Ÿè¾ƒå°åœ°å½±å“å®é™…çš„ç‚¹æ•°å‘¢ï¼Ÿ&lt;/p>
&lt;p>æˆ‘ä»¬è€ƒè™‘è¿™æ ·ä¸€ç§æ‹†æ³•ï¼šå°†æ¯ä¸€ä¸ªç‚¹æ‹†æˆ $w$ ä¸ªç‚¹ï¼Œè¿™äº›ç‚¹ä¹‹é—´éƒ½ç”¨ä¸€æ¡è¾¹æƒä¸º $0$ çš„è¾¹è¿æ¥ã€‚&lt;span class="text-highlight">
å¯¹äºæ¯ä¸€æ¡è¾¹ $(u, v, w)$ï¼Œè®© $u$ æ‹†å‡ºæ¥çš„ç¬¬ $w$ ä¸ªç‚¹ $u_w$ ä¸ $v$ æ‹†å‡ºæ¥çš„ç¬¬ä¸€ä¸ªç‚¹ $v_1$ ä¹‹é—´ç”¨ä¸€æ¡è¾¹æƒä¸º $w$ çš„è¾¹ç›¸è¿ã€‚
&lt;/span>
è¿™æ ·åšï¼Œé¦–å…ˆåªä¼šç”¨åˆ° $w_{\max}n = 5n$ ä¸ªç‚¹ï¼ˆç”±äºæ¯æ¡è¾¹çš„ $w \in [1, 5]$ï¼Œ$u$ æ‹†å‡ºæ¥æ¯ä¸ªç‚¹ä¸Šéƒ½å¯èƒ½æœ‰å‘å…¶ä»–ç‚¹çš„è¿è¾¹ï¼Œæ‰€ä»¥æ€»å…±çš„ç‚¹æ•°å…¶å®å°±æ˜¯é’‰æ­»äº†çš„ $5n$ï¼‰ï¼Œè‡³å°‘è®©çŸ©é˜µä¹˜æ³•çš„å¤æ‚åº¦é™åˆ°äº†ä¸€ä¸ªå¯ä»¥æ§åˆ¶çš„èŒƒå›´ã€‚è‡³äºè¿™æ ·åšä¸ºä»€ä¹ˆæ­£ç¡®ï¼Œå…¶å®å°±æ˜¯åˆ©ç”¨äº†æ­¤å‰å°±å·²ç»æ˜ç¡®çš„ã€Œæ— è®ºæŒ‡æ•°æ˜¯å¤šå°‘æœ€åéƒ½ä¼šæ‰åˆ°ä¸€èµ·å»ã€çš„è§‚ç‚¹ï¼Œå¹¶ä¸”æ— è®ºæŒ‡æ•°æ˜¯å¤šå°‘æ‰€ç»è¿‡çš„è½¬ç§»éƒ½æ°å¥½æ˜¯ $w$ æ­¥ã€‚&lt;/p>
&lt;p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±æˆåŠŸå°†æ¨å¾—çš„ç»“è®ºåº”ç”¨åˆ°äº† $w \in [1, 5]$ çš„æƒ…å†µã€‚æ‘†åœ¨æˆ‘ä»¬é¢å‰çš„éš¾é¢˜è¶Šæ¥è¶Šå°‘äº†ï¼&lt;/p>
&lt;h2 id="é¢å¤–å› ç´ çš„è€ƒè™‘">é¢å¤–å› ç´ çš„è€ƒè™‘
&lt;/h2>&lt;p>åˆ«å¿˜äº†è¿˜æœ‰ã€Œç¾é£ŸèŠ‚ã€è¿™ä¸€è®¾å®šï¼å›æ”¶ä¼ç¬”å•¦ï¼æˆ‘ä»¬è¦æƒ³åŠæ³•å°†ç¾é£ŸèŠ‚çš„è´¡çŒ®åŠ å…¥æˆ‘ä»¬ç°æœ‰çš„ä½“ç³»ä¸­ï¼Œè¯¥å¦‚ä½•åšå‘¢ï¼Ÿé¦–å…ˆå¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œç¾é£ŸèŠ‚æ˜¾ç„¶æ²¡æœ‰åŠæ³•ç›´æ¥åŠ å…¥æˆ‘ä»¬çš„çŸ©é˜µè½¬ç§»ï¼Œå› ä¸ºç¾é£ŸèŠ‚çš„æ—¶é—´åœ°ç‚¹å’Œè´¡çŒ®å¤§å°éƒ½æ˜¯ä¸ç¡®å®šçš„ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ ¹æ®ç¾é£ŸèŠ‚çš„å…·ä½“ä¿¡æ¯ï¼Œåœ¨è½¬ç§»è¿‡ç¨‹ä¸­ä¿®æ”¹å¯¹åº”æ—¶é—´ã€åŸå¸‚çš„è´¡çŒ®å€¼ã€‚&lt;/p>
&lt;p>ç”±äºè½¬ç§»è¿‡ç¨‹æ˜¯æ ¹æ® $t$ ä»å°åˆ°å¤§è¿›è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰ç¾é£ŸèŠ‚ $\left(t, x, y \right)$ æ ¹æ® $t$ è¿›è¡Œæ’åºï¼Œå¹¶åœ¨è½¬ç§»æ—¶ï¼Œæ¯æ¬¡æ‰§è¡Œã€ŒçŸ©é˜µå¿«é€Ÿå¹‚ã€ç›´åˆ°ä¸‹ä¸€ä¸ªç¾é£ŸèŠ‚å‘ç”Ÿçš„æ—¶é—´ $t$ï¼Œå¹¶å°†è¿™ä¸ªç¾é£ŸèŠ‚ $\left(t, x, y \right)$ çš„è´¡çŒ® $y$ æ·»åŠ åˆ°ç¬¬ $t$ å¤©çš„åŸå¸‚ $x$ ä¸Šï¼Œç„¶åç»§ç»­é€šè¿‡ã€ŒçŸ©é˜µå¿«é€Ÿå¹‚ã€ä»å½“å‰æ—¶é—´ $t$ ä¸ºèµ·ç‚¹è¿›è¡Œè½¬ç§»ã€‚æ•´ä¸ªè¿‡ç¨‹å°±åƒæ˜¯ä¹˜åæ¸¸è½®ï¼Œåœ¨æµ·ä¸Šèˆªè¡Œçš„è¿‡ç¨‹å°±æ˜¯æ‰§è¡ŒçŸ©é˜µå¿«é€Ÿå¹‚æ¥ä¼˜åŒ–è½¬ç§»æ—¶é—´å¤æ‚åº¦çš„è¿‡ç¨‹ï¼Œè€Œæ¯æ¬¡é å²¸ã€ä¸‹èˆ¹æ¸¸ç©åˆ™æ˜¯åœ¨å½“å‰ä½ç½®å åŠ ç¾é£ŸèŠ‚çš„è´¡çŒ®çš„ã€æ—¶é—´å¤æ‚åº¦æœ´ç´ çš„è¿‡ç¨‹ã€‚&lt;/p>
&lt;h2 id="æœ€åä¸€å…¬é‡Œ">æœ€åä¸€å…¬é‡Œ
&lt;/h2>&lt;p>ä¸è€ƒè™‘ç¾é£ŸèŠ‚çš„æƒ…å†µä¸‹ï¼Œæ‹†ç‚¹ä¹‹åï¼Œã€ŒçŸ©é˜µä¹˜æ³•ã€æ‰§è¡Œä¸€æ¬¡çš„å¤æ‚åº¦ä¸º $\mathcal{O}(N^3)$ï¼Œå…¶ä¸­ $N = 5n$ï¼Œæ‰€ä»¥ã€ŒçŸ©é˜µå¿«é€Ÿå¹‚ã€çš„å¤æ‚åº¦å°±ä¸º $\mathcal{O}(N^3 \log T)$ã€‚ä½†ç”±äºæˆ‘ä»¬åœ¨è€ƒè™‘ç¾é£ŸèŠ‚ä¹‹åï¼Œç”±äºå°†åŸæœ‰çš„ä¸€æ•´ä¸ªé•¿åº¦ä¸º $\log T$ çš„å¿«é€Ÿå¹‚æ®µåˆ†è§£æˆäº†æœ€å¤š $201$ ä¸ªå°æ®µï¼ˆ$k_{\max} = 200$ï¼‰ï¼Œæ‰€ä»¥å®é™…çš„å¤æ‚åº¦ä¸º $\mathcal{O}\left(N^3 \sum\log\left(t_i - t_{i - 1}\right)\right)$ã€‚ç”±äº $N_{\max} = 250$ï¼Œæœ‰ ${N ^ 3}_{\max} = 1.5625 \times 10^7$ï¼Œå†ä¹˜ä¸Šä¸€ä¸ª $200$ å¾ˆæ˜¾ç„¶ä¾ç„¶ä¼šè¶…æ—¶ã€‚&lt;/p>
&lt;p>æ€ä¹ˆåŠå‘¢ï¼ŸDP çš„è¿‡ç¨‹å·²ç»æƒ³ä¸å‡ºä»»ä½•å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬è€ƒè™‘å†æ¬¡ä¼˜åŒ–ã€ŒçŸ©é˜µå¿«é€Ÿå¹‚ã€ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæ­¤å‰æˆ‘ä»¬è¯´ã€ŒçŸ©é˜µä¹˜æ³•ã€æ‰§è¡Œä¸€æ¬¡çš„å¤æ‚åº¦ä¸º $\mathcal{O}(N^3)$ï¼Œæ˜¯å› ä¸ºæ˜¯åœ¨å¯¹ä¸€ä¸ª $N \times N$ çš„é‚»æ¥çŸ©é˜µè¿›è¡Œè®¡ç®—ï¼Œå…¶ç»“æœæœ€ç»ˆè½è„šåˆ°è½¬ç§»çŸ©é˜µ $f_t$ ä¸Šï¼Œè€Œ $f_t$ æ˜¯ä¸€ä¸ªè¡Œå‘é‡ã€‚å¦‚æœèƒ½å¤Ÿç›´æ¥å°†æ“ä½œåœ¨ $f_t$ ä¸Šé¢æ‰§è¡Œï¼Œä¸å€Ÿç”¨ä¸€æ•´ä¸ªé‚»æ¥çŸ©é˜µï¼Œæˆ‘ä»¬æˆ–è®¸å°±å¯ä»¥å°†åŸæœ¬ $\mathcal{O}(N^3)$ çš„å¤æ‚åº¦é™ä½åˆ° $\mathcal{O}(N^2)$ï¼Œä»è€Œé€šè¿‡æ­¤é¢˜ã€‚&lt;/p>
&lt;p>ç”±äº $\otimes$ è¿ç®—å…·æœ‰ç»“åˆå¾‹ï¼Œæ‰€ä»¥å¯¹åŸæœ¬çš„ DP è½¬ç§»å¼ $f_t = f_0 \otimes d^t$ï¼Œåœ¨è€ƒè™‘ç¾é£ŸèŠ‚åå³ $f_{t_i} = f_{t_{i - 1}} \otimes d^{t_i - t_{i - 1}}$ã€‚æˆ‘ä»¬å¯ä»¥å°†å¿«é€Ÿå¹‚ $d^{t_i - t_{i - 1}}$ ä¸­åˆ†è§£å‡ºæ¥çš„è‹¥å¹²ä¸ª $d^{2^k}$ ç›´æ¥ $\otimes$ ä¹˜åˆ° $f_{t_{i - 1}}$ ä¸Šé¢ï¼ç”±äº $f_t$ æ˜¯è¡Œå‘é‡ï¼Œç›¸å¯¹äºæ•´ä¸ªé‚»æ¥çŸ©é˜µæ¥è¯´å°‘äº†ä¸€ç»´ï¼Œå°±å¯ä»¥åƒä¸Šé¢æ‰€è¯´çš„å®ç° $\mathcal{O}(N^2)$ è½¬ç§»äº†ï¼ä¸ºæ­¤ï¼Œæˆ‘ä»¬å…¶å®åªéœ€è¦åœ¨å¾—å‡ºæ•´ä¸ªé‚»æ¥çŸ©é˜µ $d$ åï¼Œç”¨ $\mathcal{O}(N^3 \log T)$ çš„å¤æ‚åº¦å°†æ‰€æœ‰æ»¡è¶³ $2 ^ k \leqslant T$ çš„ $d^{2^k}$ å…¨éƒ¨è®¡ç®—ä¸€éå°±å¥½äº†ã€‚è®¡ç®—å‡ºæ¥ä¹‹åï¼Œä¸¤æ¬¡ç¾é£ŸèŠ‚ä¹‹é—´å°±å¯ä»¥ $\mathcal{O}\left(N^2 \sum\log\left(t_i - t_{i - 1}\right)\right)$ å¤æ‚åº¦è½¬ç§»ï¼Œæ€»å…± $k$ æ¬¡ï¼Œæ‰€ä»¥æ€»å¤æ‚åº¦å°±ä¸ºï¼š&lt;/p>
&lt;p>$$
\mathcal{O} \left (k \log k + N^3 \log T + k \cdot N^2 \sum\log\left(t_i - t_{i - 1}\right) \right ).
$$&lt;/p>
&lt;h2 id="ä»£ç ">ä»£ç 
&lt;/h2>&lt;details>
&lt;summary>ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ä»£ç &lt;/summary>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;tuple&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;algorithm&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">LL&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">long&lt;/span> &lt;span class="kt">long&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">TUP&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">tuple&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MAX_N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">55&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MAX_LG_T&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">35&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MAX_K&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">2e2&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MAX_N_S&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">MAX_N&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="n">LL&lt;/span> &lt;span class="n">LL_MIN&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mh">0xC0C0C0C0C0C0C0C0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="nc">Matrix&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LL&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N_S&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">MAX_N_S&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">row&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">col&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">const&lt;/span> &lt;span class="n">LL&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">row&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">col&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Matrix&lt;/span> &lt;span class="k">operator&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">const&lt;/span> &lt;span class="n">Matrix&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">B&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Matrix&lt;/span> &lt;span class="nf">C&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">row&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">B&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">LL_MIN&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">row&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">col&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">k&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">k&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">B&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">col&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">C&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">B&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">C&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Matrix&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Matrix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">_r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">_c&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="k">const&lt;/span> &lt;span class="n">LL&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">row&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">_r&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">col&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">_c&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">fill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">K&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">logT&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">TUP&lt;/span> &lt;span class="n">fest&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_K&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Matrix&lt;/span> &lt;span class="n">G&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pow2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_LG_T&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">vec&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pow2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">G&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">logT&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">pow2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pow2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">pow2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">power&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Matrix&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">A&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">b&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">logT&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">((&lt;/span>&lt;span class="n">b&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">A&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pow2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">A&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sync_with_stdio&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">nullptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">T&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">K&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">logT&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">__lg&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// è®¡ç®— log(T) çš„å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">G&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">Matrix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">LL_MIN&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// åˆ›å»ºé‚»æ¥çŸ©é˜µå¹¶ç”¨è´Ÿæ— ç©·å¡«å……
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆå§‹åŒ–æ¯ä¸ªç‚¹æ‰€æ‹†æˆçš„äº”ä¸ªç‚¹ä¹‹é—´çš„è¿è¾¹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">w&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">w&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">w&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">G&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">w&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">G&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">w&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// æŒ‰ç…§è¾¹çš„ä¿¡æ¯æŠŠè¾¹è¿åˆ°æ‹†å¼€çš„ç‚¹ä¸Š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">K&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">auto&lt;/span>&lt;span class="o">&amp;amp;&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fest&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">prep&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// äºŒè¿›åˆ¶é¢„å¤„ç†é‚»æ¥çŸ©é˜µ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fest&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fest&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">K&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// å¯¹ç¾é£ŸèŠ‚è¿›è¡Œæ’åº
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Matrix&lt;/span> &lt;span class="n">vec&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">LL_MIN&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// åˆ›å»º f è¡Œå‘é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">vec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆå§‹åŒ–
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åˆ†æ®µè½¬ç§»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">current_time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">K&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">auto&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">city&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">joy&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fest&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">power&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vec&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">time&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">current_time&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">city&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">joy&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">current_time&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">time&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">power&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">vec&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">T&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">current_time&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¾“å‡ºç­”æ¡ˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">LL&lt;/span> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">vec&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">c&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// ç”±äºè½¬ç§»ä¸è€ƒè™‘ç¬¬ä¸€ä¸ªåŸå¸‚ï¼Œéœ€è¦é¢å¤–åŠ ä¸Š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è¾“å‡ºç­”æ¡ˆæˆ–è€…æŠ¥å‘Šæ— è§£
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/details></description></item><item><title>æ—§å¥½é‡æ‹¾è§…æ–°çŸ¥ï¼šç®€è¿° OI Jumper çš„å¼€å‘ä¹‹è·¯</title><link>https://eoin.blog/p/work-on-oi-jumper/</link><pubDate>Fri, 10 May 2024 20:00:00 +0800</pubDate><guid>https://eoin.blog/p/work-on-oi-jumper/</guid><description>&lt;img src="https://eoin.blog/p/work-on-oi-jumper/banner.webp" alt="Featured image of post æ—§å¥½é‡æ‹¾è§…æ–°çŸ¥ï¼šç®€è¿° OI Jumper çš„å¼€å‘ä¹‹è·¯" />&lt;p>æˆ‘è§‰å¾—ï¼Œæˆªè‡³æœ¬æ–‡è½ç¬”ä¹‹æ—¶ï¼Œåº”è¯¥æ²¡æœ‰å¤šå°‘äººä¼šçŸ¥é“ &lt;a class="link" href="https://oi-jumper.eoin.blog" target="_blank" rel="noopener"
>OI Jumper&lt;/a> è¿™ä¸ªä¸œè¥¿ã€‚è¿™æ˜¯æˆ‘å‰ä¸¤ä¸ªæœˆåˆ©ç”¨é—²ä½™æ—¶é—´å¼€å‘çš„ä¸€æ¬¾ OI å­¦ä¹ è¾…åŠ©å·¥å…·ã€‚å…¶åŠŸèƒ½éå¸¸ç®€å•ï¼Œæ¥åˆ°ä¸»é¡µé¢ï¼Œé€‰æ‹©ä½ éœ€è¦çš„ OJï¼Œè¾“å…¥é¢˜å·æˆ–é¢˜ç›®åç§°ï¼ŒæŒ‰ä¸‹ Enter é”®æˆ–ç‚¹å‡»è·³è½¬ï¼Œå°±å¯ä»¥è‡ªåŠ¨æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œå¿«é€Ÿè®¿é—®ä½ æ‰€æŒ‡å®šçš„é¢˜ç›®ã€‚è™½ç„¶ OJ è·³é¢˜ä¸æ˜¯ä»€ä¹ˆç¨€å¥‡åŠŸèƒ½ï¼Œå½“ä½ éœ€è¦å¤§è§„æ¨¡åˆ·é¢˜çš„æ—¶å€™ï¼Œå¦‚æœé¢˜ç›®åˆ†æ•£åœ¨æ•°ä¸ª OJ ä¸­ï¼Œè€Œä½ åˆä¸æƒ³é¢‘ç¹æ‰“å¼€å¤šä¸ªä¸»é¡µçš„æ—¶å€™ï¼ŒOI Jumper æˆ–è®¸ä¼šæˆä¸ºä¸€ä¸ªæœ‰åŠ›çš„å·¥å…·ã€‚å¦‚æœæ­£åœ¨é˜…è¯»æœ¬æ–‡çš„ä½ è¿˜æ²¡æœ‰ä½“éªŒè¿‡ OI Jumperï¼Œæ¬¢è¿ç‚¹å‡»ä¸Šé¢çš„é“¾æ¥è·³è½¬åˆ°å®ƒçš„é¡µé¢å¹¶ç®€å•ä½“éªŒä¸€ä¸‹ï¼ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ï¼ï¼&lt;/p>
&lt;p>OI Jumper ä¸ºå¼€æºé¡¹ç›®ï¼Œæºç åœ¨&lt;a class="link" href="https://github.com/eoinli/oi-jumper" target="_blank" rel="noopener"
>å¯¹åº”çš„ GitHub ä»“åº“&lt;/a>ä¸Šå…¬å¼€ï¼Œç½‘é¡µç”± Vercel éƒ¨ç½²ï¼Œé¦–æ¬¡è®¿é—®å¯èƒ½éœ€è¦åŠ è½½ä¸€å°æ®µæ—¶é—´ï¼Œæµè§ˆå™¨ç¼“å­˜ååŠ è½½æ—¶é—´å°±ä¼šå˜å¿«è®¸å¤šã€‚å¦‚æœä½ å¯¹æœ¬é¡¹ç›®æœ‰ä»»ä½•å»ºè®®å’Œæ„è§ï¼Œæ¬¢è¿åˆ›å»º issue æˆ–æ‹‰å– PR æ¥åšå‡ºè´¡çŒ®ï¼Œè°¢è°¢ï¼&lt;/p>
&lt;h2 id="ç¼˜èµ·">ç¼˜èµ·
&lt;/h2>&lt;p>æœºç¼˜å·§åˆçš„ä¸€æ¬¡ï¼Œæˆ‘åœ¨ Typora å®˜ç½‘å‘ç°äº†ä¸€å¥—ç¼–è¾‘å™¨ä¸»é¢˜ï¼Œåç§°ä¸º Tailwindã€‚å¥½å¥‡çš„æˆ‘ä¸Šç½‘æœç´¢äº†è¿™ä¸ªè¯è¯­ï¼Œå¹¶æ‰¾åˆ°äº† &lt;a class="link" href="https://tailwindcss.com/" target="_blank" rel="noopener"
>Tailwind CSS&lt;/a> è¿™ä¸€å®è—æ¡†æ¶ã€‚ä¸éœ€è¦äº²è‡ªå†™ CSSï¼Œåªéœ€è¦åœ¨ HTML ä»£ç é‡ŒåŠ å…¥å¯¹åº”çš„ class nameï¼Œå°±å¯ä»¥è‡ªåŠ¨ç”Ÿæˆæ ·å¼ï¼Ÿæˆ‘ç¬é—´å¯¹å®ƒäº§ç”Ÿäº†å¥½æ„Ÿï¼Œè¿™ç§å¥½æ„Ÿä¹Ÿéšç€æ­¤åä¸æ–­ç¢°åˆ°ä½¿ç”¨ Tailwind CSS å®Œæˆçš„ä¼˜è´¨ç½‘é¡µè€Œä¸æ–­ä¸Šå‡ã€‚å°½ç®¡å¦‚æ­¤ï¼Œç”±äºå¸¸è§„å­¦ä¹ ç”Ÿæ´»æ‰€é™ï¼Œæˆ‘ä¸€ç›´æ²¡æœ‰æ‰¾åˆ°ä»€ä¹ˆå­¦ä¹ å®ƒçš„ç†ç”±æˆ–è€…åº”ç”¨å®ƒçš„åœ°æ–¹ã€‚&lt;/p>
&lt;p>ç›´åˆ°å¼€å§‹ OI é›†è®­ä¹‹åï¼Œæˆ‘ä»¬çš„åˆ·é¢˜é‡å¤§å¹…ä¸Šå‡ï¼Œè®¸å¤šé¢˜ç›®éƒ½åˆ†æ•£åœ¨ä¸åŒçš„ OJ é‡Œï¼Œè¿™ä½¿æˆ‘è¿™æ ·ä¸€ä¸ªåŠå±æµè§ˆå™¨ç”¨æˆ·æ„Ÿåˆ°ååˆ†ç¹çã€‚ä¸ºä»€ä¹ˆä¸åšä¸€ä¸ªå·¥å…·æ¥å¸®æˆ‘å®ç°è·³é¢˜å‘¢ï¼Ÿè¿™ä¾¿æ˜¯ OI Jumper ç«‹é¡¹çš„æ—¶å€™ã€‚ç„¶è€Œï¼Œæˆ‘é€€å‡ºå¼€å‘è½¬æˆ˜ OI å·²ç»æœ‰ä¸‰å¹´ä¹‹ä¹…ï¼Œç½‘é¡µæ›´æ˜¯æœ‰æ›´é•¿æ—¶é—´æ²¡æœ‰å†™è¿‡äº†ã€‚è¿…é€Ÿæ‹¾èµ·å‰ç«¯å¼€å‘çš„çŸ¥è¯†ï¼Œæˆä¸ºäº†é¡¹ç›®ä»è®¾æƒ³å˜ä¸ºç°å®çš„ä¸€å¤§ç“¶é¢ˆã€‚æˆ‘çªç„¶æƒ³åˆ°äº†åœ¨æˆ‘æ„¿æœ›æ¸…å•ä¸­æ»ç•™å·²ä¹…çš„ Tailwind CSSï¼Œè¯´ä¸å®šæˆ‘èƒ½é€šè¿‡å®ƒç®€åŒ–ä¸€äº›å¼€å‘æµç¨‹ã€‚&lt;/p>
&lt;p>ç«‹é¡¹ä¹‹æ—¶å·²ç»æ˜¯ 2024 å¹´ 4 æœˆï¼Œå„ç§å…è´¹ AI å·¥å…·æ—©å·²å……æ–¥ç½‘ç»œç©ºé—´ï¼ŒTailwind CSS æ˜¯ä¸€ä¸ªå‰ AI æ—¶ä»£çš„äº§ç‰©ï¼Œæ‰€ä»¥ä¸å¦‚é€šè¿‡ AI æ¥åœ¨å®è·µä¸­å¿«é€Ÿåœ°å­¦ä¹ ä½¿ç”¨ Tailwind CSS æ¡†æ¶ã€‚è¿™ä¹ˆæƒ³ç€ï¼Œæˆ‘æ‰“å¼€äº† Google Gemini ä»¥åŠ Tailwind CSS çš„å®˜æ–¹æ–‡æ¡£ï¼Œå¼€å§‹ç ”è¯»ã€‚&lt;/p>
&lt;h2 id="å¼€å‘">å¼€å‘
&lt;/h2>&lt;p>æˆ‘å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå–œæ¬¢è¯»æ–‡æ¡£çš„äººï¼Œæ‰€ä»¥åœ¨æŒ‰ç…§å®˜ç½‘æŒ‡ç¤ºå®‰è£…å¥½ç¯å¢ƒå¹¶åˆå§‹åŒ–ä¹‹åï¼Œæˆ‘å°±è½¬å‘ AI æ±‚åŠ©ã€‚ä¸¤å¤©çš„å¼€å‘åï¼Œæˆ‘å°±åœ¨ Gemini çš„å¸®åŠ©ä¸‹ï¼Œåˆ©ç”¨æ­¤å‰å­¦ä¹ çš„åŸºç¡€ CSS çŸ¥è¯†ç»“åˆç€ Tailwind CSS æ¡†æ¶å®Œæˆäº†&lt;a class="link" href="https://github.com/eoinli/oi-jumper/commit/f52eafa3c88ca313e63db702eef51a208d1dc6d3" target="_blank" rel="noopener"
>æœ€åˆçš„æäº¤&lt;/a>ã€‚éƒ¨ç½²å®Œæˆçš„é‚£ä¸€åˆ»ï¼Œæˆ‘æ‰“å¼€ç½‘é¡µï¼Œæ„Ÿåˆ°å¿ƒé‡Œå……æ»¡äº†æˆå°±æ„Ÿã€‚è¿™æ—¶çš„ç½‘é¡µå·²ç»å®ç°äº†åŸºæœ¬çš„é¢˜ç›®è·³è½¬åŠŸèƒ½ï¼Œæ”¯æŒæ·±è‰²æ¨¡å¼çš„è°ƒæ•´ï¼Œä¸”å·²ç»æ”¯æŒäº†æ´›è°·ã€LibreOJ å’Œ Codeforces ä¸‰ä¸ª OJã€‚&lt;/p>
&lt;p>ä½†è¿™æ˜¾ç„¶æ˜¯ä¸å¤Ÿçš„ã€‚æ¥ä¸‹æ¥çš„åŠä¸ªæœˆé‡Œï¼Œæˆ‘é™†é™†ç»­ç»­å¯¹è®¸å¤š OJ æ·»åŠ äº†æ”¯æŒï¼Œç›´åˆ°æˆ‘è§‰å¾—è¿™ä¸ªç½‘é¡µåº”è¯¥æ·»åŠ ç‚¹ä»€ä¹ˆä¸œè¥¿ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘åœ¨ OI åˆ·é¢˜æ—¶è·å¾—çš„éƒ½æ˜¯é¢˜ç›®çš„åç§°ï¼Œå¦‚æœéœ€è¦æ‰¾åˆ°å¯¹åº”é¢˜ç›®ï¼Œè¿˜æ˜¯éœ€è¦å»åˆ°å¯¹åº” OJ çš„ä¸»é¡µä¸Šç‚¹è¿›æœç´¢ã€‚äºæ˜¯ï¼Œæˆ‘å†³å®šç»™æˆ‘çš„ OI Jumper æ·»åŠ æœç´¢åŠŸèƒ½ã€‚&lt;/p>
&lt;p>æˆ‘ç¬¬ä¸€æ¬¡å°è¯•å®ç°æ—¶ï¼ŒåŸæœ¬åªé’ˆå¯¹æ´›è°·è¿›è¡Œäº†å¼€å‘ï¼Œæˆ‘æ‰€å¸Œæœ›çš„æˆå“æ˜¯ï¼Œé¡µé¢å‘æ´›è°·æ¨¡æ‹Ÿä¸€æ¬¡æœç´¢ï¼Œè·å–åˆ°æ´›è°·è¿”å›çš„åŒ…å«æœç´¢ç»“æœçš„ JSON ä¿¡æ¯ï¼Œç„¶åå‘ˆç°åœ¨ OI Jumper çš„ç½‘é¡µä¸Šã€‚è¿™çœ‹ä¼¼ä¸€ä¸ªå¾ˆå¥½çš„æƒ³æ³•ï¼Œä½†å®é™…å®ç°èµ·æ¥ï¼Œå´ä¸æ˜¯ä¸€èˆ¬åœ°å›°éš¾é‡é‡ã€‚é¦–å…ˆç¢°åˆ°çš„éšœç¢æ˜¯ï¼Œæµè§ˆå™¨çš„åŒæºç­–ç•¥é˜»æ­¢äº†æˆ‘è¯»å–æ´›è°·çš„è¿”å›å€¼ã€‚æˆ‘æ­¤å‰ä»æ¥æ²¡æœ‰ç¢°åˆ°è¿™ç§æƒ…å†µï¼Œæ‰€ä»¥ç«‹é©¬é€šè¿‡æœç´¢ä¸è¯¢é—® AI è¿›è¡Œäº†è§£ï¼Œæœ€ç»ˆé€šè¿‡ä¸€ä¸ªå›½å†…æ— æ³•æ­£å¸¸è®¿é—®çš„ CORS ä»£ç†æœåŠ¡å™¨ä¸´æ—¶åœ°ç»•å¼€äº†è¿™ä¸ªé—®é¢˜ã€‚æ¥ç€ï¼Œæˆ‘å‘ç°ï¼Œç”±äº CSS åŠŸåŠ›æœ‰é™ï¼Œè‡ªå·±æ²¡æœ‰åŠæ³•åšå‡ºè‡ªå·±æƒ³è¦çš„å‘ˆç°æœç´¢ç»“æœçš„æ ·å¼ã€‚åœ¨ç§ç§å›°éš¾ä¸‹ï¼Œæˆ‘çš„æœç´¢åŠŸèƒ½åœç•™åœ¨åŠæˆå“é˜¶æ®µï¼Œé™é™åœ°èººåœ¨äº†&lt;a class="link" href="https://github.com/eoinli/oi-jumper/commit/272ad9908cdbfe0201c330db82f55c586d5d2d82" target="_blank" rel="noopener"
>ä»£ç &lt;/a>é‡Œã€‚å››å¤©çš„æ€æƒ³æ–—äº‰ä¹‹åï¼Œæˆ‘å†³å®šä¸€åˆ‡ä»ç®€ã€‚ä¸å…¶ä»æ´›è°·ä¸Šçˆ¬å–ä¿¡æ¯ï¼Œä¸å¦‚ç›´æ¥è·³è½¬åˆ°æ´›è°·çš„æœç´¢é¡µé¢å»ã€‚äºæ˜¯ï¼Œé¢˜ç›®æœç´¢çš„åŠŸèƒ½ä¸é¢˜ç›®è·³è½¬çš„åŠŸèƒ½å›å½’åˆ°äº†åŒæ ·çš„æœ¬è´¨ä¸Šï¼Œä¹Ÿæ–¹ä¾¿äº†æˆ‘å¯¹å¤šä¸ª OJ çš„æœç´¢åŠŸèƒ½æ·»åŠ æ”¯æŒã€‚&lt;/p>
&lt;h2 id="ç»´æŠ¤">ç»´æŠ¤
&lt;/h2>&lt;p>ä»æˆ‘æœ€åˆå­¦ä¹ ç½‘é¡µå¼€å‘çš„æ—¶å€™å¼€å§‹ï¼Œå°±æœ‰ä¸€ä¸ªä¸œè¥¿åœ¨æˆ‘çš„å¿ƒå¤´æ¸¸è¡ï¼šå¼¹æ€§æ¡†æ¶ flexboxã€‚ç›´åˆ°æˆ‘é€€å‡ºå¼€å‘ä¸ºæ­¢ï¼Œæˆ‘éƒ½æ²¡æœ‰å­¦ä¹ åˆ° flexbox æ¡†æ¶ï¼Œè¿˜åœ¨ä½¿ç”¨æœ€ä¼ ç»Ÿçš„ CSS Positioning è®¾ç½®å…ƒç´ çš„æ’åˆ—æ–¹å¼ã€‚æ‰€ä»¥æˆ‘æƒ³é€šè¿‡è¿™ä¸ªé¡¹ç›®æ¥æ„Ÿå—ä¸€ä¸‹ flexbox ç»™å¼€å‘å¸¦æ¥çš„ä¾¿åˆ©ã€‚è¿™é‡Œæ¨èä¸€ä¸ªè®² flexbox çš„æ•™ç¨‹ (in English)ï¼š&lt;a class="link" href="https://www.joshwcomeau.com/css/interactive-guide-to-flexbox/" target="_blank" rel="noopener"
>An Interactive Guide to Flexbox in CSS&lt;/a>ã€‚&lt;/p>
&lt;p>ä¸‹ä¸€ä¸ªè®©æˆ‘èŠ±äº†å¾ˆå¤§åŠŸå¤«çš„å°±æ˜¯å“åº”å¼è®¾è®¡ã€‚è¿™æ˜¯æˆ‘å¾ˆæ—©å°±æƒ³åšï¼Œä½†è¿Ÿè¿Ÿæ²¡åšï¼Œå´ä¸€ç›´èƒ½æ„Ÿè§‰åˆ°æˆ‘åº”è¯¥è¦å»åšçš„ä¸€ä»¶äº‹æƒ…ã€‚è™½ç„¶ç¡®å®æ²¡æœ‰ä»€ä¹ˆäººä¼šç”¨ç§»åŠ¨è®¾å¤‡å·é¢˜ï¼Œä½†æœ¬ç€æˆ‘å¯¹å¼€å‘çš„çƒ­çˆ±ä¸å¯¹å“åº”å¼è®¾è®¡çš„æ‰§å¿µï¼Œæˆ‘è¿˜æ˜¯å­¦ä¹ äº†å®ƒçš„å®ç°æ–¹å¼ã€‚å¾ˆæƒŠå–œåœ°ï¼ŒTailwind CSS å¯¹å“åº”å¼è®¾è®¡å…·æœ‰åŸç”Ÿæ”¯æŒï¼Œæ‰€ä»¥æå¤§ç¨‹åº¦é™ä½äº†æˆ‘çš„å­¦ä¹ æˆæœ¬ã€‚æˆ‘ç”¨ä¸€ä¸¤å¤©æ—¶é—´å°±å†™å¥½äº†çª„å±å¹•é€‚é…çš„ä»£ç ï¼Œå¹¶æ¿€åŠ¨åœ°å°†å…¶æäº¤åˆ°äº†ä»“åº“é‡Œã€‚&lt;/p>
&lt;p>LibreOJ ä¸€ç›´æœ‰ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„åŠŸèƒ½ï¼ˆå½“ç„¶è®¸å¤šå…¶ä»–ç½‘ç«™ä¹Ÿæœ‰ï¼‰ï¼Œå°±æ˜¯&lt;a class="link" href="https://hitokoto.cn/" target="_blank" rel="noopener"
>ä¸€è¨€&lt;/a>ã€‚æˆ‘æƒ³åœ¨ OI Jumper ä¸Šä¹ŸåŠ å…¥ä¸€è¨€çš„åŠŸèƒ½ã€‚ä½†å‘å¯¹æ–¹ API å‘å‡ºçš„ç½‘ç»œè¯·æ±‚ä¸å‡ºæ„å¤–åœ°å†æ¬¡è¢«æµè§ˆå™¨çš„åŒæºç­–ç•¥ä»¥åŒæ ·çš„æ–¹å¼æ‹¦æˆªäº†ã€‚ä½†ä¸€è¨€çš„ API æœåŠ¡å™¨ä¸æ´›è°·çš„å…¬å¼€æœåŠ¡å™¨æœ‰ä¸€ä¸ªå¾ˆå¤§çš„åŒºåˆ«ï¼Œå°±æ˜¯ä¸€è¨€æ˜¯æ”¯æŒ &lt;a class="link" href="https://zh.wikipedia.org/zh-cn/JSONP" target="_blank" rel="noopener"
>JSONP (JSON with Padding)&lt;/a> è¿”å›çš„ï¼æˆ‘å‰æ–‡æ‰€è¿°çš„è¢«åŒæºç­–ç•¥æ‹¦æˆªçš„æ—¶å€™æœç´¢åˆ°äº†è¿™ç§è§£å†³æ–¹å¼ï¼Œè™½ç„¶åœ¨æ”¯æŒæ´›è°·æœç´¢çš„æ—¶å€™å‘ç°æ´›è°·çš„æœåŠ¡å™¨å¹¶ä¸æ”¯æŒï¼Œä½†æˆåŠŸåœ¨ä¸€è¨€çš„å¼€å‘ä¸Šå¾—åˆ°äº†å®è·µã€‚è™½ç„¶ JSONP å¹¶ä¸æ˜¯ç°ä»£ç½‘ç»œè§£å†³è·¨åŸŸèµ„æºå…±äº«çš„ä¸»æµæ–¹å¼ï¼Œä½†æˆ‘å¾ˆé«˜å…´è‡ªå·±èƒ½å€Ÿæ­¤äº†è§£åˆ°æµè§ˆå™¨ä¸ç½‘ç»œå®‰å…¨æ–¹é¢å†°å±±ä¸€è§’çš„çŸ¥è¯†ã€‚&lt;/p>
&lt;p>ç›´åˆ°ä¸‹ä¸€æ¬¡å†æœ‰ä»€ä¹ˆåŠŸèƒ½è®©æˆ‘æƒ³è¦å®ç°ï¼Œæˆ–è€…æœ‰å…¶ä»– OJ éœ€è¦æ”¯æŒï¼ŒOI Jumper å°†ä¸å†é¢‘ç¹æ›´æ–°ã€‚å®ƒçš„æœ¬è´¨è™½ç„¶æ˜¯ä¸€ä¸ªå‰ç«¯é¡¹ç›®ï¼Œä½†åŒæ—¶ä¹Ÿèƒ½ä½œä¸ºæˆ‘å›å½’å‰ç«¯å¼€å‘çš„ç»ƒæ‰‹é¡¹ç›®ã€‚æˆ‘ä»è¿™ä¸€é¡¹ç›®çš„å¼€å‘ä¸­å­¦åˆ°äº†è®¸å¤šæ–°çŸ¥è¯†ï¼Œå¸Œæœ›è¿™äº›æ–°çŸ¥è¯†èƒ½ä¸ºæˆ‘æœªæ¥çš„é¡¹ç›®å¼€å‘å¥ å®šåŸºç¡€å§ã€‚&lt;/p>
&lt;h2 id="å›æƒ³">å›æƒ³
&lt;/h2>&lt;p>å¦‚æœä½ å·²ç»çœ‹å¤Ÿäº†ä¸Šé¢çš„æµæ°´è´¦ï¼Œé‚£ä¹ˆè¿™é‡Œå¯èƒ½ä¼šç»™ä½ å¸¦æ¥ä¸€äº›å¯å‘æˆ–è€…æ€è€ƒã€‚&lt;/p>
&lt;p>å°±åƒ lxl æ›¾åœ¨æ´›è°·åŠ¨æ€ä¸ºäº†æ‰¹é©³æ´›è°·åˆ¶åº¦ä¸­è®¤ä¸º AIGC æ˜¯ä¸ç®—æ³•ç«èµ›æ— å…³è¿™ä¸€éƒ¨åˆ†è€Œå›å¤è¿‡çš„ï¼š&lt;/p>
&lt;blockquote>
&lt;p>é—­å…³é”è°·ï¼ç­‰ AI æŠŠç®—æ³•ç«èµ›æ·˜æ±°æ‰ï¼ŒæŠŠ oier åŠæ‰“ï¼Œå°±ä¸æ˜¯ä¸ç®—æ³•ç«èµ›æ— å…³äº†ï¼ï¼ï¼&lt;/p>
&lt;/blockquote>
&lt;p>è¿™ä¸€å¤©æˆ–è®¸è¿Ÿæ—©è¦æ¥ã€‚ä½†æ”¾åœ¨ç®—æ³•ç«èµ›è¿™æ ·ä¸€ä¸ªå½“ä¸‹çš„é¢†åŸŸé‡Œï¼Œç”±äºæ¯”æ‹¼çš„æ˜¯äººç±»çš„æ€ç»´ä¸æ™ºæ…§ï¼Œæ‰€ä»¥äººå·¥æ™ºèƒ½èƒ½å¤Ÿæ‰®æ¼”çš„è§’è‰²è‡³å¤šå°±æ˜¯åœ¨å­¦ä¹ çš„æ—¶å€™æä¾›è¾…åŠ©ï¼Œæ´›è°·çš„åˆ¶åº¦æ˜¯å¯ä»¥ç†è§£çš„ï¼Œæ¯•ç«Ÿæ´›è°·æ˜¯ä¸€ä¸ªä¸ºäººæœåŠ¡çš„ç½‘ç«™ã€‚&lt;/p>
&lt;p>ä½†æœ‰äº†è¿™ä¸€æ¬¡çš„ç»éªŒï¼Œæˆ‘è§‰å¾—ï¼ŒæŠ›å¼€ç®—æ³•ç«èµ›ä¸è°ˆï¼Œäººå·¥æ™ºèƒ½çš„ä»‹å…¥å¹¶ä¸æ„å‘³ç€äººç±»ç¨‹åºå‘˜ä¸€å®šè¦è¢«æ›¿ä»£ã€‚ä¸€æ–¹é¢ï¼Œå­¦ä¹ äº†æ— æ•°èµ„æºçš„å¤§æ¨¡å‹å¯ä»¥åœ¨æˆ‘ä»¬å­¦ä¹ å¼€å‘çš„è¿‡ç¨‹ä¸­äºˆä»¥åŠ©åŠ›ï¼Œä½¿å­¦ä¹ å˜å¾—æ›´æœ‰æ•ˆç‡ã€æ›´æœ‰æˆæœï¼Œå°±åƒæˆ‘åœ¨ Gemini çš„è¾…åŠ©ä¸‹åˆ©ç”¨ Tailwind CSS å’Œ JSONP å®ç°äº† OI Jumper é¡¹ç›®ä¸€æ ·ï¼›å¦ä¸€æ–¹é¢ï¼Œå³ä½¿æ˜¯å·²ç»å…¥è¡Œçš„ç¨‹åºå‘˜ï¼Œäººå·¥æ™ºèƒ½æ‰®æ¼”çš„è§’è‰²ä¹Ÿä¾§é‡äºä¸€ä¸ªå·¥å…·ï¼Œæ¯”å¦‚å¸®å¿™ debugã€å¸®å¿™ä¼˜åŒ–ä»£ç å®ç°ç­‰ç­‰ï¼ŒAI ç›¸æ¯”äºç¨‹å¼åŒ–çš„è‡ªåŠ¨æœºæ›´åŠ æ™ºèƒ½ï¼Œèƒ½å¤Ÿæ›´æœ‰æ•ˆç‡åœ°å¤„ç†ä¸€äº›ç¨‹åºå¼€å‘ä¸­çš„çäº‹ï¼Œä½† AI æ¯•ç«Ÿä¸æ˜¯äººè„‘ï¼ŒAI çš„åˆ›é€ æ˜¯åŸºäºè¿‡å»çš„èµ„æºï¼Œè€Œå½“æˆ‘ä»¬éœ€è¦é¢å¯¹åˆ›æ–°æ—¶ï¼Œåªæœ‰äººè„‘æ‰èƒ½ä»è¿‡å»çš„æ€ç»´ä¸­æŒ£è„±ï¼Œåœ¨åˆ›æ–°çš„é“è·¯ä¸Šè¶Šèµ°è¶Šè¿œã€‚&lt;/p>
&lt;p>åœ¨ç®—æ³•ç«èµ›ä¸­æˆ‘ä»¬é€šè¿‡å­¦ä¹ æ¥é”»ç‚¼è‡ªå·±çš„æ€ç»´èƒ½åŠ›ï¼Œè¿™äº›æ€ç»´èƒ½åŠ›çš„ç»ˆäº§ç‰©æ˜¯ç§‘å­¦ä¸æŠ€æœ¯çš„åˆ›æ–°ä¸è¿›æ­¥ã€‚æ‰€ä»¥æˆ‘è§‰å¾—ï¼Œäººå·¥æ™ºèƒ½åªèƒ½ä¸ºæˆ‘ä»¬æ•´ç†è¿‡å»çš„çŸ¥è¯†ï¼Œä¸ºç°åœ¨çš„äººç±»æ‰€ç”¨ï¼Œè®©ç°åœ¨çš„äººç±»æœ‰æ›´å¤šçš„æ—¶é—´æ¥å­¦ä¹ ã€æ¥é”»ç‚¼ã€‚äººç±»çš„æœªæ¥ä»ç„¶æ˜¯ï¼Œä¹Ÿåªèƒ½æ˜¯ç”±äººç±»è‡ªå·±æ¥é“ºå°±ï¼Œè€Œè¿™é¡¹å¤§å·¥ç¨‹å¦‚æœè¦å¾—ä»¥åŠ é€Ÿå‘å±•ï¼Œå°±éœ€è¦äººå·¥æ™ºèƒ½ä¸ºæˆ‘ä»¬çœä¸‹é‚£äº›é¢å¯¹è¿‡å»çš„æ—¶é—´ï¼Œæ›´éœ€è¦æˆ‘ä»¬å……åˆ†åˆ©ç”¨è¿™äº›æ—¶é—´æ¥ä¸ºæˆ‘ä»¬çš„ç°åœ¨ä¸æœªæ¥ç€æƒ³ã€‚&lt;/p></description></item><item><title>ã€Œé‚£äº›è„‘æµ·é‡Œæœ€çè´µçš„ã€é¢˜è§£</title><link>https://eoin.blog/p/sol-luogu9381/</link><pubDate>Fri, 10 May 2024 00:00:05 +0800</pubDate><guid>https://eoin.blog/p/sol-luogu9381/</guid><description>&lt;p>è¿™æ˜¯ç¬”è€…è‡ªå·±å†™çš„ç¬¬ä¸€ç¯‡çº¯å¤§æ¨¡æ‹Ÿï¼Œå› æ­¤æœ¬é¢˜çš„ä»£ç ä¹Ÿæ˜¯ç›®å‰ç¬”è€…å†™è¿‡æœ€é•¿çš„ä»£ç ã€‚&lt;/p>
&lt;h2 id="how-to-code">How to Code
&lt;/h2>&lt;p>&lt;del>ä¾é¢˜æ„æ¨¡æ‹Ÿå³å¯ã€‚&lt;/del>&lt;/p>
&lt;p>æœ¬é¢˜é™¤äº†æ¨¡æ‹Ÿä»£ç å¤–å‡ ä¹æ²¡æœ‰ä»»ä½•æ€ç»´å«é‡ï¼Œçº¯çº¯çš„ç åŠ›é¢˜ï¼Œåªè¦å®¡é¢˜è¶³å¤Ÿä»”ç»†å¹¶ä¸”æœ‰è¶³å¤Ÿçš„è€å¿ƒï¼ŒA æ‰è¿™é¢˜æ˜¯å¹¶ä¸å›°éš¾çš„ã€‚å¦‚æœå†™å¤§æ¨¡æ‹Ÿçš„ç»éªŒä¸æ˜¯å¾ˆè¶³çš„è¯ï¼Œçœ‹åˆ°é¢˜ç›®ç”šè‡³ä¼šæ— ä»ä¸‹æ‰‹ï¼ˆæ¯”å¦‚æˆ‘ï¼‰ã€‚è¿™æ—¶å€™å°±æœ€å¥½ä»å¤´åˆ°å°¾æŠŠé¢˜ç›®è¯»ä¸€éï¼Œæˆ–è€…å¤šè¯»å‡ éï¼Œç„¶åå°½é‡é¡ºç€ç¨‹åºçš„å¤§è‡´è¿è¡Œè¿‡ç¨‹å¼€å§‹ç¼–ç ã€‚ä¸‹é¢å°±è·Ÿç€ç¨‹åºè¿è¡Œçš„é€»è¾‘é¡ºåºæ¥ä¸€æ­¥ä¸€æ­¥å®ç°ä»£ç ã€‚é¦–å…ˆï¼Œè§„å®šä¸€ä¸‹æœ¬æ–‡ä¸­æŸäº›å˜é‡ç±»å‹çš„æ›¿ä»£ç§°è°“ï¼ˆC++11 è¯­æ³•ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">double&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">MAP_SI&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">unordered_map&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">MAP_II&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">unordered_map&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="ç©å®¶ä¿¡æ¯è¾“å…¥">ç©å®¶ä¿¡æ¯è¾“å…¥
&lt;/h3>&lt;p>é¦–å…ˆï¼Œå‡ ä¹å¯ä»¥å®Œå…¨ç¡®å®šçš„æ˜¯ï¼Œé¢˜ç›®ç»™å®šçš„æ•°æ®å…¨éƒ¨éƒ½æ˜¯æœ‰ç”¨çš„ã€‚æ‰€ä»¥è¾“å…¥çš„æ‰€æœ‰ä¸œè¥¿éƒ½è¦å­˜å‚¨èµ·æ¥ã€‚å¹¶ä¸”ï¼Œå¯¹äºæœ¬é¢˜ä¸­è¿™æ ·æœ‰å…³ â€œé˜Ÿä¼â€ ä¸ â€œç©å®¶â€ è¿™æ ·é˜µè¥åˆ†æ˜çš„è®¾å®šï¼Œæˆ‘ä»¬å¯ä»¥å‡ ä¹è‚¯å®šåœ°ä½¿ç”¨ç±»ï¼ˆç»“æ„ä½“ï¼‰å°†åŒä¸€å®ä½“æœ‰å…³çš„æ•°å€¼å°è£…èµ·æ¥ã€‚è¿™æ ·å°±è·å¾—äº†æˆ‘ä»¬çš„ &lt;code>PLAYER&lt;/code> ç±»ï¼Œç”¨äºå­˜å‚¨ä¸€ä¸ªç©å®¶çš„å…¨éƒ¨æœ‰å…³ä¿¡æ¯ã€‚ç”±äºé¢˜ç›®æœ‰å…³ç©å®¶ä¿¡æ¯çš„è¾“å…¥æ˜¯ä»¥ç©å®¶ä¸ºå•ä½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¯¥ç±»ä¸­å®šä¹‰ä¸€ä¸ªæˆå‘˜å‡½æ•° &lt;code>input()&lt;/code> ç”¨äºå¤„ç†å•ä¸ªç©å®¶ä¿¡æ¯çš„è¾“å…¥ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å°†é¢˜ç›®ä¸­æ¶‰åŠåˆ°çš„å…¶ä»–æ²¡æœ‰è¢«è¾“å…¥çš„ç©å®¶å±æ€§å­˜å‚¨åˆ°è¿™ä¸ªç±»ä¸­ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="nc">PLAYER&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">team_fr&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å½’å±é˜Ÿä¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">team_id&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å½’å±é˜Ÿä¼å†…ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ç±»å‹ï¼š0 = weak, 1 = average, 2 = strong
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">lvl&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ç­‰çº§ï¼š1 ~ 100
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">atk&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åŸºç¡€æ”»å‡»åŠ›
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">def&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åŸºç¡€é˜²å¾¡åŠ›
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ä½“åŠ›ä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">act_skl&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ä¸»åŠ¨æŠ€èƒ½ç­‰çº§ï¼š0 ~ 5
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">psv_skl&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è¢«åŠ¨æŠ€èƒ½ç­‰çº§ï¼š0 ~ 5
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">weapon_type&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æ­¦å™¨ç±»å‹ï¼š0 = B, 1 = G, 2 = M
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">weapon_atk&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æ­¦å™¨æ”»å‡»åŠ›
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å½“å‰ä½“åŠ›
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">status&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// çŠ¶æ€ï¼š0 = dead, 1 = alive
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">skl_boost&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æŠ€èƒ½åŠ æˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">input&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span> &lt;span class="n">player_type&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">weapon_type_t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s Lv=%d maxhp=%d atk=%lf def=%lf skillLv=%d passivesklLv=%d %s weaponatk=%lf&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">player_type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">lvl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">atk&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">def&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">act_skl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">psv_skl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">weapon_type_t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">weapon_atk&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆå§‹ç”Ÿå‘½å€¼ä¸ºä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">status&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆå§‹è§’è‰²æœªå€’ä¸‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">skl_boost&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆå§‹æŠ€èƒ½åŠ æˆä¸º 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PLAYER_TYPE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">player_type&lt;/span>&lt;span class="p">)];&lt;/span> &lt;span class="c1">// æ ¹æ®è¾“å…¥è·å–è§’è‰²ç±»å‹å¯¹åº”æ•°å­—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">weapon_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">WEAPON_TYPE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">weapon_type_t&lt;/span>&lt;span class="p">)];&lt;/span> &lt;span class="c1">// æ ¹æ®è¾“å…¥è·å–æ­¦å™¨ç±»å‹å¯¹åº”æ•°å­—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d %d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¾“å…¥å—é˜Ÿé˜Ÿå‘˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">input&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">team_fr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">team_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¾“å…¥åŒ—é˜Ÿé˜Ÿå‘˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">input&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">team_fr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">team_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å°†è¾“å…¥çš„å­—ç¬¦ä¸²å±æ€§è½¬æ¢æˆæ•°å­—ï¼Œå­˜å‚¨åœ¨ä¸€ä¸ªå¸¸é‡å“ˆå¸Œè¡¨ä¸­ï¼ˆè¯¦è§æ–‡æœ«ä»£ç éƒ¨åˆ†ï¼‰ã€‚&lt;/p>
&lt;h3 id="è·å–å½“å‰å›åˆçš„æ”»å‡»æ–¹é˜Ÿå‘˜ç¼–å·">è·å–å½“å‰å›åˆçš„æ”»å‡»æ–¹é˜Ÿå‘˜ç¼–å·
&lt;/h3>&lt;p>é€šè¿‡é˜…è¯»é¢˜é¢ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæ¯ä¸€è½®çš„æ”»å‡»æ–¹ï¼ˆæˆ–æŠ€èƒ½æ–½æ”¾æ–¹ï¼Œä»¥ä¸‹æˆ‘ä»¬å°†ä¸€å›åˆå†…ä¸»åŠ¨è¿›è¡Œæ“ä½œçš„ä¸€é˜Ÿç»Ÿç§°ä¸ºæ”»å‡»æ–¹é˜Ÿä¼ï¼‰é˜Ÿä¼æ˜¯æ ¹æ®å›åˆæ•°ç¡®å®šçš„ï¼Œæ”»å‡»æ–¹é˜Ÿä¼ä¸­çš„æ”»å‡»è€…æ˜¯æ ¹æ®é˜Ÿå‘˜ç¼–å·è¿›è¡Œé€‰æ‹©çš„ã€‚&lt;/p>
&lt;p>ä¸ºäº†è¿½è¸ªä¸¤é˜Ÿçš„æ”»å‡»é˜Ÿå‘˜ï¼Œæˆ‘ä»¬å®šä¹‰æ•°ç»„ &lt;code>attacker[2]&lt;/code>ï¼Œåˆ†åˆ«å­˜å‚¨ä¸¤é˜Ÿå½“å‰çš„æ”»å‡»é˜Ÿå‘˜ç¼–å·ã€‚æ¥ç€ï¼Œä¸ºäº†æ ¹æ®é¢˜ç›®å«ä¹‰ç¡®å®šæ¯ä¸€å›åˆçš„æ”»å‡»é˜Ÿå‘˜ï¼Œæˆ‘ä»¬å®šä¹‰ &lt;code>get_attacker()&lt;/code> å‡½æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">attacker&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @brief è®¡ç®—æ¯ä¸€å›åˆæ”»å‡»æ–¹é˜Ÿä¼çš„æ”»å‡»è€…
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t æ”»å‡»æ–¹é˜Ÿä¼çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="nf">get_attacker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">do&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">++&lt;/span>&lt;span class="n">attacker&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">attacker&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="n">attacker&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">attacker&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]].&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// å¦‚æœæ‰¾åˆ°æœªå€’ä¸‹çš„è§’è‰²å°±è·³å‡ºå¾ªç¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ç”±äºé¢˜ç›®ä¿è¯æ‰€æœ‰æ“ä½œåˆæ³•ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒæ­»å¾ªç¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸ºäº†ç¡®å®šæ¯ä¸€ä¸ªå›åˆæ˜¯å“ªä¸€é˜Ÿè¿›è¡Œæ”»å‡»ï¼Œæˆ‘ä»¬åœ¨æ¯æ¬¡å¾ªç¯å¼€å¤´æ‰§è¡Œä»¥ä¸‹ä»£ç ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">round_cnt&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">round_cnt&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">RND&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">RND&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">round_cnt&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">RND&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">t_a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">RND&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">^&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è®¡ç®—æ”»å‡»æ–¹é˜Ÿä¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">t_b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">RND&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// è®¡ç®—é˜²å¾¡æ–¹é˜Ÿä¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è·å–æ”»å‡»æ–¹é˜Ÿä¼çš„å½“å‰æ”»å‡»è€…
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">get_attacker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">active&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">attacker&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è®¡ç®—ä¼¤å®³">è®¡ç®—ä¼¤å®³
&lt;/h3>&lt;p>ä¼¤å®³è®¡ç®—æ˜¯æ–½æ”¾æ”»å‡»å¯¹æ•Œäººé€ æˆå½±å“çš„é‡è¦è¦ç´ ã€‚å› æ­¤è¿™ä¸€éƒ¨åˆ†éœ€è¦ä½œä¸ºé“ºå«å¹¶ç‡å…ˆè€ƒè™‘ã€‚æ ¹æ®é¢˜ç›®ä¸­æè¿°ï¼š&lt;/p>
&lt;blockquote>
&lt;p>ã€Œä¼¤å®³ã€ï¼Œå³ã€Œä½“åŠ›å€¼ã€å‡å°‘çš„é‡ï¼Œç”±ã€Œæ”»å‡»å¼ºåº¦ã€å’Œå—åˆ°ã€Œä¼¤å®³ã€çš„äººçš„ã€Œé˜²å¾¡æŒ‡æ•°ã€å†³å®šã€‚&lt;/p>
&lt;/blockquote>
&lt;p>æ”»å‡»å¼ºåº¦æ˜¯ç”±æ”»å‡»é˜Ÿå‘˜çš„å„é¡¹æ•°å€¼ç¡®å®šçš„ï¼Œæœ€ç»ˆæ‰£è¡€çš„æ•°å€¼é€šè¿‡å—æ”»å‡»é˜Ÿå‘˜çš„ç›¸å…³é˜²å¾¡æŒ‡æ•°ç¡®å®šã€‚å¯è§ï¼Œè®¡ç®—å®Œçš„æ”»å‡»å¼ºåº¦æ˜¯æ²Ÿé€šæ–½æ”¾ä¼¤å®³ä¸æ‰¿å—ä¼¤å®³çš„æ¡¥æ¢ã€‚å› æ­¤æˆ‘ä»¬å°†è®¡ç®—å®Œçš„æ”»å‡»å¼ºåº¦ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œå¯¹äºå•ä¸ªé˜Ÿå‘˜å®æ–½æ‰£è¡€æ“ä½œã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åœ¨ &lt;code>PLAYER&lt;/code> ç±»ä¸­å®šä¹‰ &lt;code>deal_damage()&lt;/code> å‡½æ•°ï¼Œç”¨äºæ ¹æ®å½“å‰è§’è‰²å—åˆ°æ”»å‡»çš„å¼ºåº¦æ¥ç¡®å®šæ‰£è¡€çš„æ•°å€¼ã€‚åŒæ—¶ï¼Œç”±äºæ”»å‡»å¼ºåº¦çš„è®¡ç®—ä»¥åŠæ‰£è¡€æ•°å€¼çš„è®¡ç®—éƒ½éœ€è¦ç”¨åˆ°ä»¥é˜Ÿä¼ä¸ºå•ä½çš„æ”»å‡»åŠ æˆå’Œé˜²å¾¡åŠ æˆï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦å®šä¹‰è¿™ä¸¤ä¸ªæµ®ç‚¹å‹å˜é‡ &lt;code>atk_boost[2]&lt;/code> å’Œ &lt;code>def_boost[2]&lt;/code>ã€‚ç”±äºè¿™ä¸¤ä¸ªæ•°å€¼æœ€ç»ˆæ˜¯ä¹˜åˆ°è®¡ç®—ä¸­çš„ï¼Œæ‰€ä»¥åˆå§‹å€¼éœ€è¦èµ‹å€¼ä¸º 1ã€‚&lt;/p>
&lt;p>åœ¨æ‰£è¡€çš„æ—¶å€™ï¼Œéœ€è¦é¢å¤–æ³¨æ„è¾“å‡ºç­”æ¡ˆä¸­çš„ä¼¤å®³å¤§å°æ˜¯&lt;strong>åŸå§‹æ•°å€¼&lt;/strong>ï¼Œä½†è§’è‰²å®é™…æ‰£è¡€æ˜¯ä¸èƒ½æ‰£æˆè´Ÿæ•°çš„ã€‚å…¶ä»–æ‰£è¡€çš„åœ°æ–¹ä¹Ÿæ˜¯åŒç†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="n">f64&lt;/span> &lt;span class="n">atk_boost&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">f64&lt;/span> &lt;span class="n">def_boost&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="nc">PLAYER&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f64&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @brief æ ¹æ®æ”»å‡»å¼ºåº¦å¯¹å½“å‰è§’è‰²è¿›è¡Œæ‰£è¡€
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t_a æ”»å‡»æ–¹é˜Ÿä¼çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param act æ”»å‡»è€…åœ¨æ”»å‡»æ–¹é˜Ÿä¼å†…çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param eff æ”»å‡»å¼ºåº¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="n">PLAYER&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">eff&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ä¿é™©æªæ–½ï¼Œå¦‚æœå·²ç»å€’ä¸‹å°±ä¸ç”¨è€ƒè™‘äº†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">dmg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">def&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">def_boost&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team_fr&lt;/span>&lt;span class="p">]);&lt;/span> &lt;span class="c1">// è®¡ç®—æ”»å‡»äº§ç”Ÿæ‰£è¡€çš„æœ‰æ•ˆå€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">hp&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="n">dmg&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æ‰£è¡€
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¦‚æœæ‰£è¡€åè§’è‰²ç”Ÿå‘½å€¼ä¸é«˜äº 0ï¼Œåˆ™è¯¥è§’è‰²å€’ä¸‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è®¾å®šè§’è‰²çŠ¶æ€ä¸ºå€’ä¸‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s %d took %d damage from %s %d -&amp;gt; %d/%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">team_fr&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">team_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dmg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">hp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">max_hp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="æ”»å‡»">æ”»å‡»
&lt;/h3>&lt;p>ç”±é¢˜é¢æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæ”»å‡»åˆ†å››ç§ï¼šæ™®é€šæ”»å‡»å’Œä¸‰ç§ç‰¹æ®Šæ”»å‡»ã€‚é˜…è¯»é¢˜é¢ä¸éš¾å‘ç°ï¼Œè¿™å››ç§æ”»å‡»ä¸­ï¼Œåªè·Ÿæ”»å‡»é˜Ÿå‘˜ç›¸å…³çš„å±æ€§åŠ æˆï¼Œä»¥åŠè·Ÿå—æ”»å‡»é˜Ÿå‘˜çš„èº²é—ªä½ç½®æœ‰å…³çš„æ–¹ä½åŠ æˆï¼Œå¯¹äºä»»ä½•ä¸€ç§æ”»å‡»éƒ½æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆé¢„å¤„ç†å‡ºè¿™ä¸€éƒ¨åˆ†å±æ€§çš„åŠ æˆã€‚æ™®é€šæ”»å‡»å’Œ B ç‰¹æ®Šæ”»å‡»æ¯”è¾ƒç®€å•ï¼Œç›´æ¥è°ƒç”¨å—æ”»å‡»è€…çš„ &lt;code>deal_damage()&lt;/code> å‡½æ•°ï¼Œå¹¶ä¼ å…¥è®¡ç®—å¥½çš„æ”»å‡»å¼ºåº¦å€¼å³å¯ã€‚G æ”»å‡»å’Œ M æ”»å‡»å±äº AoE æ”»å‡»ï¼Œä¸å—æ”»å‡»é˜Ÿå‘˜çš„ç«™ä½æœ‰å…³ï¼Œå› æ­¤æˆ‘ä»¬å…ˆæ ¹æ®é¢˜ç›®è¦æ±‚å®šä¹‰ä¸¤ä¸ªæ•°ç»„ï¼ˆæˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘è¦ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼‰&lt;code>PLACE[]&lt;/code> å’Œ &lt;code>INIT_INDEX[]&lt;/code>ï¼Œåˆ†åˆ«å­˜å‚¨é˜Ÿå‘˜çš„ç«™ä½é¡ºåºå’Œæ¯ä¸€ä¸ªé˜Ÿå‘˜åœ¨é˜Ÿä¼ä¸­çš„ä½ç½®ç¼–å·ï¼Œè¿™ä¸¤ä¸ªæ•°ç»„çš„ä¿¡æ¯æ˜¯äº’ä¸ºé”®å€¼çš„ã€‚ç”±æ­¤æˆ‘ä»¬å°±å¯ä»¥è·å– AoE æ”»å‡»ä¸­å—æ”»å‡»çš„é˜Ÿå‘˜äº†ã€‚æ¥ä¸‹æ¥ä¾é¢˜æ„æ¨¡æ‹Ÿå³å¯ã€‚&lt;/p>
&lt;p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ AoE ä¼¤å®³ä¸­ï¼Œè™½ç„¶æ”»å‡»å¼ºåº¦ä¸­çš„æ–¹ä½åŠ æˆæ˜¯æŒ‰ç…§ä¸»è¦è¢«æ”»å‡»è€…çš„èº²é—ªæ–¹ä½æ¥è®¡ç®—çš„ï¼Œä½†ç§æ—åŠ æˆæ˜¯æŒ‰ç…§å—åˆ°æ”»å‡»çš„å®ä½“æœ¬èº«çš„ç§æ—æ¥è®¡ç®—çš„ï¼Œæ‰€ä»¥è¿™ä¸€éƒ¨åˆ†éœ€è¦å•ç‹¬è€ƒè™‘ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æŠŠç§æ—åŠ æˆä»é¢„å¤„ç†ä¸­å­¤ç«‹å‡ºæ¥çš„ä¸€ä¸ªä¸»è¦å› ç´ ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">MAP_II&lt;/span> &lt;span class="n">INIT_INDEX&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">}};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @brief å®æ–½æ™®é€šæ”»å‡»å’Œç‰¹æ®Šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param atk_p æ”»å‡»ä½ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param ddg_p èº²é—ªä½ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param act æ”»å‡»è€…åœ¨æ”»å‡»æ–¹é˜Ÿä¼å†…çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param trg é˜²å¾¡è€…åœ¨é˜²å¾¡æ–¹é˜Ÿä¼å†…çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t_a æ”»å‡»æ–¹é˜Ÿä¼ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t_b é˜²å¾¡æ–¹é˜Ÿä¼ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param type æ”»å‡»ç±»å‹ï¼Œ-1 ä¸ºæ™®é€šæ”»å‡»ï¼Œ0~2 ä¸ºå¯¹åº”çš„ç‰¹æ®Šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="nf">perform_attack&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">ddg_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">t_b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç”±äº G å’Œ M ç±»å‹çš„ç§æ—åŠ æˆå¯¹ä¸åŒç›®æ ‡æœ‰ä¸åŒçš„å–å€¼ï¼Œæ‰€ä»¥é¢„å¤„ç†æ—¶ä¸åŒ…å«ç§æ—åŠ æˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">atk&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">weapon_atk&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">skl_boost&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">atk_boost&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LOC_BOOST&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">atk_p&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">ddg_p&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ™®é€šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// B å‹ç‰¹æ®Šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">1.25&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é¢„å¤„ç† G å’Œ M ç±»å‹ç‰¹æ®Š AoE æ”»å‡»çš„èŒƒå›´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">trg_l&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trg_r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¥¿è¾¹ç¬¬ä¸€ä¸ªæœªå€’ä¸‹çš„è§’è‰²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">INIT_INDEX&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]].&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trg_l&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä¸œè¾¹ç¬¬ä¸€ä¸ªæœªå€’ä¸‹çš„è§’è‰²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">INIT_INDEX&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]].&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trg_r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// G å‹ç‰¹æ®Šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">cand_cnt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trg_l&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trg_r&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f64&lt;/span> &lt;span class="n">mul&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">1.35&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">cand_cnt&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mul&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trg_l&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_l&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mul&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_l&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trg_r&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_r&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mul&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_r&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// M å‹ç‰¹æ®Šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">1.15&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trg_l&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_l&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.23&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_l&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trg_r&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_r&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.23&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_r&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">RND&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">RND&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">round_cnt&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">RND&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span> &lt;span class="n">action_type&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s target=%d &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">action_type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ–½æ”¾æ™®é€šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">action_type&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;Basicattack&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ddg_p&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;atkpos=%d ddgpos=%d &lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">ddg_p&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">perform_attack&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ddg_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">active&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t_b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">skl_boost&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æ–½æ”¾æ”»å‡»ä¹‹åé‡ç½®æŠ€èƒ½åŠ æˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ–½æ”¾ç‰¹æ®Šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">action_type&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;Specialattack&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ddg_p&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;atkpos=%d ddgpos=%d &lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">ddg_p&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">perform_attack&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ddg_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">active&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t_b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">weapon_type&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">skl_boost&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æ–½æ”¾æ”»å‡»ä¹‹åé‡ç½®æŠ€èƒ½åŠ æˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">putchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;\n&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="é‡Šæ”¾ä¸»åŠ¨æŠ€èƒ½">é‡Šæ”¾ä¸»åŠ¨æŠ€èƒ½
&lt;/h3>&lt;p>ç”±äºæŠ€èƒ½éƒ¨åˆ†æ¶‰åŠåˆ°äº†å¾ˆå¤šå¸¸æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¦‚å…ˆæŠŠæ‰€æœ‰æ•°å€¼å­˜èµ·æ¥ã€‚è¿™ä¸ªæ—¶å€™å°±ä½“ç°å‡ºå°†å­—ç¬¦ä¸²å±æ€§å­˜å‚¨ä¸ºæ•´æ•°çš„ä¼˜è¶Šä¹‹å¤„äº†ã€‚æ³¨æ„æˆ‘çš„å­˜æ³•ä¸­ï¼Œè¿˜åŒ…å«äº†æŠ€èƒ½ç­‰çº§ä¸º 0 æ—¶çš„åŠ æˆï¼Œè™½ç„¶å¯èƒ½ç”¨ä¸åˆ°ï¼Œä½†è¿˜æ˜¯å­˜ä¸€ä¸‹æ¯”è¾ƒä¿é™©ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">ACT_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="mf">0.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.12&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.17&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.20&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="mf">0.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.06&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.07&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.08&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.09&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.10&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="mf">1.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">2.10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">2.17&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">2.24&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">2.32&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">2.40&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">PSV_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="mf">0.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.013&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.016&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.019&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.022&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.025&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="mf">0.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.01&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.02&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.03&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.04&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.05&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="mf">0.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.01&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.02&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.03&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.04&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.05&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æœ‰å…³ä¸»åŠ¨æŠ€èƒ½ï¼Œæœ‰å‡ ç‚¹å€¼å¾—æ³¨æ„ã€‚&lt;/p>
&lt;p>ç¬¬ä¸€æ˜¯ Weak ç±»å‹çš„ä¸»åŠ¨æŠ€èƒ½ï¼ŒæŠ€èƒ½é‡Šæ”¾çš„å¯¹è±¡æ˜¯æœ¬é˜Ÿæˆå‘˜ï¼Œæ‰€ä»¥åœ¨ä¼ å…¥å‚æ•°çš„æ—¶å€™ï¼Œç›®æ ‡é˜Ÿä¼éœ€è¦è®¾å®šä¸ºæœ¬é˜Ÿã€‚åœ¨å›å¤ç”Ÿå‘½çš„æ—¶å€™ï¼Œéœ€è¦é¢å¤–æ³¨æ„è¾“å‡ºç­”æ¡ˆä¸­çš„å›å¤é‡å¤§å°æ˜¯&lt;strong>åŸå§‹æ•°å€¼&lt;/strong>ï¼Œä½†è§’è‰²å®é™…å›å¤ç”Ÿå‘½æ˜¯ä¸èƒ½è¶…è¿‡ä¸Šé™çš„ã€‚å…¶ä»–å›å¤ç”Ÿå‘½çš„åœ°æ–¹ä¹Ÿæ˜¯åŒç†ã€‚&lt;/p>
&lt;p>ç¬¬äºŒæ˜¯ Average ç±»å‹çš„ä¸»åŠ¨æŠ€èƒ½ï¼Œä¼šç»™å¯¹æ–¹æ–½åŠ  DoT æŒç»­ä¼¤å®³å¹¶åœ¨&lt;strong>æŠ€èƒ½é‡Šæ”¾è€…æ‰€åœ¨é˜Ÿä¼çš„ä¸»åŠ¨å›åˆçš„å›åˆæœ«&lt;/strong>è¿›è¡Œç»“ç®—ã€‚ç”±äº DoT ä¼¤å®³ä¸€æ—¦æ–½åŠ ï¼Œå°±åªä¸è¢«æ–½åŠ çš„æ•Œæ–¹é˜Ÿå‘˜æœ‰å…³äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ &lt;code>PLAYER&lt;/code> ç±»ä¸­å¯¹æœ‰å…³ DoT ä¼¤å®³çš„ä¿¡æ¯è¿›è¡Œå­˜å‚¨ï¼Œå¹¶å®šä¹‰å‡½æ•° &lt;code>DOT()&lt;/code>ï¼Œåœ¨æ¯ä¸€ä¸ªç”Ÿæ•ˆå›åˆæœ«æ¿€æ´»ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="nc">PLAYER&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">dot_dmg&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æŒç»­ä¼¤å®³å¤§å°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">dot_rounds&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æŒç»­ä¼¤å®³å±‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">DOT&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @brief DoTï¼Œå³ Damage over Timeï¼Œå¤„ç†å½“å‰è§’è‰²å—åˆ°çš„ Average ç±»å‹çš„æŒç»­ä¼¤å®³
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="n">PLAYER&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ä¿é™©æªæ–½ï¼Œå¦‚æœå·²ç»å€’ä¸‹å°±ä¸ç”¨è€ƒè™‘äº†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">dot_rounds&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// å¦‚æœæŒç»­ä¼¤å®³å±‚æ•°ä¸ä¸º 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">dot_rounds&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">hp&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="n">dot_dmg&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆ™è§¦å‘ä¸€æ¬¡æŒç»­ä¼¤å®³å¹¶å‡ä¸€å±‚å±‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åŒä¸Š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">input&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">dot_rounds&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆå§‹æŒç»­ä¼¤å®³å‰©ä½™å±‚æ•°ä¸º 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">dot_dmg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆå§‹æŒç»­ä¼¤å®³å¤§å°ä¸º 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s %d took %d damage from skill -&amp;gt; %d/%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">team_fr&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">team_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dot_dmg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">hp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">max_hp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>é‚£ä¹ˆæ¥ä¸‹æ¥å°±å¯ä»¥å†™å¤„ç†ä¸»åŠ¨æŠ€èƒ½é‡Šæ”¾çš„å‡½æ•°äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @brief è§¦å‘ä¸»åŠ¨æŠ€èƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param act é‡Šæ”¾æŠ€èƒ½è€…åœ¨é‡Šæ”¾æŠ€èƒ½æ–¹é˜Ÿä¼å†…çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param trg è¢«é‡Šæ”¾æŠ€èƒ½è€…åœ¨è¢«é‡Šæ”¾æŠ€èƒ½æ–¹é˜Ÿä¼å†…çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t_a é‡Šæ”¾æŠ€èƒ½æ–¹é˜Ÿä¼çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t_b è¢«é‡Šæ”¾æŠ€èƒ½é˜Ÿä¼çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="nf">activate_active_skill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">t_b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è·å–æŠ€èƒ½ç±»å‹åä»¥ä¾¿è¾“å‡º
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">str&lt;/span> &lt;span class="n">skl_type&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">skl_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Weak&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">skl_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Average&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">skl_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Strong&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s %d applied %s skill to %s %d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">skl_type&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">c_str&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">t_b&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯¹äº Weak ç±»å‹çš„ä¸»åŠ¨æŠ€èƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">tmp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">heal&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ACT_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">act_skl&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è®¡ç®—å›å¤é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">heal&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å›å¤
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¦‚æœå›å¤åè¶…è¿‡ç”Ÿå‘½ä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆ™å°†ç”Ÿå‘½å€¼æ”¹ä¸ºä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">tmp&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¦‚æœç”Ÿå‘½å€¼æœ‰æ‰€å˜åŠ¨ï¼Œå°±éœ€è¦è¾“å‡º
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s %d recovered +%d hp -&amp;gt; %d/%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">t_b&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">heal&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯¹äº Average ç±»å‹çš„ä¸»åŠ¨æŠ€èƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">dot_rounds&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è®¾æŒç»­ä¼¤å®³æŒç»­ 3 å±‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">dot_dmg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ACT_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">act_skl&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è®¡ç®—æŒç»­ä¼¤å®³å¤§å°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯¹äº Strong ç±»å‹çš„ä¸»åŠ¨æŠ€èƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">skl_boost&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ACT_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">act_skl&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// æ›´æ”¹è§’è‰²çš„æŠ€èƒ½åŠ æˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">RND&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">RND&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">round_cnt&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">RND&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ–½æ”¾ä¸»åŠ¨æŠ€èƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">action_type&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;Skill&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// åªæœ‰ Average ç±»å‹çš„ä¸»åŠ¨æŠ€èƒ½æ˜¯å¯¹æ•Œæ–¹çš„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">activate_active_skill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nl">t_b&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯¹é˜²å®ˆæ–¹é˜Ÿä¼ä¸­æ‰€æœ‰æ”¶åˆ°æŒç»­ä¼¤å®³çš„é˜Ÿå‘˜ç»“ç®—æŒç»­ä¼¤å®³ï¼ˆåŒé˜Ÿæ–½æ”¾çš„æŒç»­ä¼¤å®³åªåœ¨åŒé˜Ÿä¸ºæ”»å‡»æ–¹çš„å›åˆå†…ç”Ÿæ•ˆï¼‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">putchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;\n&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="è®¡ç®—å¹¶æ–½åŠ è¢«åŠ¨æŠ€èƒ½">è®¡ç®—å¹¶æ–½åŠ è¢«åŠ¨æŠ€èƒ½
&lt;/h3>&lt;p>è¢«åŠ¨æŠ€èƒ½æ˜¯æœ¬é¢˜ä¸»è¦çš„å‘ç‚¹ä¹‹ä¸€ï¼Œè™½ç„¶é¢˜ç›®å·²ç»è¯´æ˜ï¼Œä½†è¿˜æ˜¯å¾ˆå®¹æ˜“æ¼å†™ã€‚åœ¨è§’è‰²å€’ä¸‹æ—¶ï¼Œè¯¥è§’è‰²ç»™å·±æ–¹é˜Ÿä¼è´¡çŒ®çš„è¢«åŠ¨æŠ€èƒ½æ•°å€¼éœ€è¦é‡æ–°è®¡ç®—ã€‚æ¯å›åˆå¼€å§‹æ—¶ï¼Œè¿˜éœ€è¦å¤„ç† Weak ç±»å‹çš„è¢«åŠ¨æŠ€èƒ½å¯¹å·±æ–¹é˜Ÿä¼æˆå‘˜çš„ç”Ÿå‘½å€¼å›å¤ã€‚å› æ­¤æˆ‘ä»¬å†™ä¸€ä¸ªä¸“é—¨çš„å‡½æ•° &lt;code>reapply_passive_skills()&lt;/code>ï¼Œåœ¨æ¯æ¬¡éœ€è¦é‡æ–°è®¡ç®—è¢«åŠ¨æŠ€èƒ½æ—¶ï¼Œæ•´ä½“å…¨éƒ¨ç»Ÿè®¡ä¸€éã€‚ï¼ˆåæ­£æ•°æ®èŒƒå›´å°ï¼Œå¤æ‚åº¦å†é«˜ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ï¼‰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @brief åœ¨æ¯å›åˆå¼€å§‹æ—¶åŠæœ‰è§’è‰²å€’ä¸‹åé‡æ–°è®¡ç®—è¢«åŠ¨ä¼¤å®³
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t é»˜è®¤ä¸º -1ï¼Œæœ‰è§’è‰²å€’ä¸‹ï¼›å¦‚æœè¾“å…¥ä¸º 0 æˆ– 1ï¼Œåˆ™ä»£è¡¨ Weak ç±»å‹çš„è¢«åŠ¨æŠ€èƒ½ç”Ÿæ•ˆçš„å›¢é˜Ÿ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="nf">reapply_passive_skills&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// å¦‚æœæ˜¯å¼€å±€ï¼Œåˆ™éœ€è¦ä½¿ Weak ç±»å‹çš„è¢«åŠ¨æ•ˆæœç”Ÿæ•ˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">weak&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ç»Ÿè®¡ Weak è¢«åŠ¨å åŠ æ•ˆæœå±‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">status&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¯¹äºå½“å‰é˜Ÿä¼ä¸­æ‰€æœ‰è¿˜æ´»ç€çš„ Weak ç±»å‹è§’è‰²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">weak&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">PSV_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">psv_skl&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// æ ¹æ®å…¶ç­‰çº§å åŠ æ•ˆæœåŠ æˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">weak&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">weak&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.05&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// è€ƒè™‘æ•ˆæœåŠ æˆä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">continue&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å·²ç»å€’ä¸‹çš„è§’è‰²å°±ä¸ç”¨è€ƒè™‘äº†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">tmp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">heal&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">weak&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è®¡ç®—å›å¤é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">heal&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å›å¤
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¦‚æœå›å¤åè¶…è¿‡ç”Ÿå‘½ä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆ™å°†ç”Ÿå‘½å€¼æ›´æ”¹ä¸ºä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">tmp&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¦‚æœç”Ÿå‘½å€¼æœ‰æ‰€å˜åŠ¨ï¼Œå°±éœ€è¦è¾“å‡º
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s %d recovered +%d hp -&amp;gt; %d/%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">heal&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯¹äºå…¶ä»–ä¸¤ç§ç±»å‹ï¼Œåªéœ€è¦åœ¨è§’è‰²å€’ä¸‹åè€ƒè™‘è¢«åŠ¨æŠ€èƒ½åˆ†é…æƒ…å†µå³å¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f64&lt;/span> &lt;span class="n">average&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">strong&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ç»Ÿè®¡è¢«åŠ¨æ•ˆæœå åŠ å±‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¯¹äºå½“å‰é˜Ÿä¼ä¸­æ‰€æœ‰è¿˜æ´»ç€çš„å¯¹åº”ç±»å‹é˜Ÿå‘˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// ç»Ÿè®¡ Average è¢«åŠ¨å åŠ å±‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">average&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">PSV_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">psv_skl&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// ç»Ÿè®¡ Strong è¢«åŠ¨å åŠ å±‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">strong&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">PSV_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">psv_skl&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ ¹æ®ä¸Šé™è¿›è¡Œç›¸åº”è°ƒæ•´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">average&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">average&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">strong&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">strong&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¢åŠ å¯¹åº”çš„é˜²å¾¡åŠ æˆã€æ”»å‡»åŠ æˆçš„å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">def_boost&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">average&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">atk_boost&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">strong&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å°†è¿™ä¸ªå‡½æ•°æ·»åŠ åˆ°æ¯å›åˆå¼€å§‹æ—¶ä»¥åŠæœ‰è§’è‰²å€’ä¸‹åå³å¯ã€‚&lt;/p>
&lt;h3 id="å…¶ä»–ç»†èŠ‚">å…¶ä»–ç»†èŠ‚
&lt;/h3>&lt;p>æ¯”å¦‚å›åˆæœ«ä¿¡æ¯çš„è¾“å‡ºå’Œæœ€åèµ¢å®¶çš„åˆ¤å®šã€‚è¿™äº›å°ç»†èŠ‚å°±è¯·çœ‹ä¸‹é¢çš„å®Œæ•´ä»£ç äº†ã€‚&lt;/p>
&lt;h2 id="code">Code
&lt;/h2>&lt;p>ä»¥ä¸‹ä»£ç å»ºè®®ä½¿ç”¨ Visual Studio Code æˆ–è€…å…¶ä»–åŠŸèƒ½è¾ƒä¸°å¯Œçš„ç¼–è¾‘å™¨æ‰“å¼€é¢„è§ˆï¼Œå› ä¸ºæˆ‘åœ¨éƒ¨åˆ†å‡½æ•°ä¸Šæ·»åŠ äº† Doxygen æ³¨é‡Šï¼Œä»¥ä¾¿å¢å¼ºä»£ç å¯è¯»æ€§ï¼Œå³ä½¿å·²ç»æ²¡æœ‰ä»€ä¹ˆå¯è¯»æ€§å¯è¨€äº†ã€‚ä½†ä¸€å®šä¸è¦å¤åˆ¶ç²˜è´´æäº¤ï¼Œä¸€å®šè¦è‡ªå·±å†™ä¸€éï¼&lt;/p>
&lt;details>
&lt;summary>ç‚¹å‡»æµè§ˆå…¨éƒ¨ä»£ç ï¼ˆå…± 360 è¡Œï¼Œå«æ³¨é‡Šï¼‰&lt;/summary>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;span class="lnt">268
&lt;/span>&lt;span class="lnt">269
&lt;/span>&lt;span class="lnt">270
&lt;/span>&lt;span class="lnt">271
&lt;/span>&lt;span class="lnt">272
&lt;/span>&lt;span class="lnt">273
&lt;/span>&lt;span class="lnt">274
&lt;/span>&lt;span class="lnt">275
&lt;/span>&lt;span class="lnt">276
&lt;/span>&lt;span class="lnt">277
&lt;/span>&lt;span class="lnt">278
&lt;/span>&lt;span class="lnt">279
&lt;/span>&lt;span class="lnt">280
&lt;/span>&lt;span class="lnt">281
&lt;/span>&lt;span class="lnt">282
&lt;/span>&lt;span class="lnt">283
&lt;/span>&lt;span class="lnt">284
&lt;/span>&lt;span class="lnt">285
&lt;/span>&lt;span class="lnt">286
&lt;/span>&lt;span class="lnt">287
&lt;/span>&lt;span class="lnt">288
&lt;/span>&lt;span class="lnt">289
&lt;/span>&lt;span class="lnt">290
&lt;/span>&lt;span class="lnt">291
&lt;/span>&lt;span class="lnt">292
&lt;/span>&lt;span class="lnt">293
&lt;/span>&lt;span class="lnt">294
&lt;/span>&lt;span class="lnt">295
&lt;/span>&lt;span class="lnt">296
&lt;/span>&lt;span class="lnt">297
&lt;/span>&lt;span class="lnt">298
&lt;/span>&lt;span class="lnt">299
&lt;/span>&lt;span class="lnt">300
&lt;/span>&lt;span class="lnt">301
&lt;/span>&lt;span class="lnt">302
&lt;/span>&lt;span class="lnt">303
&lt;/span>&lt;span class="lnt">304
&lt;/span>&lt;span class="lnt">305
&lt;/span>&lt;span class="lnt">306
&lt;/span>&lt;span class="lnt">307
&lt;/span>&lt;span class="lnt">308
&lt;/span>&lt;span class="lnt">309
&lt;/span>&lt;span class="lnt">310
&lt;/span>&lt;span class="lnt">311
&lt;/span>&lt;span class="lnt">312
&lt;/span>&lt;span class="lnt">313
&lt;/span>&lt;span class="lnt">314
&lt;/span>&lt;span class="lnt">315
&lt;/span>&lt;span class="lnt">316
&lt;/span>&lt;span class="lnt">317
&lt;/span>&lt;span class="lnt">318
&lt;/span>&lt;span class="lnt">319
&lt;/span>&lt;span class="lnt">320
&lt;/span>&lt;span class="lnt">321
&lt;/span>&lt;span class="lnt">322
&lt;/span>&lt;span class="lnt">323
&lt;/span>&lt;span class="lnt">324
&lt;/span>&lt;span class="lnt">325
&lt;/span>&lt;span class="lnt">326
&lt;/span>&lt;span class="lnt">327
&lt;/span>&lt;span class="lnt">328
&lt;/span>&lt;span class="lnt">329
&lt;/span>&lt;span class="lnt">330
&lt;/span>&lt;span class="lnt">331
&lt;/span>&lt;span class="lnt">332
&lt;/span>&lt;span class="lnt">333
&lt;/span>&lt;span class="lnt">334
&lt;/span>&lt;span class="lnt">335
&lt;/span>&lt;span class="lnt">336
&lt;/span>&lt;span class="lnt">337
&lt;/span>&lt;span class="lnt">338
&lt;/span>&lt;span class="lnt">339
&lt;/span>&lt;span class="lnt">340
&lt;/span>&lt;span class="lnt">341
&lt;/span>&lt;span class="lnt">342
&lt;/span>&lt;span class="lnt">343
&lt;/span>&lt;span class="lnt">344
&lt;/span>&lt;span class="lnt">345
&lt;/span>&lt;span class="lnt">346
&lt;/span>&lt;span class="lnt">347
&lt;/span>&lt;span class="lnt">348
&lt;/span>&lt;span class="lnt">349
&lt;/span>&lt;span class="lnt">350
&lt;/span>&lt;span class="lnt">351
&lt;/span>&lt;span class="lnt">352
&lt;/span>&lt;span class="lnt">353
&lt;/span>&lt;span class="lnt">354
&lt;/span>&lt;span class="lnt">355
&lt;/span>&lt;span class="lnt">356
&lt;/span>&lt;span class="lnt">357
&lt;/span>&lt;span class="lnt">358
&lt;/span>&lt;span class="lnt">359
&lt;/span>&lt;span class="lnt">360
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;cstdio&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;string&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;unordered_map&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#define endl &amp;#39;\n&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">double&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">str&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">MAP_SI&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">unordered_map&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">MAP_II&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">unordered_map&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// å›ºå®šçš„åŠ æˆæ•°å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">const&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">LOC_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mf">1.25&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">1.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.75&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.75&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">1.00&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{{&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.9&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">1.1&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mf">1.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.9&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mf">0.9&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">1.1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">1.0&lt;/span>&lt;span class="p">}};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">ACT_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="mf">0.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.12&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.15&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.17&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.20&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="mf">0.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.06&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.07&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.08&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.09&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.10&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="mf">1.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">2.10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">2.17&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">2.24&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">2.32&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">2.40&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">PSV_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="mf">0.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.013&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.016&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.019&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.022&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.025&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="mf">0.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.01&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.02&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.03&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.04&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.05&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="mf">0.00&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.01&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.02&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.03&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.04&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.05&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">f64&lt;/span> &lt;span class="n">atk_boost&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">f64&lt;/span> &lt;span class="n">def_boost&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">MAP_SI&lt;/span> &lt;span class="n">WEAPON_TYPE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{{&lt;/span>&lt;span class="s">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;G&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;M&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">MAP_SI&lt;/span> &lt;span class="n">PLAYER_TYPE&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{{&lt;/span>&lt;span class="s">&amp;#34;Weak&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;Average&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s">&amp;#34;Strong&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">}};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">MAP_II&lt;/span> &lt;span class="n">INIT_INDEX&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">}};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">round_cnt&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">attacker&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="nc">PLAYER&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">team_fr&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å½’å±é˜Ÿä¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">team_id&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å½’å±é˜Ÿä¼å†…ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">type&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ç±»å‹ï¼š0 = weak, 1 = average, 2 = strong
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">lvl&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ç­‰çº§ï¼š1 ~ 100
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">atk&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åŸºç¡€æ”»å‡»åŠ›
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">def&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åŸºç¡€é˜²å¾¡åŠ›
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ä½“åŠ›ä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">act_skl&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ä¸»åŠ¨æŠ€èƒ½ç­‰çº§ï¼š0 ~ 5
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">psv_skl&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è¢«åŠ¨æŠ€èƒ½ç­‰çº§ï¼š0 ~ 5
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">weapon_type&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æ­¦å™¨ç±»å‹ï¼š0 = B, 1 = G, 2 = M
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">weapon_atk&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æ­¦å™¨æ”»å‡»åŠ›
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å½“å‰ä½“åŠ›
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">bool&lt;/span> &lt;span class="n">status&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// çŠ¶æ€ï¼š0 = dead, 1 = alive
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">skl_boost&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æŠ€èƒ½åŠ æˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">dot_dmg&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æŒç»­ä¼¤å®³å¤§å°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">dot_rounds&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æŒç»­ä¼¤å®³å±‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">input&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span> &lt;span class="n">player_type&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">weapon_type_t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s Lv=%d maxhp=%d atk=%lf def=%lf skillLv=%d passivesklLv=%d %s weaponatk=%lf&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">player_type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">lvl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">atk&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">def&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">act_skl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">psv_skl&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">weapon_type_t&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">weapon_atk&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆå§‹ç”Ÿå‘½å€¼ä¸ºä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">status&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆå§‹è§’è‰²æœªå€’ä¸‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">skl_boost&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆå§‹æŠ€èƒ½åŠ æˆä¸º 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PLAYER_TYPE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">player_type&lt;/span>&lt;span class="p">)];&lt;/span> &lt;span class="c1">// æ ¹æ®è¾“å…¥è·å–è§’è‰²ç±»å‹å¯¹åº”æ•°å­—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">weapon_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">WEAPON_TYPE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">weapon_type_t&lt;/span>&lt;span class="p">)];&lt;/span> &lt;span class="c1">// æ ¹æ®è¾“å…¥è·å–æ­¦å™¨ç±»å‹å¯¹åº”æ•°å­—
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">dot_rounds&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆå§‹æŒç»­ä¼¤å®³å‰©ä½™å±‚æ•°ä¸º 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">dot_dmg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆå§‹æŒç»­ä¼¤å®³å¤§å°ä¸º 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f64&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">DOT&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @brief åœ¨æ¯å›åˆå¼€å§‹æ—¶åŠæœ‰è§’è‰²å€’ä¸‹åé‡æ–°è®¡ç®—è¢«åŠ¨ä¼¤å®³
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t é»˜è®¤ä¸º -1ï¼Œæœ‰è§’è‰²å€’ä¸‹ï¼›å¦‚æœè¾“å…¥ä¸º 0 æˆ– 1ï¼Œåˆ™ä»£è¡¨ Weak ç±»å‹çš„è¢«åŠ¨æŠ€èƒ½ç”Ÿæ•ˆçš„å›¢é˜Ÿ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="nf">reapply_passive_skills&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// å¦‚æœæ˜¯å¼€å±€ï¼Œåˆ™éœ€è¦ä½¿ Weak ç±»å‹çš„è¢«åŠ¨æ•ˆæœç”Ÿæ•ˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">weak&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ç»Ÿè®¡ Weak è¢«åŠ¨å åŠ æ•ˆæœå±‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">status&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¯¹äºå½“å‰é˜Ÿä¼ä¸­æ‰€æœ‰è¿˜æ´»ç€çš„ Weak ç±»å‹è§’è‰²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">weak&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">PSV_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">psv_skl&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// æ ¹æ®å…¶ç­‰çº§å åŠ æ•ˆæœåŠ æˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">weak&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">weak&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.05&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// è€ƒè™‘æ•ˆæœåŠ æˆä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">continue&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å·²ç»å€’ä¸‹çš„è§’è‰²å°±ä¸ç”¨è€ƒè™‘äº†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">tmp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">heal&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">weak&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è®¡ç®—å›å¤é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">heal&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å›å¤
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¦‚æœå›å¤åè¶…è¿‡ç”Ÿå‘½ä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆ™å°†ç”Ÿå‘½å€¼æ›´æ”¹ä¸ºä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">tmp&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¦‚æœç”Ÿå‘½å€¼æœ‰æ‰€å˜åŠ¨ï¼Œå°±éœ€è¦è¾“å‡º
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s %d recovered +%d hp -&amp;gt; %d/%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">heal&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯¹äºå…¶ä»–ä¸¤ç§ç±»å‹ï¼Œåªéœ€è¦åœ¨è§’è‰²å€’ä¸‹åè€ƒè™‘è¢«åŠ¨æŠ€èƒ½åˆ†é…æƒ…å†µå³å¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f64&lt;/span> &lt;span class="n">average&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">strong&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ç»Ÿè®¡è¢«åŠ¨æ•ˆæœå åŠ å±‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¯¹äºå½“å‰é˜Ÿä¼ä¸­æ‰€æœ‰è¿˜æ´»ç€çš„å¯¹åº”ç±»å‹é˜Ÿå‘˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// ç»Ÿè®¡ Average è¢«åŠ¨å åŠ å±‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">average&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">PSV_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">psv_skl&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// ç»Ÿè®¡ Strong è¢«åŠ¨å åŠ å±‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">strong&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">PSV_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">psv_skl&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ ¹æ®ä¸Šé™è¿›è¡Œç›¸åº”è°ƒæ•´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">average&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">average&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">strong&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">strong&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¢åŠ å¯¹åº”çš„é˜²å¾¡åŠ æˆã€æ”»å‡»åŠ æˆçš„å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">def_boost&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">average&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">atk_boost&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">strong&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @brief æ ¹æ®æ”»å‡»å¼ºåº¦å¯¹å½“å‰è§’è‰²è¿›è¡Œæ‰£è¡€
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t_a æ”»å‡»æ–¹é˜Ÿä¼çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param act æ”»å‡»è€…åœ¨æ”»å‡»æ–¹é˜Ÿä¼å†…çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param eff æ”»å‡»å¼ºåº¦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="n">PLAYER&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">eff&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ä¿é™©æªæ–½ï¼Œå¦‚æœå·²ç»å€’ä¸‹å°±ä¸ç”¨è€ƒè™‘äº†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">dmg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">def&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">def_boost&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team_fr&lt;/span>&lt;span class="p">]);&lt;/span> &lt;span class="c1">// è®¡ç®—æ”»å‡»äº§ç”Ÿæ‰£è¡€çš„æœ‰æ•ˆå€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">hp&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="n">dmg&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æ‰£è¡€
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¦‚æœæ‰£è¡€åè§’è‰²ç”Ÿå‘½å€¼ä¸é«˜äº 0ï¼Œåˆ™è¯¥è§’è‰²å€’ä¸‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è®¾å®šè§’è‰²çŠ¶æ€ä¸ºå€’ä¸‹
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">reapply_passive_skills&lt;/span>&lt;span class="p">();&lt;/span> &lt;span class="c1">// é‡æ–°è€ƒè™‘è¢«åŠ¨æŠ€èƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s %d took %d damage from %s %d -&amp;gt; %d/%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">team_fr&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">team_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dmg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">hp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">max_hp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @brief DoTï¼Œå³ Damage over Timeï¼Œå¤„ç†å½“å‰è§’è‰²å—åˆ°çš„ Average ç±»å‹çš„æŒç»­ä¼¤å®³
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="n">PLAYER&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// ä¿é™©æªæ–½ï¼Œå¦‚æœå·²ç»å€’ä¸‹å°±ä¸ç”¨è€ƒè™‘äº†
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">dot_rounds&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="c1">// å¦‚æœæŒç»­ä¼¤å®³å±‚æ•°ä¸ä¸º 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">dot_rounds&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">hp&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="n">dot_dmg&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆ™è§¦å‘ä¸€æ¬¡æŒç»­ä¼¤å®³å¹¶å‡ä¸€å±‚å±‚æ•°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// åŒä¸Š
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">hp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">status&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">reapply_passive_skills&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s %d took %d damage from skill -&amp;gt; %d/%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">team_fr&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">team_id&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dot_dmg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">hp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">max_hp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @brief è®¡ç®—æ¯ä¸€å›åˆæ”»å‡»æ–¹é˜Ÿä¼çš„æ”»å‡»è€…
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t æ”»å‡»æ–¹é˜Ÿä¼çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="nf">get_attacker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">do&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">++&lt;/span>&lt;span class="n">attacker&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">attacker&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="n">attacker&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">attacker&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]].&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// å¦‚æœæ‰¾åˆ°æœªå€’ä¸‹çš„è§’è‰²å°±è·³å‡ºå¾ªç¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// ç”±äºé¢˜ç›®ä¿è¯æ‰€æœ‰æ“ä½œåˆæ³•ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒæ­»å¾ªç¯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @brief è§¦å‘ä¸»åŠ¨æŠ€èƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param act é‡Šæ”¾æŠ€èƒ½è€…åœ¨é‡Šæ”¾æŠ€èƒ½æ–¹é˜Ÿä¼å†…çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param trg è¢«é‡Šæ”¾æŠ€èƒ½è€…åœ¨è¢«é‡Šæ”¾æŠ€èƒ½æ–¹é˜Ÿä¼å†…çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t_a é‡Šæ”¾æŠ€èƒ½æ–¹é˜Ÿä¼çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t_b è¢«é‡Šæ”¾æŠ€èƒ½é˜Ÿä¼çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="nf">activate_active_skill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">t_b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è·å–æŠ€èƒ½ç±»å‹åä»¥ä¾¿è¾“å‡º
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">str&lt;/span> &lt;span class="n">skl_type&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">skl_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Weak&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">skl_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Average&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">skl_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s">&amp;#34;Strong&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s %d applied %s skill to %s %d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">skl_type&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">c_str&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">t_b&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯¹äº Weak ç±»å‹çš„ä¸»åŠ¨æŠ€èƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">tmp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">heal&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ACT_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">act_skl&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è®¡ç®—å›å¤é‡
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">heal&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// å›å¤
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¦‚æœå›å¤åè¶…è¿‡ç”Ÿå‘½ä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// åˆ™å°†ç”Ÿå‘½å€¼æ”¹ä¸ºä¸Šé™
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">tmp&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// å¦‚æœç”Ÿå‘½å€¼æœ‰æ‰€å˜åŠ¨ï¼Œå°±éœ€è¦è¾“å‡º
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s %d recovered +%d hp -&amp;gt; %d/%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">(&lt;/span>&lt;span class="n">t_b&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">heal&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯¹äº Average ç±»å‹çš„ä¸»åŠ¨æŠ€èƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">dot_rounds&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è®¾æŒç»­ä¼¤å®³æŒç»­ 3 å±‚
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">dot_dmg&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ACT_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">act_skl&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è®¡ç®—æŒç»­ä¼¤å®³å¤§å°
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯¹äº Strong ç±»å‹çš„ä¸»åŠ¨æŠ€èƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">skl_boost&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ACT_SKL_MUL&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">act_skl&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="c1">// æ›´æ”¹è§’è‰²çš„æŠ€èƒ½åŠ æˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @brief å®æ–½æ™®é€šæ”»å‡»å’Œç‰¹æ®Šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param atk_p æ”»å‡»ä½ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param ddg_p èº²é—ªä½ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param act æ”»å‡»è€…åœ¨æ”»å‡»æ–¹é˜Ÿä¼å†…çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param trg é˜²å¾¡è€…åœ¨é˜²å¾¡æ–¹é˜Ÿä¼å†…çš„ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t_a æ”»å‡»æ–¹é˜Ÿä¼ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param t_b é˜²å¾¡æ–¹é˜Ÿä¼ç¼–å·
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// @param type æ”»å‡»ç±»å‹ï¼Œ-1 ä¸ºæ™®é€šæ”»å‡»ï¼Œ0~2 ä¸ºå¯¹åº”çš„ç‰¹æ®Šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="nf">perform_attack&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">ddg_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">t_b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç”±äº G å’Œ M ç±»å‹çš„ç§æ—åŠ æˆå¯¹ä¸åŒç›®æ ‡æœ‰ä¸åŒçš„å–å€¼ï¼Œæ‰€ä»¥é¢„å¤„ç†æ—¶ä¸åŒ…å«ç§æ—åŠ æˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f64&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">atk&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">weapon_atk&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">skl_boost&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">atk_boost&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LOC_BOOST&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="n">atk_p&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">ddg_p&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ™®é€šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// B å‹ç‰¹æ®Šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">1.25&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// é¢„å¤„ç† G å’Œ M ç±»å‹ç‰¹æ®Š AoE æ”»å‡»çš„èŒƒå›´
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">trg_l&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trg_r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¥¿è¾¹ç¬¬ä¸€ä¸ªæœªå€’ä¸‹çš„è§’è‰²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">INIT_INDEX&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]].&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trg_l&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ä¸œè¾¹ç¬¬ä¸€ä¸ªæœªå€’ä¸‹çš„è§’è‰²
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">INIT_INDEX&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]].&lt;/span>&lt;span class="n">status&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">trg_r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// G å‹ç‰¹æ®Šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">cand_cnt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trg_l&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trg_r&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f64&lt;/span> &lt;span class="n">mul&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">1.35&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">cand_cnt&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mul&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trg_l&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_l&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mul&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_l&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trg_r&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_r&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mul&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_r&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// M å‹ç‰¹æ®Šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">1.15&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trg_l&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_l&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.23&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_l&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">trg_r&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_r&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">deal_damage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">act&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">0.23&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">eff&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">TYPE_BOOST&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">act&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">trg_r&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d %d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¾“å…¥å—é˜Ÿé˜Ÿå‘˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">input&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">team_fr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">team_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è¾“å…¥åŒ—é˜Ÿé˜Ÿå‘˜
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">input&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">team_fr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">team_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">round_cnt&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">RND&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">RND&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">round_cnt&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">RND&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">t_a&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">RND&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">^&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// è®¡ç®—æ”»å‡»æ–¹é˜Ÿä¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">t_b&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">RND&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="c1">// è®¡ç®—é˜²å¾¡æ–¹é˜Ÿä¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯¹æ”»å‡»æ–¹é˜Ÿä¼æ–½æ”¾ Weak ç±»å‹è¢«åŠ¨æŠ€èƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">reapply_passive_skills&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// è·å–æ”»å‡»æ–¹é˜Ÿä¼çš„å½“å‰æ”»å‡»è€…
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">get_attacker&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">active&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">attacker&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">char&lt;/span> &lt;span class="n">action_type&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s target=%d &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">action_type&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">trg&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ–½æ”¾æ™®é€šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">action_type&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;Basicattack&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ddg_p&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;atkpos=%d ddgpos=%d &lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">ddg_p&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">perform_attack&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ddg_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">active&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t_b&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">skl_boost&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æ–½æ”¾æ”»å‡»ä¹‹åé‡ç½®æŠ€èƒ½åŠ æˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ–½æ”¾ç‰¹æ®Šæ”»å‡»
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">action_type&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;Specialattack&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ddg_p&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;atkpos=%d ddgpos=%d &lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">ddg_p&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">perform_attack&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">atk_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ddg_p&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">active&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t_b&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">weapon_type&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">skl_boost&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="c1">// æ–½æ”¾æ”»å‡»ä¹‹åé‡ç½®æŠ€èƒ½åŠ æˆ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// æ–½æ”¾ä¸»åŠ¨æŠ€èƒ½
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">action_type&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;Skill&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// åªæœ‰ Average ç±»å‹çš„ä¸»åŠ¨æŠ€èƒ½æ˜¯å¯¹æ•Œæ–¹çš„
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">activate_active_skill&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">trg&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_a&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">active&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="nl">t_b&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">t_a&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å¯¹é˜²å®ˆæ–¹é˜Ÿä¼ä¸­æ‰€æœ‰æ”¶åˆ°æŒç»­ä¼¤å®³çš„é˜Ÿå‘˜ç»“ç®—æŒç»­ä¼¤å®³ï¼ˆåŒé˜Ÿæ–½æ”¾çš„æŒç»­ä¼¤å®³åªåœ¨åŒé˜Ÿä¸ºæ”»å‡»æ–¹çš„å›åˆå†…ç”Ÿæ•ˆï¼‰
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t_b&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">DOT&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// å…ˆè¾“å‡ºåŒ—é˜Ÿï¼Œå†è¾“å‡ºå—é˜Ÿ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%s: &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="s">&amp;#34;North&amp;#34;&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="s">&amp;#34;South&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1">// å¦‚æœé˜Ÿä¼ä¸è¶³ 6 äººå°±ä¸è¾“å‡ºå¯¹åº”ä½ç½®çš„ç”Ÿå‘½å€¼
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d/%d &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">PLACE&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]].&lt;/span>&lt;span class="n">max_hp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">putchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;\n&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">putchar&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sc">&amp;#39;\n&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ç»Ÿè®¡æ˜¯å¦æœ‰é˜Ÿä¼è·èƒœ
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">alive_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">member_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">status&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">team&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">hp&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">++&lt;/span>&lt;span class="n">alive_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">alive_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">puts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Team North won.&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">alive_cnt&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">puts&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Team South won.&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fflush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/details>
&lt;h2 id="tips">Tips
&lt;/h2>&lt;p>å†™è¿™é“é¢˜è®©æˆ‘è·å¾—äº†è®¸å¤šå†™æ¨¡æ‹Ÿçš„å¿ƒå¾—ï¼Œä¸‹é¢ç®€å•è¯´å‡ æ¡æˆ‘è§‰å¾—æ¯”è¾ƒé‡è¦çš„ã€‚&lt;/p>
&lt;ul>
&lt;li>å¯¹äºçº¯æ¨¡æ‹Ÿé¢˜ï¼Œä¸€å®šè¦ä¿è¯å…³é”®ä¿¡æ¯çš„å¯è·å–æ€§ã€‚ç®€å•æ¥è¯´ï¼Œåœ¨ä»»ä½•ç¯å¢ƒä¸‹ï¼Œä½ éƒ½ä¸€å®šè¦ä¿ç•™è‡³å°‘ä¸€ç§æŸ¥è¯¢åˆ°ä½ æ‰€éœ€è¦çš„ä¿¡æ¯çš„æ–¹å¼ã€‚å®ƒå†³å®šäº†æˆ‘ä»¬éœ€è¦ç»´æŠ¤ä»€ä¹ˆä¸œè¥¿ã€‚&lt;/li>
&lt;li>ä¿è¯ä»£ç å¯è¯»ã€‚å¹³æ—¶å†™ OI é¢˜é‚£ç§åªæœ‰ä¸€ä¸ªå­—æ¯çš„å˜é‡åå°½é‡å°‘å‡ºç°ï¼Œå¤šå†™æ³¨é‡Šï¼Œè¦è®©è‡ªå·±æ—¶åˆ»æ¸…æ¥šè‡ªå·±åœ¨å†™ä»€ä¹ˆä»£ç ã€å®ç°ä»€ä¹ˆåŠŸèƒ½ï¼Œä¸è¢«å¤§é‡çš„ä¿¡æ¯å†²æ˜å¤´è„‘ã€‚&lt;/li>
&lt;li>å–„ç”¨ Ctrl/Cmd + F æŸ¥æ‰¾ã€‚åƒæœ¬é¢˜è¿™ç§ï¼ŒåŒæ ·ä¸€ç§å±æ€§å¯èƒ½åœ¨å¾ˆå¤šåœ°æ–¹è¢«å½±å“æˆ–è€…å½±å“å…¶ä»–æ•°å€¼çš„æƒ…å†µï¼Œæœ€å¥½ç”¨æµè§ˆå™¨æˆ– PDF é˜…è¯»å™¨çš„æŸ¥æ‰¾åŠŸèƒ½æ‰¾åˆ°æŸä¸€ä¸ªå±æ€§åœ¨é¢˜ç›®è¡¨è¿°ä¸­æ‰€æœ‰å‡ºç°çš„åœ°æ–¹ï¼Œç¡®ä¿è‡ªå·±è€ƒè™‘å‘¨å…¨äº†ã€‚&lt;/li>
&lt;/ul>
&lt;h2 id="epilogue">Epilogue
&lt;/h2>&lt;p>æ„Ÿè°¢ä½ çœ‹åˆ°è¿™é‡Œã€‚è¿™ä»½ä»£ç æˆ–è®¸ä¸æ˜¯æœ€ä¸ºç®€æ´ã€æœ€æœ‰æ•ˆç‡çš„ä¸€ä»½ä»£ç ï¼Œä½†æˆ‘ä¾ç„¶å¸Œæœ›ä½ åœ¨å®Œæˆè¿™é“é¢˜ã€é˜…è¯»è¿™ç¯‡é¢˜è§£çš„è¿‡ç¨‹ä¸­æœ‰æ‰€æ”¶è·ã€‚æ¯•ç«Ÿï¼Œæ­£å¦‚å‡ºé¢˜äººæä¾›çš„çš„å¤§æ ·ä¾‹æˆä¸ºæˆ‘ AC è¿™é“é¢˜çš„é“è·¯ä¸Šä¸€ä»½æœ‰åŠ›çš„æ´åŠ©ä¸€æ ·ï¼Œå†™å‡ºè¿™é“é¢˜ä¹Ÿä¸€å®šæ˜¯æˆ‘ä»¬é”»ç‚¼è‡ªå·±ç¼–ç èƒ½åŠ›å’Œè°ƒè¯•èƒ½åŠ›ã€æœ€ç»ˆæˆä¸ºä¸€åä¼˜ç§€çš„ç¨‹åºå‘˜çš„è·¯é€”ä¸­ä¸€æ¬¡ååˆ†æœ‰ä»·å€¼çš„ç»å†å§ã€‚ä¸ä½ å…±å‹‰ã€‚&lt;/p></description></item><item><title>æ‚é¢˜é€‰è§£ï¼ˆäºŒï¼‰</title><link>https://eoin.blog/p/misc-solutions-2/</link><pubDate>Fri, 10 May 2024 00:00:04 +0800</pubDate><guid>https://eoin.blog/p/misc-solutions-2/</guid><description>&lt;p>æœ¬ç¯‡æ‚é¢˜é€‰è§£åŒ…å«ä¸‰é“é¢˜çš„æ–‡å­—è®²è§£ï¼Œé¢˜ç›®éš¾åº¦ä»ç»¿åˆ°è“ã€‚ä¸»è¦æ¶‰åŠäº†ä¸€äº›åŒºé—´ç±»é—®é¢˜ä¸å€å¢ã€åŒæŒ‡é’ˆç­‰ç®—æ³•çš„ç»“åˆè¿ç”¨ã€‚&lt;/p>
&lt;h2 id="åŒºé—´">åŒºé—´
&lt;/h2>&lt;ul>
&lt;li>å‡ºå¤„ï¼šNOI 2016&lt;/li>
&lt;li>é¢˜é¢ä¸è¯„æµ‹åœ°å€ï¼š&lt;a class="link" href="https://www.luogu.com.cn/problem/P1712" target="_blank" rel="noopener"
>æ´›è°· P1712&lt;/a> &amp;amp; &lt;a class="link" href="https://loj.ac/p/2086" target="_blank" rel="noopener"
>LibreOJ #2086&lt;/a>&lt;/li>
&lt;li>å‚è€ƒé¢˜è§£ï¼š&lt;a class="link" href="https://oi.baoshuo.ren/noi2016-interval/" target="_blank" rel="noopener"
>by å®ç¡•&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>å…ˆä»é¢˜ç›®æœ€æµ…å±‚çš„é—®é¢˜å¼€å§‹åˆ†æã€‚å¦‚ä½•ä»æ‰€æœ‰åˆæ³•æ–¹æ¡ˆä¸­è·å–åˆ°æœ€å°çš„èŠ±è´¹ï¼Ÿæ ¹æ®é¢˜ç›®ä¸­çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°æ‰€é€‰ä¸­çš„åŒºé—´é•¿åº¦æå·®æœ€å°çš„æƒ…å†µï¼Œå¯ä»¥é€šè¿‡åŒæŒ‡é’ˆæ¥ç»´æŠ¤ã€‚&lt;/p>
&lt;p>å°†æ‰€æœ‰åŒºé—´æŒ‰ç…§é•¿åº¦ä»å°åˆ°å¤§æ’åºï¼Œç„¶åä»¥æœ€çŸ­åŒºé—´ä½œä¸ºå·¦å³æŒ‡é’ˆçš„èµ·å§‹ç‚¹å¼€å§‹æšä¸¾ï¼ŒåŒæŒ‡é’ˆç»´æŠ¤çš„æ˜¯å½“å‰è¢«é€‰ä¸­çš„åŒºé—´çš„èŒƒå›´å·¦å³ç•Œä¸‹æ ‡ã€‚æ¯æ¬¡æšä¸¾åˆ°ä¸€ä¸ªåŒºé—´ï¼Œå°†å…¶è®¾ä¸ºé€‰ä¸­çŠ¶æ€ï¼Œå³åœ¨æ•°è½´ä¸Šå°†è¯¥åŒºé—´å†…çš„æ‰€æœ‰ä½ç½®çš„è¦†ç›–å±‚æ•°å åŠ ä¸€å±‚ã€‚å¦‚æœå½“å‰æ•´ä¸ªæ•°è½´ä¸Šå­˜åœ¨ä¸€ä¸ªæ•´æ•° $x$ è¢«è¦†ç›–äº† $m$ æ¬¡ï¼Œé‚£ä¹ˆå°±å·²ç»æœ‰äº†ä¸€ä¸ªå¯è¡Œè§£ï¼ˆå·¦å³æŒ‡é’ˆä¹‹é—´åŒºé—´çš„ä¸ªæ•°ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬åˆ©ç”¨è¯¥å¯è¡Œè§£å°è¯•æ›´æ–°æœ€ä¼˜è§£ï¼Œç„¶ååˆ é™¤ä½äºå·¦æŒ‡é’ˆçš„åŒºé—´ç»™æ•°è½´ä¸Šå åŠ çš„ä¸€å±‚ï¼Œå³ä»¤å…¶è¢«å–æ¶ˆé€‰ä¸­ï¼Œå¹¶å‘å³ç§»åŠ¨å·¦æŒ‡é’ˆï¼Œç›´åˆ°ä¸å­˜åœ¨è¢«è¦†ç›– $m$ æ¬¡çš„æ•°ï¼Œç”±æ­¤å°è¯•ç¼©å°æå·®ã€å–å¾—æ›´ä¼˜ç­”æ¡ˆï¼›å¦‚æœæ•´ä¸ªæ•°è½´ä¸Šä¸å­˜åœ¨ä»»ä½•æ•´æ•°è¢«è¦†ç›–äº† $m$ æ¬¡ï¼Œé‚£ä¹ˆå‘å³ç§»åŠ¨å³æŒ‡é’ˆï¼Œå°è¯•å–å¾—ä¸‹ä¸€ä¸ªå¯è¡Œè§£ã€‚ç”±äºåŒæŒ‡é’ˆç®—æ³•åœ¨æœ‰åºåºåˆ—ä¸Šçš„æ­£ç¡®æ€§ï¼Œä¸€å®šèƒ½æ‰¾åˆ°æ‰€æœ‰åˆæ³•æ–¹æ¡ˆä¸­çš„æœ€ä¼˜è§£ã€‚&lt;/p>
&lt;p>æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬å‘ç°è¿‡ç¨‹ä¸­éœ€è¦å¯¹æ•°è½´ä¸Šå…ƒç´ è¿›è¡ŒåŒºé—´ä¿®æ”¹ã€‚åŒæ—¶ç”±äºæ•°è½´çš„èŒƒå›´åœ¨ $10^9$ çº§åˆ«ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨ç¦»æ•£åŒ–æƒå€¼çº¿æ®µæ ‘çš„æ–¹å¼æ¥ç»´æŠ¤æˆ‘ä»¬éœ€è¦çš„å†…å®¹ã€‚ç¦»æ•£åŒ–ä¸å†èµ˜è¿°ã€‚å¯¹äºçº¿æ®µæ ‘ï¼Œå…·ä½“åœ°ï¼Œæˆ‘ä»¬æ ¹æ®ç¦»æ•£åŒ–åçš„æ•°è½´ä¸Šæ¯ä¸€ä¸ªå•ç‚¹è¢«è¦†ç›–çš„æ¬¡æ•°ï¼Œç»´æŠ¤åŒºé—´å†…è¢«è¦†ç›–æ¬¡æ•°çš„æœ€å¤§å€¼ã€‚å½“æ•´ä¸ªæ•°è½´ä¸Šè¢«è¦†ç›–æ¬¡æ•°æœ€å¤§å€¼è¶…è¿‡æˆ–ç­‰äº $m$ çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ ¹æ®å‰æ–‡æåˆ°çš„æ“ä½œï¼Œåˆ©ç”¨å¯è¡Œè§£æ›´æ–°æœ€ä¼˜è§£ã€‚&lt;/p>
&lt;p>åœ¨ä»£ç å®ç°ä¸Šï¼Œéœ€è¦æ³¨æ„çš„åœ°æ–¹åŒ…æ‹¬ï¼šç”±äºçº¿æ®µæ€»æ•°æœ€å¤§ä¸º $5 \times 10^5$ï¼Œé‚£ä¹ˆç¦»æ•£åŒ–æ•°ç»„éœ€è¦å­˜å‚¨çš„ç«¯ç‚¹æ•°é‡æœ€å¤§å°±ä¼šè¾¾åˆ° $10^6$ï¼Œæ‰€ä»¥çº¿æ®µæ ‘éœ€è¦å¼€ $2 \times 4 n = 8 n$ çš„ç©ºé—´ï¼›ç”±äºåªéœ€è¦å¯¹æ•´ä¸ªæ•°è½´èŒƒå›´ä¸Šè¢«è¦†ç›–æ¬¡æ•°çš„æœ€å¤§å€¼è¿›è¡ŒæŸ¥è¯¢ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦å•ç‹¬å†™ä¸€ä¸ªæŸ¥è¯¢å‡½æ•°ï¼Œç›´æ¥è®¿é—®çº¿æ®µæ ‘çš„æ ¹èŠ‚ç‚¹å³å¯ã€‚&lt;/p>
&lt;details>
&lt;summary>ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ä»£ç &lt;/summary>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;limits&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;vector&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;algorithm&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#define endl &amp;#39;\n&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cin&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">vector&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">PII&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">pair&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MAX_N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">5e5&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">M&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">PII&lt;/span> &lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">disc&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="nc">SegTree&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">struct&lt;/span> &lt;span class="nc">Node&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">tag&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">pushup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">pushdown&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">tag&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">tag&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">tag&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">tag&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">tag&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">tag&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">tag&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">tag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">mid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mid&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mid&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">tag&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pushdown&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">mid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">mid&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">mid&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pushup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">SGT&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sync_with_stdio&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">nullptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">M&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">first&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">second&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">push_back&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">first&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">push_back&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">second&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">auto&lt;/span> &lt;span class="n">cmp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="p">](&lt;/span>&lt;span class="n">PII&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">PII&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">second&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">first&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">second&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">first&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">seg&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">seg&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cmp&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">begin&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">erase&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">unique&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">begin&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="p">()),&lt;/span> &lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">first&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">lower_bound&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">begin&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">first&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">begin&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">second&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">lower_bound&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">begin&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">second&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">begin&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SGT&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">disc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">size&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">numeric_limits&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;::&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">auto&lt;/span> &lt;span class="n">len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="p">](&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">disc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">second&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">disc&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">first&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SGT&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">first&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">second&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">SGT&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">max&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="n">M&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SGT&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">first&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">seg&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">second&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">numeric_limits&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;::&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">ans&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fflush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/details>
&lt;h2 id="opportunity-cost">Opportunity Cost
&lt;/h2>&lt;ul>
&lt;li>å‡ºå¤„ï¼šICPC 2020 World Finals&lt;/li>
&lt;li>å®˜æ–¹é¢˜é¢ï¼š&lt;a class="link" href="https://icpc.global/worldfinals/problems/2020-ICPC-World-Finals/icpc2020.pdf" target="_blank" rel="noopener"
>è‹±è¯­&lt;/a>&lt;/li>
&lt;li>ä¸­æ–‡é¢˜é¢åŠè¯„æµ‹åœ°å€ï¼š&lt;a class="link" href="https://loj.ac/p/6796" target="_blank" rel="noopener"
>LibreOJ #6796&lt;/a> &amp;amp; &lt;a class="link" href="https://www.luogu.com.cn/problem/P8134" target="_blank" rel="noopener"
>æ´›è°· P8134&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>æ ¹æ®é¢˜ç›®æ‰€ç»™çš„å¼å­ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼šå¯¹äºä¸€éƒ¨æ‰‹æœº $\left( x, y, z \right)$ï¼Œè¿™ä¸‰ç§å‚æ•°æœ€ç»ˆè¢«è®¡å…¥è¿™éƒ¨æ‰‹æœºçš„ opportunity costï¼Œåªæœ‰ä¸¤ç§æƒ…å†µã€‚ä¸€åˆ™è¯¥é¡¹å‚æ•°åœ¨æ‰€æœ‰åŒç§å‚æ•°ä¸­æœ€å¤§ï¼Œåˆ™è¯¥å‚æ•°è®¡å…¥å€¼ä¸º $0$ï¼›äºŒåˆ™è¯¥é¡¹å‚æ•°åœ¨æ‰€æœ‰åŒç§å‚æ•°ä¸­å¹¶éæœ€å¤§ï¼Œåˆ™è¯¥å‚æ•°è®¡å…¥å€¼ä¸º $x_i - x$ï¼Œ$y_i - y$ æˆ– $z_i - z$ã€‚ç¬¬ä¸€ç§æƒ…å†µæ˜¾ç„¶æ˜¯æœ€ç†æƒ³çš„ï¼Œä½†å®ƒåŒæ—¶ä¹Ÿå¯¹æˆ‘ä»¬è®¡ç®— opportunity cost æ²¡æœ‰ä»»ä½•è´¡çŒ®ï¼Œæ‰€ä»¥æˆ‘ä»¬åªè€ƒè™‘è¿™ä¸‰é¡¹å‚æ•°å‡ºç°ç¬¬äºŒç§æƒ…å†µæ—¶çš„å¤„ç†æ–¹å¼ã€‚æˆ‘ä»¬å‡è®¾è¯¥æ‰‹æœºçš„ä¸‰ç§å‚æ•°éƒ½å‡ºç°äº†ç¬¬äºŒç§æƒ…å†µï¼Œåˆ™è¿™éƒ¨æ‰‹æœºçš„ opportunity cost ä¸ºï¼š&lt;/p>
&lt;p>$$
\begin{aligned}
f(x, y, z) &amp;amp;= \max_{1 \leqslant i \leqslant n} \left( x_i - x + y_i - y + z_i - z \right) \newline
&amp;amp;= \max_{1 \leqslant i \leqslant n} \left( x_i + y_i + z_i - x - y - z \right) \newline
&amp;amp;= \max_{1 \leqslant i \leqslant n} \left( x_i + y_i + z_i \right) - x - y - z
\end{aligned}
$$&lt;/p>
&lt;p>ç¬¬äºŒè¡Œåˆ°ç¬¬ä¸‰è¡Œçš„è½¬åŒ–æ˜¯å› ä¸º $x, y, z$ å¯¹äºæˆ‘ä»¬å½“å‰æ‰€æ±‚çš„è¿™éƒ¨æ‰‹æœºæ¥è¯´éƒ½æ˜¯å®šå€¼ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç»´æŠ¤çš„å°±åªæœ‰æ±‚æ‰€æœ‰æ‰‹æœºä¸‰ç§å‚æ•°ä¹‹å’Œçš„æœ€å¤§å€¼è¿™ä¸€éƒ¨åˆ†å†…å®¹äº†ã€‚å½“ç„¶ï¼Œä¸Šé¢åˆ—ä¸¾çš„åªæ˜¯å½“ä¸‰ç§å‚æ•°éƒ½å‡ºç°ç¬¬äºŒç§æƒ…å†µçš„æ—¶å€™çš„å¤„ç†æ–¹å¼ã€‚è€Œå¯¹äºç¬¬ä¸€ç§æƒ…å†µï¼Œç”±äºè®¡å…¥å€¼ä¸º $0$ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä»ä¸Šé¢çš„è¡¨è¾¾å¼é‡Œåˆ æ‰å¯¹åº”çš„é¡¹ï¼Œå¹¶ç»´æŠ¤åœ¨åˆ æ‰å¯¹åº”ç§ç±»å‚æ•°çš„æƒ…å†µä¸‹æ‰€æœ‰æ‰‹æœºçš„å‰©ä¸‹çš„å‚æ•°ä¹‹å’Œçš„æœ€å¤§å€¼å³å¯ã€‚ç”±äºè¿™ä¸‰ç§å‚æ•°éƒ½å¯èƒ½ç‹¬ç«‹å‡ºç°ç¬¬ä¸€ç§æƒ…å†µå’Œç¬¬äºŒç§æƒ…å†µï¼Œæ‰€ä»¥æœ€ç»ˆæœ€å¤šä¼šæœ‰ $2^3 = 8$ ç§çŠ¶æ€çš„æœ€å¤§å€¼éœ€è¦ç»´æŠ¤ã€‚æ¯ä¸€ç§çŠ¶æ€ç»´æŠ¤æœ€å¤§å€¼åªéœ€è¦ $\mathcal{O}\left(n\right)$ çš„å¤æ‚åº¦ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥é€šè¿‡æš´åŠ›æšä¸¾è§£å†³ã€‚&lt;/p>
&lt;p>åœ¨é¢„å¤„ç†å®Œæ‰€éœ€çš„æœ€å¤§å€¼åï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ ¹æ®æˆ‘ä»¬æ¨å‡ºçš„å…¬å¼ä»¥åŠæ±‚å¾—çš„æœ€å¤§å€¼ï¼Œå¯¹æ¯ä¸€éƒ¨æ‰‹æœºçš„ opportunity cost è¿›è¡Œè®¡ç®—ã€‚åœ¨ä¸Šé¢çš„æš´åŠ›æšä¸¾è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°ä¸€ç§æƒ…å†µï¼Œå³æŸä¸€æ‰‹æœºçš„æŸç§å‚æ•°å¹¶éåŒç§å‚æ•°ä¸­çš„æœ€å¤§å€¼ï¼Œä½†åœ¨é¢„å¤„ç†æ—¶å´è¢«ç»Ÿè®¡æˆ $0$ çš„æƒ…å†µã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨è®¡ç®—æ—¶ä¹Ÿéœ€è¦æŠŠ $8$ ç§æƒ…å†µå…¨éƒ¨è·‘ä¸€éï¼Œæ±‚è¿™ $8$ ç§æƒ…å†µçš„ä¸‰ç§å‚æ•°è®¡å…¥å€¼ä¹‹å’Œçš„æœ€å¤§å€¼ã€‚åŒæ—¶ï¼Œç”±äºå½“æŸä¸€æ‰‹æœºçš„æŸç§å‚æ•° $p$ ä¸ºåŒç§å‚æ•° $p_i$ ä¸­çš„æœ€å¤§å€¼æ—¶ï¼Œä¸€å®šæœ‰ $\forall 1 \leqslant i \leqslant n,~ p_i - p \leqslant 0$ï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬ç»Ÿè®¡æœ€å¤§å€¼æ—¶ï¼Œå…¶ä¸­ $&amp;lt; 0$ çš„æƒ…å†µä¼šè¢«å…¶ä»–æƒ…å†µä¸­çš„ $0$ è¦†ç›–æ‰ï¼Œæ‰€ä»¥è¿™æ ·åšä¸ä¼šå½±å“ç­”æ¡ˆçš„æ­£ç¡®æ€§ã€‚&lt;/p>
&lt;p>ä»£ç å®ç°ä¸Šï¼Œæ³¨æ„ä¸‰ç§å‚æ•°ä¹‹å’Œæœ€é«˜èƒ½è¾¾åˆ° $3 \times 10^9$ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ &lt;code>unsigned int&lt;/code> æˆ– &lt;code>long long&lt;/code> ç­‰ç±»å‹å­˜å‚¨ã€‚&lt;/p>
&lt;details>
&lt;summary>ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ä»£ç &lt;/summary>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;limits&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#define endl &amp;#39;\n&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cin&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">u32&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">unsigned&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MAX_N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">2e5&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">CASES&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">u32&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">z&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">u32&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">CASES&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">u32&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">CASES&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">u32&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sum&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sum&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sum&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sum&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="n">z&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">max&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">sum&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sync_with_stdio&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">nullptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">u32&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">z&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">prep&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">u32&lt;/span> &lt;span class="n">ans1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">numeric_limits&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">u32&lt;/span>&lt;span class="o">&amp;gt;::&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">ans2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">u32&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cost&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cost&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">u32&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sum&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">CASES&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sum&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sum&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sum&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="n">z&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cost&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">sum&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">cost&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">ans1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">ans1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cost&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ans2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">ans1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="sc">&amp;#39; &amp;#39;&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">ans2&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fflush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/details>
&lt;h2 id="running-away-from-the-barn">Running Away From the Barn
&lt;/h2>&lt;ul>
&lt;li>å‡ºå¤„ï¼šUSACO 2012 December Contest (Gold)&lt;/li>
&lt;li>å®˜æ–¹é¢˜é¢åŠè¯„æµ‹åœ°å€ï¼š&lt;a class="link" href="https://usaco.org/index.php?page=viewproblem2&amp;amp;cpid=213" target="_blank" rel="noopener"
>è‹±è¯­&lt;/a>&lt;/li>
&lt;li>ä¸­æ–‡é¢˜é¢åŠè¯„æµ‹åœ°å€ï¼š&lt;a class="link" href="https://www.luogu.com.cn/problem/P3066" target="_blank" rel="noopener"
>æ´›è°· P3066&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>çœ‹åˆ°æ•°æ®èŒƒå›´ï¼Œå¯ä»¥çœ‹åˆ° $p_i &amp;lt; i$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ$\forall v \in T_u, u &amp;gt; v$ã€‚å› æ­¤ï¼Œæ ‘ä¸Šä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹åˆ°è¾¾å…¶ä»»æ„ä¸€ä¸ªç¥–å…ˆçš„è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„ç¼–å·ä¸€å®šéƒ½æ˜¯å•è°ƒé€’å‡çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å€’åºåœ°ç»´æŠ¤ä¸€ä¸ªå·®åˆ†æ•°ç»„ï¼Œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»¥å…¶ä¸ºèµ·å§‹ç«¯ç‚¹ï¼Œå°†å…¶å‘æ ¹æ–¹å‘ç§»åŠ¨ $T$ çš„è·ç¦»å†…æ‰€èƒ½åˆ°è¾¾æœ€è¿œçš„èŠ‚ç‚¹ä½œä¸ºç»“æŸç«¯ç‚¹ï¼Œåˆ©ç”¨å·®åˆ†å¯¹èµ·å§‹ç«¯ç‚¹åˆ°ç»“æŸç«¯ç‚¹çš„è·¯å¾„ä¸Šæ‰€æœ‰çš„èŠ‚ç‚¹è¢«è¦†ç›–çš„æ¬¡æ•°è¿›è¡ŒåŒºé—´ $+1$ï¼Œå³å¯å¾—åˆ°æ¯ä¸ªèŠ‚ç‚¹æœ€ç»ˆè¢«è¦†ç›–çš„æ€»æ¬¡æ•°ï¼Œå³ä¸ºç­”æ¡ˆã€‚&lt;/p>
&lt;p>è¿™é‡Œçš„å·®åˆ†æ–¹æ³•å’Œæ™®é€šçš„å·®åˆ†ä¸åŒçš„åœ°æ–¹åœ¨äºï¼š&lt;/p>
&lt;ul>
&lt;li>å·®åˆ†ç»´æŠ¤çš„åŒºé—´åœ¨æ•°ç»„ä¸­å¹¶ä¸æ˜¯è¿ç»­çš„ï¼Œæ™®é€šæ•°ç»„ä¸­å…ƒç´ ä¹‹é—´é€šè¿‡å›ºå®šçš„ä¸‹æ ‡ä¹‹å·®æ¥ç»´æŠ¤çš„å·®åˆ†ï¼Œåœ¨æœ¬é¢˜ä¸­éœ€è¦é€šè¿‡æ ‘ä¸ŠèŠ‚ç‚¹ä¹‹é—´çš„äº²å­å…³ç³»æ¥ç»´æŠ¤ï¼›&lt;/li>
&lt;li>æ‰§è¡ŒåŒºé—´ $+1$ æ“ä½œæ—¶ï¼Œå·®åˆ† $+1$ çš„ç‚¹å…¶å®æ˜¯ç¼–å·è¾ƒå¤§çš„èŠ‚ç‚¹ï¼Œ$-1$ çš„ç‚¹åè€Œæ˜¯ç¼–å·è¾ƒå°çš„èŠ‚ç‚¹ã€‚è¿™ä¸€ç‚¹å…¶å®å¾ˆå¥½ç†è§£ã€‚æˆ‘ä»¬å¸Œæœ›ï¼Œè¢«å·®åˆ†ä¿®æ”¹çš„ä½ç½®æ­£å¥½ä»£è¡¨ä»æŸä¸ªèŠ‚ç‚¹åˆ°è¾¾å…¶ç‰¹å®šç¥–å…ˆçš„è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä»å­èŠ‚ç‚¹å‡ºå‘æœæ ¹èŠ‚ç‚¹çš„æ–¹å‘è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœä»ç¥–å…ˆçš„ä½ç½®å¼€å§‹ä¿®æ”¹ï¼Œé‚£ä¹ˆæœ€ç»ˆï¼Œä»¥ç¥–å…ˆä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘é‡Œï¼Œåªæœ‰è·¯å¾„ä¸Šçš„èŠ‚ç‚¹çš„å·®åˆ†æœ€å $-1$ äº†ï¼Œå…¶ä»–ä¸è¿™æ¡è·¯å¾„æ— å…³çš„èŠ‚ç‚¹éƒ½ä¼šè¢«é¢å¤– $+1$ï¼Œå¯¼è‡´æœ€ç»ˆç»“æœé”™è¯¯ã€‚&lt;/li>
&lt;/ul>
&lt;p>ç”±äºæ•°æ®èŒƒå›´ä¸º $2 \times 10^5$ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ ‘ä¸Šå€å¢æ¥ç»´æŠ¤æ¯ä¸ªèŠ‚ç‚¹çš„å„çº§ç¥–å…ˆï¼Œç”±æ­¤åœ¨ $\mathcal{O} \left(\log N\right)$ å¤æ‚åº¦å†…æ‰¾åˆ°æŸ¥åˆ†çš„ä¸¤ä¸ªç«¯ç‚¹ã€‚æ‰€ä»¥è¿™ç§è§£æ³•çš„æ•´ä½“å¤æ‚åº¦ä¸º $\mathcal{O} \left(N \log N\right)$ï¼Œå¯ä»¥é€šè¿‡æœ¬é¢˜ã€‚&lt;/p>
&lt;details>
&lt;summary>ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ä»£ç &lt;/summary>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#define endl &amp;#39;\n&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cin&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">i64&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">long&lt;/span> &lt;span class="kt">long&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MAX_N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">2e5&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">i64&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sync_with_stdio&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">nullptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">d&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i64&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">p&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]]&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">u&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">++&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">d&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">++&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fflush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/details></description></item><item><title>æ‚é¢˜é€‰è§£ï¼ˆä¸€ï¼‰</title><link>https://eoin.blog/p/misc-solutions-1/</link><pubDate>Fri, 10 May 2024 00:00:03 +0800</pubDate><guid>https://eoin.blog/p/misc-solutions-1/</guid><description>&lt;p>æœ¬ç¯‡æ‚é¢˜é€‰è§£åŒ…å«å››é“é¢˜çš„æ–‡å­—è®²è§£ï¼Œé¢˜ç›®éš¾åº¦ä»ç»¿åˆ°ç´«ã€‚ä¸»è¦æ¶‰åŠäº†åˆ†æ²»æ€æƒ³ç»“åˆæ•°æ®ç»“æ„çš„åº”ç”¨ï¼Œä¹Ÿæ¶‰åŠåˆ°ä¸€äº›å›¾è®ºæ–¹é¢çš„é—®é¢˜ã€‚&lt;/p>
&lt;h2 id="foehn-phenomena">Foehn Phenomena
&lt;/h2>&lt;ul>
&lt;li>å‡ºå¤„ï¼šJOI 2017 Final&lt;/li>
&lt;li>å®˜æ–¹é¢˜é¢ï¼š&lt;a class="link" href="https://www2.ioi-jp.org/joi/2016/2017-ho/2017-ho.pdf" target="_blank" rel="noopener"
>æ—¥è¯­&lt;/a> &amp;amp; &lt;a class="link" href="https://www2.ioi-jp.org/joi/2016/2017-ho/2017-ho-en.pdf" target="_blank" rel="noopener"
>è‹±è¯­&lt;/a>&lt;/li>
&lt;li>è¯„æµ‹åœ°å€ï¼š&lt;a class="link" href="https://atcoder.jp/contests/joi2017ho/tasks/joi2017ho_a" target="_blank" rel="noopener"
>AtCoder&lt;/a> &amp;amp; &lt;a class="link" href="https://loj.ac/p/2332" target="_blank" rel="noopener"
>LibreOJ #2332&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ç”±äºé¢˜ç›®çš„è®¾ç½®ä¸åºåˆ—ä¸­ç›¸é‚»ä¸¤ä¸ªå…ƒç´ ä¹‹é—´çš„å·®å€¼æœ‰å…³ï¼Œå¹¶ä¸”ä¹‹åç»™å‡ºçš„æ¯ä¸€æ¬¡æ“ä½œéƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡åŒºé—´åŠ ï¼Œå°±å¾ˆå®¹æ˜“æƒ³åˆ°é€šè¿‡å·®åˆ†ç»´æŠ¤ã€‚è€ƒè™‘åˆ°æ¯æ¬¡ä¿®æ”¹éƒ½æ˜¯å¯¹åŒºé—´çš„æµ·æ‹”è¿›è¡Œæ•´ä½“å‡é«˜æˆ–é™ä½ï¼Œæ•…æ¯æ¬¡ä¿®æ”¹å¯¹å·®åˆ†æ•°ç»„çš„å½±å“åªä¼šä½“ç°åœ¨å·¦å³ä¸¤ä¸ªç«¯ç‚¹ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡ä¿®æ”¹æŸä¸ªåŒºé—´çš„æµ·æ‹”æ—¶ï¼Œç”±äºåŒºé—´å†…éƒ¨çš„ç›¸å¯¹åœ°å½¢ä¸å˜ï¼Œæ‰€ä»¥åŒºé—´å†…éƒ¨å¯¹æµ·é£æ¸©åº¦äº§ç”Ÿå½±å“çš„å¤§å°ä¹Ÿæ˜¯ä¸å˜çš„ï¼Œå› è€Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®ä¸¤ä¸ªç«¯ç‚¹å¤„çš„å·®å€¼å¯¹ç­”æ¡ˆè¿›è¡Œä¿®æ”¹å³å¯ã€‚&lt;/p>
&lt;p>å…·ä½“åœ°ï¼Œæˆ‘ä»¬å…ˆç¡®å®šåˆå§‹æƒ…å†µä¸‹å„ç›¸é‚»ä¸¤ä¸ªå…ƒç´ ä¹‹é—´çš„å·®å€¼ï¼Œå¹¶ä¸”ä¾æ­¤ç»´æŠ¤æµ·é£åˆ°è¾¾ $N$ æ—¶æœ€ç»ˆçš„æ¸©åº¦ï¼Œç„¶åå†æ ¹æ®æ¯æ¬¡ä¿®æ”¹çš„å·¦å³ç«¯ç‚¹è¿›è¡Œæ“ä½œã€‚å¯¹äºä¸¤ä¸ªç«¯ç‚¹ï¼Œæˆ‘ä»¬å…ˆå‡å»æ ¹æ®æ­¤å‰çš„å·®å€¼ç¡®å®šçš„é£çš„æ¸©åº¦ï¼Œç„¶åå°†ä¿®æ”¹å€¼æ›´æ–°åˆ°è¯¥ä½ç½®å¯¹åº”çš„å·®åˆ†æ•°ç»„ä¸Šï¼Œæœ€åæ ¹æ®æ–°çš„å·®å€¼é‡æ–°è®¡ç®—é£çš„æ¸©åº¦ã€‚&lt;/p>
&lt;p>åœ¨ä»£ç å®ç°ä¸Šæœ‰ä¸¤ä¸ªå°ç»†èŠ‚ï¼š&lt;/p>
&lt;ul>
&lt;li>å¦‚æœæµ·æ‹”ä»ä½åˆ°é«˜ï¼Œé‚£ä¹ˆæ¸©åº¦ä¸‹é™ï¼Œæ­¤æ—¶çš„å·®å€¼ä¸ºæ­£æ•°ï¼Œä½†å¯¹å·®åˆ†æ•°ç»„çš„å¢é‡åº”è¯¥æ˜¯ä¸€ä¸ªè´Ÿæ•°ï¼Œä¹Ÿå°±æ˜¯å·®å€¼ä¸ $S$ çš„ç§¯çš„ç›¸åæ•°ï¼›å¦‚æœæµ·æ‹”ä»é«˜åˆ°ä½ï¼Œé‚£ä¹ˆæ¸©åº¦ä¸Šå‡ï¼Œæ­¤æ—¶çš„å·®å€¼ä¸ºè´Ÿæ•°ï¼Œä½†å¯¹å·®åˆ†æ•°ç»„çš„å¢é‡åº”è¯¥æ˜¯ä¸€ä¸ªæ­£æ•°ï¼Œä¹Ÿå°±æ˜¯å·®å€¼ä¸ $T$ çš„ç§¯çš„ç›¸åæ•°ï¼›&lt;/li>
&lt;li>å¦‚æœä¿®æ”¹çš„å³ç«¯ç‚¹æ˜¯ $N$ï¼Œé‚£ä¹ˆå³ç«¯ç‚¹å¤„çš„å·®åˆ†ä»¥åŠç­”æ¡ˆå°±ä¸éœ€è¦æ›´æ–°äº†ï¼Œå› ä¸ºæ­¤æ—¶å³ç«¯ç‚¹çš„ä¿®æ”¹å½±å“ä¸åˆ°ä»»ä½•å·®å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;details>
&lt;summary>ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ä»£ç &lt;/summary>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#define endl &amp;#39;\n&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cin&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">i64&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">long&lt;/span> &lt;span class="kt">long&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MAX_N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">2e5&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Q&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">S&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">i64&lt;/span> &lt;span class="n">delta&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">i64&lt;/span> &lt;span class="nf">alter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i64&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">delta&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delta&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">S&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delta&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sync_with_stdio&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">nullptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i64&lt;/span> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">Q&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">S&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">T&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">last&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">curr&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">curr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">delta&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">curr&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">last&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">alter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">last&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">curr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Q&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">R&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">X&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">L&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">R&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">X&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="n">alter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">delta&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">X&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">alter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">R&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="n">alter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">R&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">delta&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">R&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="n">X&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">alter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">R&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">ans&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fflush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/details>
&lt;h2 id="æš‘å‡æ—¶åœ¨åšä»€ä¹ˆæœ‰æ²¡æœ‰ç©ºå¯ä»¥æ¥å­¦ç‰©ç†å—">æš‘å‡æ—¶åœ¨åšä»€ä¹ˆï¼Ÿæœ‰æ²¡æœ‰ç©ºï¼Ÿå¯ä»¥æ¥å­¦ç‰©ç†å—ï¼Ÿ
&lt;/h2>&lt;ul>
&lt;li>å‡ºå¤„ï¼šLibreOJ&lt;/li>
&lt;li>å®˜æ–¹é¢˜é¢åŠè¯„æµ‹åœ°å€ï¼š&lt;a class="link" href="https://loj.ac/p/6490" target="_blank" rel="noopener"
>LibreOJ #6490&lt;/a>&lt;/li>
&lt;li>å‚è€ƒé¢˜è§£ï¼š&lt;a class="link" href="https://www.cnblogs.com/663B/p/16653601.html" target="_blank" rel="noopener"
>by ImALAS&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>è¿™é“é¢˜çš„æœ´ç´ åšæ³•å…¶å®éå¸¸å¥½æƒ³ã€‚å¯¹äºæ¯ä¸€ä¸ª $a_i$ï¼Œæš´åŠ›æšä¸¾åŒºé—´é•¿åº¦ï¼Œç„¶åæšä¸¾åŒºé—´ç«¯ç‚¹ï¼Œæ±‚åŒºé—´å’Œï¼Œå–æœ€å¤§å€¼å³å¯ã€‚å¦‚æœåŠ ä¸Šä¸€ä¸ªå‰ç¼€å’Œä¼˜åŒ–ï¼Œé‚£ä¹ˆæœ´ç´ åšæ³•çš„å¤æ‚åº¦å°†è¾¾åˆ° $\mathcal{O} \left( n ^ 3 \right)$ã€‚&lt;/p>
&lt;p>è€ƒè™‘å¦‚ä½•ä¼˜åŒ–ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºä¸€æ®µå­åŒºé—´ $\left[ L, R \right]$ï¼Œå®ƒçš„åŒºé—´å’Œå¯ä»¥é€šè¿‡å‰ç¼€å’Œå¾—åˆ°ï¼Œå³ $\sum _ {i = L} ^ {R} = \text{pre} _ R - \text{pre} _ {L - 1}$ã€‚åœ¨æœ¬é¢˜ä¸­ï¼Œå½“ $L, R$ å¹¶éç¡®å®šå€¼ï¼Œè€Œæ˜¯å„è‡ªåœ¨ä¸€ä¸ªç¡®å®šçš„å–å€¼èŒƒå›´å†…æµ®åŠ¨çš„æ—¶å€™ï¼Œæƒ³è¦æ‰¾åˆ°æœ€å¤§çš„å­åŒºé—´å’Œï¼Œå°±éœ€è¦æ‰¾åˆ°æœ€å°çš„ $\text{pre} _ {L - 1}$ ä»¥åŠæœ€å¤§çš„ $\text{pre} _ R$ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨æ•°æ®ç»“æ„ç»´æŠ¤åŒºé—´æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œè€Œæ‰€éœ€è¦ç»´æŠ¤çš„åºåˆ—ä¾¿æ˜¯å‰ç¼€å’Œæ•°ç»„ã€‚æœ¬é¢˜ç”±äºæ—¶é™åªæœ‰ 400 æ¯«ç§’ã€æ²¡æœ‰å¯¹æ•°ç»„å…ƒç´ çš„ä¿®æ”¹å¹¶ä¸”åŒ…å«å¾ˆå¤šçš„æŸ¥è¯¢æ“ä½œï¼Œæ‰€ä»¥ä½¿ç”¨ ST è¡¨æ¥ç»´æŠ¤ã€‚&lt;/p>
&lt;p>ä¸è¿‡ï¼Œè¿™åªæ˜¯æŠŠå¯¹å•ä¸ª $a_i$ æ±‚ç­”æ¡ˆçš„é—®é¢˜è§£å†³äº†ï¼Œå¤æ‚åº¦è¿˜ä¸è¶³ä»¥æ‹¿æ»¡åˆ†ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦æƒ³æƒ³å¦‚ä½•ä¸€æ¬¡æ€§æ±‚å‡ºå¯¹äºæ‰€æœ‰å…ƒç´ çš„ç­”æ¡ˆã€‚è€ƒè™‘åˆ†æ²»ã€‚å¯¹äºæ¯ä¸€å±‚çš„é—®é¢˜è§„æ¨¡ï¼Œæˆ‘ä»¬å…ˆé€’å½’æ±‚å‡ºåªè€ƒè™‘å·¦åŠè¾¹æ—¶ï¼Œå·¦åŠè¾¹å…ƒç´ çš„æœ€ä¼˜ç­”æ¡ˆï¼Œä»¥åŠåªè€ƒè™‘å³åŠè¾¹æ—¶å³åŠè¾¹å…ƒç´ çš„æœ€ä¼˜ç­”æ¡ˆï¼Œç„¶åè€ƒè™‘å·¦å³ä¸¤è¾¹åˆå¹¶æ—¶å¯¹è§„æ¨¡å†…çš„æ‰€æœ‰å…ƒç´ çš„ç­”æ¡ˆé€ æˆçš„å½±å“ã€‚&lt;/p>
&lt;p>å…·ä½“æ¥è¯´ï¼Œåœ¨åˆå¹¶è€ƒè™‘å·¦å³ä¸¤è¾¹çš„å½±å“æ—¶ï¼Œä»¥å·¦åŠè¾¹ä¸ºä¾‹ï¼Œæˆ‘ä»¬å…ˆé¡ºåºéå†ä¸€éå·¦åŠè¾¹ $\left[ l, \text{mid} \right]$ çš„æ‰€æœ‰ä¸‹æ ‡ $i$ï¼Œç”¨ä¸€ä¸ª $p$ å˜é‡å­˜å‚¨æœ€ä¼˜ç­”æ¡ˆï¼Œæ¯æ¬¡æŸ¥è¯¢ç”¨ ST è¡¨æŸ¥è¯¢&lt;/p>
&lt;p>$$
\left( \max\left\lbrace i + l - 1, \text{mid} + 1\right\rbrace , \min\left\lbrace i + r - 1, R\right\rbrace \right)
$$&lt;/p>
&lt;p>åŒºé—´å†…çš„æœ€å¤§å‰ç¼€å’Œ $\text{pre} _ {\max}$ï¼ˆå…¶ä¸­ $l, r$ ä¸ºåŒºé—´é•¿åº¦çš„å–å€¼èŒƒå›´ï¼Œ$R$ ä¸ºé—®é¢˜è§„æ¨¡çš„ä¸Šç•Œï¼Œ$\text{mid}$ ä¸ºé—®é¢˜è§„æ¨¡çš„ä¸­ç‚¹ï¼‰ï¼Œç„¶åæ›´æ–° $p = \max\left\lbrace p, \text{pre}_{\max}\right\rbrace$ï¼Œ$f_i = \max\left\lbrace f_i, p\right\rbrace$ã€‚ä»¥ä¸Šæ˜¯åˆå¹¶æ—¶è€ƒè™‘å·¦åŠè¾¹çš„è¿‡ç¨‹ã€‚å¯¹äºå³åŠè¾¹ï¼Œéœ€è¦å€’åºéå†å¹¶ä½¿ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œç»´æŠ¤ï¼Œå–å¾—æœ€ä¼˜ç­”æ¡ˆã€‚&lt;/p>
&lt;p>è¿˜æ˜¯ä»¥å·¦åŠè¾¹ä¸ºä¾‹ï¼Œè¿™æ ·åšçš„æ­£ç¡®æ€§åœ¨äºï¼š&lt;/p>
&lt;ul>
&lt;li>$p$ çš„èŒƒå›´ä¸€å®šä¼šè¦†ç›–å½“å‰éå†åˆ°çš„ä½ç½®ï¼Œå› ä¸ºæŸ¥è¯¢åŒºé—´çš„èµ·ç‚¹åœ¨å³åŠè¾¹ï¼Œæ‰€ä»¥æ— è®ºå¦‚ä½•æŸ¥è¯¢ï¼Œæœ€ç»ˆç»“æœä¸€å®šè¦†ç›–äº†å½“å‰ä½ç½®ç›´åˆ°å·¦åŠè¾¹çš„å³ç«¯ç‚¹åœ¨å†…çš„æ‰€æœ‰ä¸‹æ ‡ã€‚&lt;/li>
&lt;li>å¦‚æœå·¦è¾¹çš„æŸä¸ªå…ƒç´ åœ¨è§„æ¨¡æ‰©å±•åˆ°å³è¾¹ç•Œåç­”æ¡ˆå¹¶ä¸ä¼˜äºæ­¤å‰åœ¨åˆ†æ²»å·¦åŠè¾¹è¿‡ç¨‹ä¸­ç¡®å®šçš„ç­”æ¡ˆï¼Œé‚£ä¹ˆ $f_i$ ä¸ä¼šè¢«æ›´æ–°ï¼›å¦‚æœæ‰©å±•ä¹‹åç­”æ¡ˆæ›´ä¼˜ï¼Œé‚£ä¹ˆ $f_i$ ä¼šè¢«æ›´æ–°ä¸ºæ›´ä¼˜çš„ç­”æ¡ˆã€‚&lt;/li>
&lt;/ul>
&lt;p>ä»£ç å®ç°ä¸Šï¼Œéœ€è¦å…³æ³¨çš„åœ°æ–¹æœ‰ï¼š&lt;/p>
&lt;ul>
&lt;li>è®°å¾—å¼€ &lt;code>long long&lt;/code>ï¼›&lt;/li>
&lt;li>æ ¹æ®ä»¥ä¸Šæ–¹æ³•ä½¿ç”¨ ST è¡¨è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œä»¥å·¦åŠè¾¹ä¸ºä¾‹ï¼Œå½“å·¦è¾¹ç•Œå– $\text{mid} + 1$ ä¸”å³è¾¹ç•Œå– $i + r - 1$ çš„æ—¶å€™ï¼Œå¯èƒ½å‡ºç°å·¦è¾¹ç•Œå¤§äºå³è¾¹ç•Œçš„æƒ…å†µã€‚è¿™ç§æƒ…å†µè¡¨ç¤ºåŒºé—´é•¿åº¦å–ä¸åˆ°å³åŠè¾¹é‡Œï¼Œæ•…è¿”å›æå€¼æ¥é¿å…ç»Ÿè®¡è¿™ç§æƒ…å†µã€‚&lt;/li>
&lt;/ul>
&lt;details>
&lt;summary>ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ä»£ç &lt;/summary>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;span class="lnt">94
&lt;/span>&lt;span class="lnt">95
&lt;/span>&lt;span class="lnt">96
&lt;/span>&lt;span class="lnt">97
&lt;/span>&lt;span class="lnt">98
&lt;/span>&lt;span class="lnt">99
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;climits&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;cstring&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#define endl &amp;#39;\n&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="k">namespace&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">i64&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">long&lt;/span> &lt;span class="kt">long&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">1e5&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">M&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="nc">SparseTable&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i64&lt;/span> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i64&lt;/span> &lt;span class="n">mn&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="nf">log2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">exp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">exp&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">exp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">i64&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mn&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">))][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mn&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mn&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">mn&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">))][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i64&lt;/span> &lt;span class="nf">query_max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">INT_MIN&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">log2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i64&lt;/span> &lt;span class="nf">query_min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">INT_MAX&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">log2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mn&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">mn&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">R&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">i64&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">SparseTable&lt;/span> &lt;span class="n">ST&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">solve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">L&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">i64&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">mid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">solve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mid&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">solve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mid&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i64&lt;/span> &lt;span class="n">pre&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">LLONG_MIN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">suf&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">LLONG_MIN&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">mid&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">L&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mid&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">R&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pre&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pre&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ST&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">query_max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">pre&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">mid&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">R&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">L&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mid&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">suf&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">suf&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">ST&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">query_min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">suf&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sync_with_stdio&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">nullptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">L&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">R&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">LLONG_MIN&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ST&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">solve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="sc">&amp;#39; &amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fflush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/details>
&lt;h2 id="water-bottle">Water Bottle
&lt;/h2>&lt;ul>
&lt;li>å‡ºå¤„ï¼šJOISC 2014 Day 2&lt;/li>
&lt;li>å®˜æ–¹é¢˜é¢ï¼š&lt;a class="link" href="https://www.ioi-jp.org/camp/2014/2014-sp-tasks/2014-sp-d2.pdf" target="_blank" rel="noopener"
>æ—¥è¯­&lt;/a>&lt;/li>
&lt;li>è¯„æµ‹åœ°å€ï¼š&lt;a class="link" href="https://atcoder.jp/contests/joisc2014/tasks/joisc2014_e" target="_blank" rel="noopener"
>AtCoder&lt;/a> &amp;amp; &lt;a class="link" href="https://loj.ac/p/2876" target="_blank" rel="noopener"
>LibreOJ #2876&lt;/a>&lt;/li>
&lt;li>å‚è€ƒé¢˜è§£ï¼š&lt;a class="link" href="https://www2.ioi-jp.org/camp/2014/2014-sp-tasks/2014-sp-d2-bottle-review.pdf" target="_blank" rel="noopener"
>å…¬å¼è§£è¯´&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>çœ‹åˆ°é¢˜ä¹‹åï¼Œå¾ˆå®¹æ˜“å‘ç°ä¸€ä¸ªè·å–ç­”æ¡ˆçš„æ–¹æ³•ã€‚æˆ‘ä»¬å‡è®¾æ±‚çš„æ˜¯ä»å»ºç­‘ç‰© $A$ åˆ°å»ºç­‘ç‰© $B$ çš„è·¯ä¸Šæ°´ç“¶è‡³å°‘éœ€è¦çš„å®¹é‡ã€‚é‚£ä¹ˆé¦–å…ˆï¼Œæœ€åŸºç¡€åœ°ï¼Œæ°´ç“¶æœ€å¤§éœ€è¦çš„å®¹é‡ä¾¿æ˜¯ä» $A$ ç›´æ¥èµ°åˆ° $B$ é€”ä¸­å®Œå…¨ä¸æ‰“æ°´çš„æƒ…å†µä¸‹ä¸¤ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯é•¿åº¦ $-1$ã€‚é‚£ä¹ˆå¦‚æœå­˜åœ¨ä¸€ç§æ–¹å¼ï¼Œä½¿å¾—å…ˆä» $A$ åˆ°æŸå…¶ä»–å»ºç­‘ç‰© $C$ æ‰“æ°´ï¼Œå†ä» $C$ åˆ° $B$ çš„è¿‡ç¨‹ä»æ‰€éœ€æ°´ç“¶çš„æœ€å¤§å®¹é‡æ¯”ç›´æ¥èµ°æ‰€éœ€è¦çš„æœ€å¤§å®¹é‡è¦å°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è®¤ä¸ºè¿™ç§æ–¹å¼æ›´ä¼˜ã€‚åŒç†ï¼Œåœ¨ä¼˜åŒ–ä¹‹åçš„è·¯çº¿ä¸Šï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–ï¼Œç›´åˆ°æ‰¾åˆ°æœ€ä¼˜è§£ã€‚&lt;/p>
&lt;p>å‰æ–‡ä¸­æˆ‘ä»¬å·²ç»æåˆ°ï¼šä»ä¸€ä¸ªå»ºç­‘ç‰©èµ°åˆ°å¦ä¸€ä¸ªå»ºç­‘ç‰©ä¸Šï¼Œå¦‚æœä¸ç»è¿‡å…¶ä»–å»ºç­‘ç‰©æ‰“æ°´ï¼Œé‚£ä¹ˆé€”ä¸­éœ€è¦æ¶ˆè€—çš„æ°´é‡å°±æ˜¯ä¸¤ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯é•¿åº¦ $-1$ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€ä¼˜è§£çš„è·¯å¾„ä¸€å®šæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªæœ€çŸ­è·¯çš„æ‹¼æ¥ï¼Œå¹¶ä¸”åœ¨è¿™äº›æœ€çŸ­è·¯èƒ½å¤Ÿè¿é€šèµ·ç‚¹å’Œç»ˆç‚¹çš„å‰æä¸‹ï¼Œè¿˜è¦å°½å¯èƒ½è®©è¿™äº›æœ€çŸ­è·¯ä¸­çš„æœ€å¤§å€¼å°½å¯èƒ½å°ã€‚è¿™æ ·è¯´å®¹æ˜“è®©äººæƒ³åˆ°æ±‚æœ€å°ç”Ÿæˆæ ‘ã€‚å®é™…ä¸Šä¸æœ€å°ç”Ÿæˆæ ‘è¿˜æ˜¯æœ‰åŒºåˆ«çš„ï¼Œå› ä¸ºä¸ç”¨è¿é€šæ‰€æœ‰çš„å»ºç­‘ç‰©ã€‚ä½†æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥åœ¨è¿™é“é¢˜ä¸­åº”ç”¨ Kruskal çš„æ€æƒ³ã€‚åŒæ—¶ï¼Œç”±äºç”¨ LCA åœ¨æ ‘ä¸Šæ±‚æœ€å¤§è¾¹æƒçš„å¤æ‚åº¦ $\mathcal{O} \left(\log n\right)$ è¿œä½äºåœ¨ä¸€èˆ¬å›¾ä¸Šç”¨ Dijkstra æ±‚æœ€çŸ­è·¯å’Œæœ€å¤§è¾¹æƒçš„å¤æ‚åº¦ $\mathcal{O} \left(n \log n\right)$ï¼Œæ•…å¦‚æœèƒ½æŠŠè¿™å¼ å›¾åŒ–æˆä¸€æ£µæ ‘ï¼Œé‚£ä¹ˆæƒ³å¿…æ›´æœ‰åŠ©äºæˆ‘ä»¬è§£å†³è¿™é“é¢˜ã€‚&lt;/p>
&lt;p>å¦‚ä½•å¿«é€Ÿæ‰¾åˆ°æ‰€æœ‰å»ºç­‘ç‰©ä¸¤ä¸¤ä¹‹é—´çš„æœ€çŸ­è·ç¦»ï¼Ÿåœ¨æœ¬é¢˜ä¸­ï¼Œæ•´ä½“å¤æ‚åº¦è¾ƒå°ä¸”æ¯”è¾ƒç®€å•çš„æ–¹æ³•ä¹‹ä¸€æ˜¯å¤šæº BFSã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ç»´æŠ¤æ•´ä¸ªæ–¹æ ¼åœ°å›¾ä¸­æ¯ä¸€ä¸ªæ ¼å­è·ç¦»æœ€è¿‘çš„å»ºç­‘ç‰©çš„ç¼–å·ä»¥åŠäºŒè€…ä¹‹é—´çš„è·ç¦»ã€‚æœ€åˆå°†æ‰€æœ‰å»ºç­‘ç‰©ä¸€æ¬¡æ€§å…¨éƒ¨å‹å…¥é˜Ÿåˆ—ä¸­ï¼Œç„¶åä»¥è¿™è‹¥å¹²ä¸ªå»ºç­‘ç‰©ä¸ºæºç‚¹ä¸€å±‚å±‚åœ°å‘å¤–æ‰©æ•£ã€‚åœ¨ä»æŸä¸ªæºç‚¹ $u$ å¼€å§‹çš„æœç´¢ä¸­ï¼Œå¦‚æœå½“å‰æœç´¢åˆ°çš„æ ¼å­è¿˜æ²¡æœ‰æ ‡è®°ï¼Œè¯´æ˜è·ç¦»è¯¥æ ¼å­æœ€è¿‘çš„å»ºç­‘ç‰©å°±æ˜¯ $u$ï¼›å¦‚æœå·²ç»å­˜åœ¨äº†æŸä¸ªå…¶ä»–æºç‚¹ $v$ çš„æ ‡è®°ï¼Œè¯´æ˜å·²ç»åˆ°è¾¾äº†å½“å‰æºç‚¹ç®¡è¾–èŒƒå›´çš„è¾¹ç•Œã€‚ç”±äº BFS çš„æ€§è´¨ï¼Œåœ¨å½“å‰çŠ¶æ€ã€å½“å‰æ ¼å­ä¸‹ï¼Œå½“å‰æ ¼å­è·ç¦»è‡ªå·±çš„æºç‚¹ $u$ çš„è·ç¦»æœ€çŸ­ï¼Œè·ç¦»å½“å‰æ ¼å­çš„æ ‡è®°æ‰€å±çš„æºç‚¹ $v$ çš„è·ç¦»ä¹Ÿæœ€çŸ­ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªæœ€çŸ­è·ç¦»çš„å’Œä¾¿æ˜¯ä» $u$ åˆ° $v$ çš„æœ€çŸ­è·ç¦»ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬å¾—åˆ°äº†æ‰€æœ‰å»ºç­‘ç‰©ä¸¤ä¸¤ä¹‹é—´çš„æœ€çŸ­è·ç¦»åï¼Œæ¥ä¸‹æ¥å°±æ˜¯å€ŸåŠ© Kruskal ç®—æ³•æ€æƒ³çš„æ—¶å€™äº†ã€‚æˆ‘ä»¬æ ¹æ®å»ºç­‘ç‰©ä¹‹é—´æœ€çŸ­è·ç¦»çš„é•¿åº¦ï¼Œä»å°åˆ°å¤§æšä¸¾æ‰€æœ‰çš„æœ€çŸ­è·ç¦»ï¼Œå¹¶ä»¥æœ€çŸ­è·ç¦»é•¿åº¦ä¸ºæƒå€¼ï¼Œåœ¨è¯¥æœ€çŸ­è·ç¦»æ²Ÿé€šçš„ä¸¤ä¸ªå»ºç­‘ç‰©ä¹‹é—´è¿ä¸€æ¡è¾¹ã€‚åŒä¸€ä¸ªè¿é€šå—ä¸­çš„ä¸¤ä¸ªå»ºç­‘ç‰©ä¸é‡å¤è¿è¾¹ã€‚è¿™æ ·ï¼Œå½“éå†å®Œæ‰€æœ‰è¾¹ä¹‹åï¼Œç±»ä¼¼ Kruskal æ„é€ æœ€å°ç”Ÿæˆæ ‘çš„åŸç†ï¼Œæˆ‘ä»¬å°±å»ºç«‹äº†ä¸€ç‰‡æ£®æ—ã€‚è¿™ç‰‡æ£®æ—ä¸­çš„æ¯ä¸€æ£µæ ‘ä»£è¡¨çš„è¿é€šå—åŒ…å«æ‰€æœ‰å¯è¿é€šçš„å»ºç­‘ç‰©ï¼Œå¹¶ä¸”æ ‘ä¸Šçš„æ‰€æœ‰è¾¹ä¸­é•¿åº¦çš„æœ€å¤§å€¼æœ€å°ã€‚æ ‘ä¸Šæ±‚æœ€çŸ­è·¯é—®é¢˜å¤æ‚åº¦å°±å°å¾ˆå¤šäº†ï¼Œå¯¹äºæ¯æ¬¡è¯¢é—®ï¼Œç›´æ¥åœ¨è¿™æ£µæ ‘ä¸Šè·‘ LCA æ±‚è·¯å¾„ä¸Šçš„æœ€å¤§è¾¹æƒå³å¯ã€‚&lt;/p>
&lt;p>ä»£ç å®ç°æ–¹é¢ï¼Œå€¼å¾—ä¸€æçš„æ˜¯æˆ‘ä»¬å¯¹å¤šæº BFS çš„ç»“æœè½¬ç§»åˆ° LCA è¿‡ç¨‹ä¸­çš„å¤„ç†ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•åœ°å¼€ $N^2 \leqslant 4\times 10^6$ ä¸ª &lt;code>vector&lt;/code>ï¼ˆåœ¨ç©ºé—´è¶³å¤Ÿçš„æƒ…å†µä¸‹ï¼‰å½“ä½œæ¡¶ï¼Œå½“å‡ºç°æœç´¢åˆ°å…¶ä»–æºç‚¹ç®¡è¾–çš„æ ¼å­æ—¶ï¼Œæˆ‘ä»¬å°†è‡ªå·±çš„æºç‚¹å’Œå¯¹æ–¹çš„æºç‚¹éƒ½å­˜å…¥å¯¹åº”çš„ &lt;code>vector&lt;/code> ä¸­ï¼Œä¹Ÿå°±æ˜¯ä¸‹æ ‡ä¸ºå½“å‰æ ¼å­åˆ°è‡ªå·±æºç‚¹å’Œåˆ°å¯¹æ–¹æºç‚¹çš„ä¸¤ä¸ªæœ€çŸ­è·ç¦»ä¹‹å’Œçš„ &lt;code>vector&lt;/code> å¤„ï¼Œæ–¹ä¾¿æŒ‰ç…§è¾¹æƒä»å°åˆ°å¤§æšä¸¾ã€‚&lt;/p>
&lt;details>
&lt;summary>ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ä»£ç &lt;/summary>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;queue&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;vector&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;numeric&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;algorithm&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#define endl &amp;#39;\n&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cin&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">cout&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">PII&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">pair&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MAX_N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">2e3&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MAX_P&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">2e5&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">dx&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">dy&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">M&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">P&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Q&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">char&lt;/span> &lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">queue&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PII&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">q&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">gov&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">dist&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">MAX_N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PII&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">graph&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_P&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PII&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">graph2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_N&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">MAX_N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="nc">UnionFind&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_P&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">iota&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fa&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">fa&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="nf">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">bool&lt;/span> &lt;span class="nf">merge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">sets&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">namespace&lt;/span> &lt;span class="n">LCA&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_P&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_P&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">MAX_P&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">prep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">st&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">queue&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">q&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">st&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">empty&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">front&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">auto&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="n">graph&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="k">continue&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]][&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="nf">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">swap&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">mxw&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">19&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]]&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mxw&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mxw&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">v&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">mxw&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">19&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="o">~&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mxw&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">mxw&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">u&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">fa&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mxw&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">mxw&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">mx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">mxw&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="c1">// namespace LCA
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">std&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sync_with_stdio&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">nullptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">M&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">P&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">Q&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">M&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">P&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gov&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">emplace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">empty&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">auto&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">front&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">tx&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">dx&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">ty&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">y&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">dy&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">tx&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">ty&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">tx&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">ty&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">M&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">continue&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">tx&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">ty&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="sc">&amp;#39;#&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">continue&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">gov&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">tx&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">ty&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gov&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">tx&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">ty&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gov&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dist&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">tx&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">ty&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">dist&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">emplace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">tx&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ty&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">gov&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">tx&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">ty&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">gov&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">graph2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">dist&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">tx&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">ty&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">dist&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">]].&lt;/span>&lt;span class="n">emplace_back&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">gov&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">gov&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">tx&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">ty&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sets&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">P&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">w&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">w&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="k">auto&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="n">graph2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">w&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">sets&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">merge&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">graph&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">emplace_back&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">graph&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">emplace_back&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">w&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">P&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">LCA&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">depth&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LCA&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">prep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Q&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">S&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">S&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">sets&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">S&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">sets&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">find&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">LCA&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">S&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fflush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/details>
&lt;h2 id="yet-another-array-counting-problem">Yet Another Array Counting Problem
&lt;/h2>&lt;ul>
&lt;li>å‡ºå¤„ï¼šCodeforces Round 833&lt;/li>
&lt;li>å®˜æ–¹é¢˜é¢åŠè¯„æµ‹åœ°å€ï¼š&lt;a class="link" href="https://codeforces.com/problemset/problem/1748/E" target="_blank" rel="noopener"
>Codeforces&lt;/a>&lt;/li>
&lt;li>ä¸­æ–‡ç¿»è¯‘ï¼š&lt;a class="link" href="https://www.luogu.com.cn/problem/CF1748E" target="_blank" rel="noopener"
>æ´›è°· RemoteJudge&lt;/a>&lt;/li>
&lt;li>å‚è€ƒé¢˜è§£ï¼š&lt;a class="link" href="https://codeforces.com/blog/entry/108319" target="_blank" rel="noopener"
>Official Editorial&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>æˆ‘ä»¬ä»¤ $\text{lmax}(i, j)$ è¡¨ç¤ºåŸåºåˆ— $a$ çš„åŒºé—´ $\left[i, j\right]$ ä¸Š leftmost maximum çš„ä½ç½®ã€‚åˆ™å¯ä»¥å¾—åˆ°ä¸€ä¸ªç»“è®ºï¼Œå³å¯¹äºä»»æ„å­åŒºé—´ $\left[l, r\right]$ï¼Œä»¤ $k = \text{lmax}(l, r)$ï¼Œåˆ™ $a_{\text{lmax}(l, k - 1)} &amp;lt; a_k \leqslant a_{\text{lmax}(k + 1, r)}$ï¼ˆå·¦åŠè¾¹ä¸å–ç­‰å·æ˜¯ç”± leftmost maximum çš„æ€§è´¨å†³å®šçš„ï¼Œè¯·æ³¨æ„è¿™ä¸€ç‚¹åœ¨ä¸‹é¢çš„åˆ†æä»¥åŠä»£ç å®ç°ä¸­çš„ä½“ç°ï¼‰ã€‚&lt;/p>
&lt;p>æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬å‘ç° $\text{lmax}$ çš„å–å€¼èŒƒå›´æ˜¯ä»æ›´å°çš„é—®é¢˜è§„æ¨¡è½¬ç§»è¿‡æ¥çš„ï¼Œå¹¶ä¸”ç”±äºæ¯ä¸ªåŒºé—´å†…çš„ $\text{lmax}$ çš„å€¼æ˜¯å¯ä»¥æå‰é¢„å¤„ç†å‡ºæ¥çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä»¥å½“å‰é—®é¢˜è§„æ¨¡ $\left[l, r\right]$ çš„ leftmost maximum å€¼ $k = \text{lmax}(l, r)$ ä¸ºä¸­ç‚¹è¿›è¡Œåˆ†æ²»æ¥è§£å†³é—®é¢˜ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä»¤ $k = \text{lmax}(l, r)$ï¼Œåˆ™ä»¤ $f(k, j)$ ä¸ºå½“æ»¡è¶³ $b_{\text{lmax}(l, r)} = j$ æ—¶ç»„æˆ $b_l \ldots b_r$ çš„æ–¹æ¡ˆæ•°ã€‚æ¥ä¸‹æ¥æ€è€ƒå¦‚ä½•è½¬ç§»ã€‚é¢˜ç›®è¦æ±‚æˆ‘ä»¬æ±‚æ‰€æœ‰å­åŒºé—´çš„ $\text{lmax}$ éƒ½ä¸ $a$ åºåˆ—ç›¸åŒçš„ $b$ åºåˆ—çš„æ•°é‡ï¼Œå…¶å®è¯´ç™½äº†å°±æ˜¯å¯¹äºæ¯ä¸€ä¸ªç¡®å®šçš„ $a$ åºåˆ—ä¸Šçš„ $\text{lmax}$ï¼Œå°†å…¶åŒæ—¶è§†ä¸º $b$ åºåˆ—åŒä¸€åŒºé—´ä¸Šçš„ $\text{lmax}$ åï¼Œä»¥ $\text{lmax}$ ä¸ºåˆ†ç•Œç‚¹çš„å·¦å³ä¸¤è¾¹çš„æ€»æ–¹æ¡ˆæ•°ä¹‹ç§¯ï¼ˆä¹˜æ³•åŸç†ï¼‰ã€‚ç”±æ­¤å¯ä»¥åˆ†ç±»è®¨è®ºå‡ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š&lt;/p>
&lt;ul>
&lt;li>$b_{\text{lmax}(l, r)} = 1$ ä¸”å·¦åŠè¾¹é—®é¢˜è§„æ¨¡ä¸ä¸º $\varnothing$ æ—¶ï¼Œæ ¹æ®å®šä¹‰ï¼Œæ–¹æ¡ˆæ•°ä¸º $0$ï¼›&lt;/li>
&lt;li>$\text{lmax}(l, r) = l$ æ—¶ï¼Œå½“å‰é—®é¢˜è§„æ¨¡çš„å·¦åŠè¾¹ä¸º $\varnothing$ï¼Œæ­¤æ—¶æ–¹æ¡ˆæ•°åªè€ƒè™‘å³åŠè¾¹ï¼›&lt;/li>
&lt;li>$\text{lmax}(l, r) = r$ æ—¶ï¼Œå½“å‰é—®é¢˜è§„æ¨¡çš„å³åŠè¾¹ä¸º $\varnothing$ï¼Œæ­¤æ—¶æ–¹æ¡ˆæ•°åªè€ƒè™‘å·¦åŠè¾¹ï¼›&lt;/li>
&lt;li>$\text{lmax}(l, r)$ çš„å·¦å³åŠè¾¹é—®é¢˜è§„æ¨¡éƒ½ä¸ä¸º $\varnothing$ æ—¶ï¼Œæ­¤æ—¶æ–¹æ¡ˆæ•°ä¸ºå·¦è¾¹æ€»æ–¹æ¡ˆæ•°å’Œå³è¾¹æ€»æ–¹æ¡ˆæ•°çš„ç§¯ï¼›&lt;/li>
&lt;li>$\text{lmax}(l, r)$ çš„å·¦å³åŠè¾¹é—®é¢˜è§„æ¨¡éƒ½ä¸º $\varnothing$ æ—¶ï¼Œæ­¤æ—¶æ–¹æ¡ˆæ•°ä¸º $1$ã€‚&lt;/li>
&lt;/ul>
&lt;p>ä¸ºäº†ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬éœ€è¦éšç€é€’å½’è¿‡ç¨‹ç»´æŠ¤æ€»æ–¹æ¡ˆæ•° $g(k, j) = \sum_{i = 1}^{j}f(k, i)$ã€‚&lt;/p>
&lt;p>ç»¼ä¸Šï¼Œè‹¥ä»¤ $k = \text{lmax}(l, r)$ï¼Œ$lc = \text{lmax}(l, k - 1)$ï¼Œ$rc = \text{lmax}(k + 1, r)$ï¼Œåˆ™æœ‰ï¼š&lt;/p>
&lt;p>$$
f(k, j) =
\begin{cases}
0, \quad &amp;amp;\mathrm{if} ~ {b_{\text{lmax}(l, r)} = 1} \land {k \neq l}\newline
1, \quad &amp;amp;\mathrm{if} ~ {k = l = r} \newline
g(rc, j), \quad &amp;amp;\mathrm{if} ~ {k = l} \newline
g(lc, j - 1), \quad &amp;amp;\mathrm{if} ~ {k = r} \newline
g(lc, j - 1) \cdot g(rc, j), &amp;amp;\mathrm{otherwise.}
\end{cases}
$$&lt;/p>
&lt;p>ä»£ç å®ç°ä¸Šï¼Œ$\text{lmax}$ çš„å‡½æ•°å€¼å¯ä»¥é€šè¿‡çº¿æ®µæ ‘ã€ST è¡¨ç­‰æ•°æ®ç»“æ„å®ç°æŸ¥è¯¢ï¼›å¦ä¸€ä¸ªéœ€è¦å°å¿ƒçš„åœ°æ–¹æ˜¯ä¸èƒ½ä¸€æ¬¡æ€§æŠŠ $f$ å’Œ $g$ æ•°ç»„å¼€æˆé™æ€çš„ï¼Œå› ä¸ºæ‰€éœ€è¦çš„ç©ºé—´å¤ªå¤§äº†ï¼Œåˆä¼šé€ æˆå¾ˆå¤šç©ºé—´æµªè´¹ï¼ˆ$n, m \leqslant 2 \times 10^5$ï¼Œä½† $nm \leqslant 10^6$ï¼‰ï¼Œå› æ­¤éœ€è¦é‡‡ç”¨å¼€ &lt;code>vector&lt;/code> ä»£æ›¿çš„æ–¹æ³•è¿›è¡Œæ›¿ä»£ã€‚&lt;/p>
&lt;details>
&lt;summary>ç‚¹å‡»æŸ¥çœ‹å…¨éƒ¨ä»£ç &lt;/summary>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;vector&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;cstring&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#define endl &amp;#39;\n&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="k">namespace&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">using&lt;/span> &lt;span class="n">i64&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kt">long&lt;/span> &lt;span class="kt">long&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">2e5&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">MOD&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">1e9&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">i64&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">g&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="nc">SparseTable&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">tb&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="nf">log2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">exp&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">exp&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">exp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="nf">prep&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">lmt&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">log2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tb&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">assign&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">g&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">assign&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">lmt&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">tb&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]]&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">tb&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">))][&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]])&lt;/span> &lt;span class="n">tb&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="n">tb&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="nf">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">t&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">log2&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">tb&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]]&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">y&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">tb&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">]])&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">x&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">y&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span> &lt;span class="n">ST&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">divide_and_conquer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">mid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ST&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">lc&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">divide_and_conquer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">mid&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">rc&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">divide_and_conquer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mid&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">lc&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">mid&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">mid&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">lc&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="n">g&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">lc&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">1LL&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">rc&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">?&lt;/span> &lt;span class="n">g&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">rc&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="mi">1LL&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">MOD&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">g&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">mid&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">g&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">mid&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">mid&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">MOD&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">mid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">solve&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ST&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">prep&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">mid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">divide_and_conquer&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">g&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">mid&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sync_with_stdio&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">nullptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">T&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">solve&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fflush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;/details></description></item><item><title>KMP æ¨¡å¼åŒ¹é…ç®—æ³•ä¸å‰ç¼€å‡½æ•°</title><link>https://eoin.blog/p/kmp-prefix-func/</link><pubDate>Fri, 10 May 2024 00:00:02 +0800</pubDate><guid>https://eoin.blog/p/kmp-prefix-func/</guid><description>&lt;ul>
&lt;li>æ¨¡æ¿é¢˜ç›®ï¼š&lt;a class="link" href="https://loj.ac/p/103" target="_blank" rel="noopener"
>LibreOJ #103&lt;/a> æˆ– &lt;a class="link" href="https://www.luogu.com.cn/problem/P3375" target="_blank" rel="noopener"
>æ´›è°· P3375&lt;/a> æˆ– &lt;a class="link" href="https://www.acwing.com/problem/content/833/" target="_blank" rel="noopener"
>AcWing 831&lt;/a>&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>æ±‚ç»™å®šçš„å­—ç¬¦ä¸² $s$ ä½œä¸ºå­ä¸²åœ¨å¦ä¸€ä¸ªç»™å®šçš„å­—ç¬¦ä¸² $t$ ä¸­æ‰€æœ‰å‡ºç°çš„ä½ç½®ã€‚&lt;/p>
&lt;/blockquote>
&lt;h2 id="æœ´ç´ ç®—æ³•">æœ´ç´ ç®—æ³•
&lt;/h2>&lt;p>å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæœ€æœ´ç´ çš„æ–¹æ³•è«è¿‡äºæš´åŠ›æšä¸¾ï¼Œä¹Ÿå°±æ˜¯åˆ†åˆ«ä» $t$ çš„æ¯ä¸€ä¸ªä½ç½®å¼€å§‹éå†ï¼Œé€ä½æ¯”è¾ƒå½“å‰å­—ç¬¦ä¸ $s$ ä¸­å¯¹åº”å­—ç¬¦æ˜¯å¦ç›¸åŒ¹é…ã€‚ä»£ç å†™èµ·æ¥å¾ˆæ— è„‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="n">string&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sync_with_stdio&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">nullptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">bool&lt;/span> &lt;span class="n">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">flag&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fflush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä»¥ä¸Šä»£ç çš„å¤æ‚åº¦è¿‘ä¼¼ä¸º $\mathcal{O}(nm)$ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²é•¿åº¦çš„ä¹˜ç§¯ã€‚åœ¨ç»™å‡ºçš„æ¨¡æ¿é¢˜ä¸­ï¼Œ$1 \leqslant n, m \leqslant 10^6$ï¼Œæœ´ç´ ç®—æ³•æ˜¾ç„¶æ˜¯æ— æ³•åœ¨æ—¶é™å†…å¾—å‡ºç»“æœçš„ã€‚&lt;/p>
&lt;h2 id="å‰ç¼€å‡½æ•°">å‰ç¼€å‡½æ•°
&lt;/h2>&lt;blockquote>
&lt;p>æœ¬èŠ‚ä¸­ï¼Œé»˜è®¤ä¸€ä¸ªå­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®ï¼ˆä¸‹æ ‡ï¼‰ä¸º $0$ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>å…ˆæ¥çœ‹çœ‹æœ´ç´ ç®—æ³•å…·ä½“æ˜¯å¦‚ä½•å¾—å‡ºç»“æœçš„ã€‚æœ´ç´ ç®—æ³•çš„é€»è¾‘æ˜¯ï¼Œå‡å¦‚ä¸¤ä¸ªå­—ç¬¦ä¸²ä¹‹é—´å‡ºç°äº†åˆ†æ­§ï¼Œé‚£ä¹ˆç›´æ¥ä»å¤´é‡æ–°å¼€å§‹æ–°ä¸€è½®æšä¸¾ã€‚ä¸è¿‡ç°åœ¨ï¼Œå‡å¦‚æˆ‘ä»¬å¯ä»¥æ ¹æ®å·²ç»éå†è¿‡çš„å­—ç¬¦ç›´æ¥ç¡®å®šå‡ºæ¥ä¸‹æ¥è¦æŠŠæŒ‡é’ˆç§»åŠ¨åˆ°ä»€ä¹ˆä½ç½®å»ï¼Œå°±å¯ä»¥èŠ‚çœæœ´ç´ ç®—æ³•æ¯æ¬¡å°†æŒ‡é’ˆå›é€€åˆ°å¼€å¤´ã€é€ä½æšä¸¾æ‰€é€ æˆçš„æ—¶é—´æµªè´¹ã€‚è¿™å°±æ˜¯æ¥ä¸‹æ¥è¦ä»‹ç»çš„ KMP æ¨¡å¼åŒ¹é…ç®—æ³•é™ä½å¤æ‚åº¦çš„åº•å±‚é€»è¾‘ã€‚ä¸è¿‡åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜è¦å…ˆå¼•å…¥&lt;strong>å‰ç¼€å‡½æ•°&lt;/strong>è¿™æ ·ä¸€ä¸ªæ¦‚å¿µã€‚&lt;/p>
&lt;p>å¯¹äºå­—ç¬¦ä¸² $s$ï¼Œå¯ä»¥æ„é€ ä¸€ä¸ªæ•°ç»„ $\pi$ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´  $\pi[i]$ å­˜å‚¨ç”± $s[0]$ åˆ° $s[i]$ è¿™ $i+1$ ä¸ªå­—ç¬¦ç»„æˆçš„å­ä¸²ä¸­çš„çœŸå‰ç¼€ä¸çœŸåç¼€ç›¸ç­‰æ—¶å®ƒä»¬çš„é•¿åº¦ã€‚&lt;/p>
&lt;p>æ¯”å¦‚å­—ç¬¦ä¸² &lt;code>ATAATA&lt;/code> å¯ä»¥æ„å»ºå‡ºçš„ $\pi$ æ•°ç»„ä¸º $\left \lbrace 0, 0, 1, 1, 2, 3 \right \rbrace$ï¼Œè¿™ $6$ ä¸ªæ•°åˆ†åˆ«è¡¨ç¤ºå­ä¸²ä¸º &lt;code>A&lt;/code>ã€&lt;code>AT&lt;/code>ã€&lt;code>ATA&lt;/code>ã€&lt;code>ATAA&lt;/code>ã€&lt;code>ATAAT&lt;/code> å’Œ &lt;code>ATAATA&lt;/code> æ—¶ï¼Œå­ä¸²çš„çœŸå‰ç¼€ä¸çœŸåç¼€ï¼ˆå­—ç¬¦ä¸²&lt;strong>çœŸå‰ã€åç¼€&lt;/strong>çš„æ¦‚å¿µï¼Œå¯ä»¥ç±»æ¯”æ•°ç»„ä¸­&lt;strong>å‰ã€åç¼€å’Œ&lt;/strong>ä»¥åŠé›†åˆè®ºä¸­&lt;strong>çœŸ&lt;/strong>å­é›†çš„æ¦‚å¿µï¼‰ç›¸ç­‰æ—¶å®ƒä»¬çš„é•¿åº¦ï¼š&lt;/p>
&lt;ul>
&lt;li>&lt;code>A&lt;/code> æ²¡æœ‰çœŸå‰ç¼€å’ŒçœŸåç¼€ï¼Œå­˜å‚¨ä¸º $0$ï¼›&lt;/li>
&lt;li>&lt;code>AT&lt;/code> çš„çœŸå‰ç¼€ä¸çœŸåç¼€å‡ä¸ç›¸ç­‰ï¼Œå­˜å‚¨ä¸º $0$ï¼›&lt;/li>
&lt;li>&lt;code>ATA&lt;/code> çš„æœ€é•¿ç›¸ç­‰çœŸå‰ã€åç¼€ä¸º &lt;code>A&lt;/code>ï¼Œé•¿åº¦ä¸º $1$ï¼›&lt;/li>
&lt;li>&lt;code>ATAA&lt;/code> çš„æœ€é•¿ç›¸ç­‰çœŸå‰ã€åç¼€ä¹Ÿä¸º &lt;code>A&lt;/code>ï¼Œé•¿åº¦ä¸º $1$ï¼›&lt;/li>
&lt;li>&lt;code>ATAAT&lt;/code> çš„æœ€é•¿ç›¸ç­‰çœŸå‰ã€åç¼€ä¸º &lt;code>AT&lt;/code>ï¼Œé•¿åº¦ä¸º $2$ï¼›&lt;/li>
&lt;li>&lt;code>ATAATA&lt;/code> çš„æœ€é•¿ç›¸ç­‰çœŸå‰ã€åç¼€ä¸º &lt;code>ATA&lt;/code>ï¼Œé•¿åº¦ä¸º $3$ã€‚&lt;/li>
&lt;/ul>
&lt;p>è¿™æ ·çš„æ•°ç»„ $\pi$ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå­—ç¬¦ä¸² $s$ çš„å‰ç¼€å‡½æ•°ã€‚&lt;/p>
&lt;p>ç„¶åæ‹¿ $s$ ä¸ $t$ è¿›è¡ŒåŒ¹é…ï¼Œä½†æ˜¯åŒæ—¶å€ŸåŠ©å‰ç¼€å‡½æ•°æ¥ç¡®å®šæŒ‡é’ˆç§»åŠ¨çš„ä½ç½®ã€‚æˆ‘ä»¬ä»¥ $s = \texttt{ATAATA}$ã€$t = \texttt{ATAAATAATA}$ ä¸ºä¾‹ ã€‚å°† $i$ ä¸ $j$ &lt;strong>åŒæ—¶&lt;/strong>ä»å„è‡ªå­—ç¬¦ä¸²çš„å¼€å¤´å‘åç§»åŠ¨ï¼Œç›´åˆ°å‡ºç°åˆ†æ­§ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"> i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ATAAATAATA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ATAATA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> j
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åæˆ‘ä»¬æŸ¥çœ‹ $s$ ä¸­åˆ†æ­§å‰ä¸€ä½çš„ä½ç½® $3$ åœ¨ $\pi$ æ•°ç»„ä¸­å­˜å‚¨çš„å€¼ï¼Œå³ $\pi[3] = 1$ï¼Œå†å°† $j$ ç§»åŠ¨åˆ° $s$ çš„ $1$ ä½ç½®ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"> i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ATAAATAATA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ATAATA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> j
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œ$s$ ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ²¡æœ‰ç»è¿‡é‡æ–°éå†å°±å·²ç»åŒ¹é…ä¸Šäº†ï¼è¿™æ˜¯å·§åˆå—ï¼Ÿå¹¶ä¸æ˜¯ã€‚&lt;/p>
&lt;p>è”ç³» $\pi$ æ•°ç»„çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè¿™ä¸€æ•ˆæœå¾—ä»¥å®ç°çš„åŸå› æ˜¯ï¼Œåˆ†æ­§å­—ç¬¦ä¹‹å‰çš„ &lt;code>ATAA&lt;/code> è¿™ä¸ªå­ä¸²çš„æœ€é•¿ç›¸ç­‰çœŸå‰ã€åç¼€çš„é•¿åº¦ä¸º $1$ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”±äºæˆ‘ä»¬å…ˆå‰å·²ç»ç¡®è®¤ $s$ ä¸ $t$ çš„å‰ $4$ ä¸ªå­—ç¬¦ç›¸åŒï¼Œå…¶ä¸­æœ€é•¿ç›¸ç­‰çœŸå‰ã€åç¼€çš„é•¿åº¦éƒ½ä¸º $1$ï¼Œå³ $s$ çš„ç¬¬ $0$ ä¸ªä½ç½®å’Œç¬¬ $3$ ä¸ªä½ç½® ã€$t$ çš„ç¬¬ $0$ ä¸ªä½ç½®å’Œç¬¬ $3$ ä¸ªä½ç½®çš„å­—ç¬¦ç›¸åŒã€‚é‚£ä¹ˆé‚£ä¹ˆå‡ºç°åˆ†æ­§ä¹‹åï¼Œå°±å¯ä»¥ç›´æ¥æ ¹æ® $s$ çš„ç¬¬ $0$ ä¸ªä½ç½®çš„ &lt;code>A&lt;/code> ä¸ $t$ ç¬¬ $3$ ä¸ªä½ç½®çš„ &lt;code>A&lt;/code> ç›¸åŒ¹é…ï¼ŒæŠŠæ•´ä¸ªå­—ç¬¦ä¸²å‘åç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä½ç½®ï¼Œä¹Ÿå°±æ˜¯æŠŠ $j$ æŒ‡é’ˆç§»åŠ¨åˆ° $\pi[3] = 1$ çš„ä½ç½®ã€‚&lt;/p>
&lt;p>å…·ä½“å¯ä»¥çœ‹ä¸‹é¢çš„å›¾ç¤ºï¼š&lt;/p>
&lt;p>&lt;img src="https://eoin.blog/p/kmp-prefix-func/step1.png"
width="960"
height="720"
srcset="https://eoin.blog/p/kmp-prefix-func/step1_hub8a509bcc4cedc3b855bcee9a4fb2c8e_22397_480x0_resize_box_3.png 480w, https://eoin.blog/p/kmp-prefix-func/step1_hub8a509bcc4cedc3b855bcee9a4fb2c8e_22397_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>
&lt;img src="https://eoin.blog/p/kmp-prefix-func/step2.png"
width="960"
height="720"
srcset="https://eoin.blog/p/kmp-prefix-func/step2_hufa989cd0ecf080d80d39563a5aedd180_24115_480x0_resize_box_3.png 480w, https://eoin.blog/p/kmp-prefix-func/step2_hufa989cd0ecf080d80d39563a5aedd180_24115_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>&lt;img src="https://eoin.blog/p/kmp-prefix-func/step3.png"
width="960"
height="720"
srcset="https://eoin.blog/p/kmp-prefix-func/step3_hu04338a1f60a6139262aedcf87d6fc7ab_29236_480x0_resize_box_3.png 480w, https://eoin.blog/p/kmp-prefix-func/step3_hu04338a1f60a6139262aedcf87d6fc7ab_29236_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>
&lt;img src="https://eoin.blog/p/kmp-prefix-func/step4.png"
width="960"
height="720"
srcset="https://eoin.blog/p/kmp-prefix-func/step4_hu7504a806ce6de921fb85ba5077e30410_30834_480x0_resize_box_3.png 480w, https://eoin.blog/p/kmp-prefix-func/step4_hu7504a806ce6de921fb85ba5077e30410_30834_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>
&lt;img src="https://eoin.blog/p/kmp-prefix-func/step5.png"
width="960"
height="720"
srcset="https://eoin.blog/p/kmp-prefix-func/step5_hub99de2a1e406e4b376a1ce0ad7f76ba5_30964_480x0_resize_box_3.png 480w, https://eoin.blog/p/kmp-prefix-func/step5_hub99de2a1e406e4b376a1ce0ad7f76ba5_30964_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>ä»è¿™ä¸ªæ„ä¹‰ä¸Šæ¥è¯´ï¼Œ$\pi$ æ•°ç»„å­˜å‚¨çš„å€¼å®é™…ä¸Šæ˜¯å½“å‰é•¿åº¦çš„å­ä¸²ä¸­ï¼Œæœ€é•¿ç›¸ç­‰çœŸå‰ã€åç¼€çš„é•¿åº¦ $+1$ ä¹‹ååœ¨åŸå­ä¸²é‡Œçš„ä½ç½®ã€‚åœ¨è¿™ä¸ªä½ç½®ä¹‹å‰çš„ $s$ ä¸­ç¬¬ $0$ ä¸ªä½ç½®ä¸€ç›´åˆ°ç¬¬ $\pi[i]$ ä¸ªä½ç½®çš„æ‰€æœ‰å­—ç¬¦æ‰€æ„æˆçš„å­ä¸²ï¼Œä¸ $t$ ä¸­ç¬¬ $i - \pi[i]$ ä¸ªä½ç½®ä¸€ç›´åˆ°ç¬¬ $i - 1$ ä¸ªä½ç½®çš„æ‰€æœ‰å­—ç¬¦æ‰€æ„æˆçš„å­ä¸²ï¼Œæ˜¯å®Œå…¨ç›¸åŒçš„ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠ $s[0] \sim s[\pi[i]]$ ç§»åŠ¨åˆ° $t[i-\pi[i]] \sim t[i-1]$ çš„ä½ç½®ä¸Šï¼ˆåœ¨å›¾å½¢ä¸­æ˜¯æŠŠæ•´ä¸ª $s$ å­—ç¬¦ä¸²å‘åç§»åŠ¨ï¼Œä»£ç é‡Œé€šè¿‡è°ƒæ•´ $j$ æŒ‡é’ˆä½ç½®æ¥å®ç°ï¼‰ï¼Œè€Œä¸éœ€è¦é‡æ–°å»éå†ä¹‹å‰çš„æ¯ä¸€ä¸ªå­—ç¬¦ã€‚&lt;/p>
&lt;hr>
&lt;p>è¯´äº†è¿™ä¹ˆå¤šï¼Œé‚£ä¹ˆ $s$ çš„å‰ç¼€å‡½æ•°åˆ°åº•å¦‚ä½•ç”¨ç¨‹åºè®¡ç®—å‡ºæ¥å‘¢ï¼Ÿ&lt;/p>
&lt;p>æœ´ç´ ç®—æ³•æ˜¾ç„¶å¯ä»¥å¾ˆå®¹æ˜“åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯åŒæ ·éœ€è¦å¯¹ $s$ è¿›è¡Œä¸¤æ¬¡æ‰«æï¼Œæ—¶é—´å¤æ‚åº¦çº¦ä¸º $\mathcal{O}(n^2)$ï¼Œæ˜¾ç„¶æ˜¯ä¸è¿‡å…³çš„ã€‚æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ç”¨ $i$ å’Œ $j$ æŒ‡é’ˆå‘åç§»åŠ¨çš„æ–¹æ³•è¿›è¡ŒåŒ¹é…ï¼Œä½†æ˜¯äºŒè€…åˆ†åˆ«æ‰«æå„è‡ªçš„ $s$ å­—ç¬¦ä¸²ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼šï¼ˆ$s = \texttt{ABACABA}$ï¼Œ$\pi[0]$ é»˜è®¤ä¸º $0$ï¼‰&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"> i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ABACABA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ABACABA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> j
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æˆ‘ä»¬ä» $i=1, j = 0$ å¼€å§‹æ‰«æï¼ˆ$i$ å¦‚æœä»å¤´å¼€å§‹æ‰«æï¼Œé‚£ä¹ˆ $i$ å’Œ $j$ æ‰«æåˆ°çš„å­—ç¬¦ä¸€å®šä¼šåŒ¹é…ï¼Œå› ä¸ºæœ¬æ¥å°±æ˜¯ä¸¤ä¸ªç›¸åŒçš„å­—ç¬¦ä¸²åœ¨ç›¸äº’åŒ¹é…ï¼‰ ï¼Œå‘ç°ç¬¬ä¸€ä¸ªå­—ç¬¦å°±å‡ºç°äº†åˆ†æ­§ï¼Œè¿™æ„å‘³ç€ $\pi[1] = 0$ï¼Œå› ä¸º $i$ åçš„æ‰€æœ‰å­—ç¬¦æ‰€ç»„æˆçš„åç¼€ä¸ $j$ åŠå…¶ä¹‹å‰æ‰€æœ‰å­—ç¬¦ç»„æˆçš„å‰ç¼€å¹¶ä¸ç›¸åŒã€‚æˆ‘ä»¬æŠŠ $0$ å­˜å…¥ $\pi[1]$ çš„ä½ç½®ä¸Šï¼Œç„¶åè®© $i$ å‘åç§»ä¸€ä½ï¼ˆ$j$ åªåœ¨åŒ¹é…åˆ°ç›¸åŒå­—ç¬¦ä¹‹åæ‰å‘åç§»ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"> i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ABACABA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ABACABA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> j
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä¸¤ä¸ªä½ç½®ç›¸åŒï¼Œæ‰€ä»¥ $\pi[2] = 1$ï¼Œè¡¨ç¤ºæ‰¾åˆ°äº† &lt;code>ABA&lt;/code> ä¸­çš„ä¸€ä¸ªæœ€é•¿ç›¸ç­‰å‰ã€åç¼€ &lt;code>A&lt;/code>ï¼Œå…¶é•¿åº¦ä¸º $1$ã€‚ç„¶åå°±å¯ä»¥å°† $i$ ä¸ $j$ åŒæ—¶å‘åç§»åŠ¨äº†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"> i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ABACABA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ABACABA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> j
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>æ˜¾è§è¿™ä¸¤ä¸ªå­—ç¬¦ä¸åŒï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦åœ¨å·²æœ‰çš„ $\pi$ æ•°ç»„ä¸­æŸ¥æ‰¾ï¼Œçœ‹èƒ½ä¸èƒ½å°† $j$ æ‰€åœ¨çš„ $s$ å­—ç¬¦ä¸²å‘åç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…è¿‡çš„ä½ç½®ã€‚è¿™é‡Œçš„åŸç†ä¸å®ç°æ–¹æ³•ï¼Œå’Œå‰é¢æåˆ°çš„åŒ¹é… $t$ ä¸ $s$ çš„åŸç†å’Œæ–¹æ³•æ˜¯ä¸€è‡´çš„ï¼Œæˆ‘ä»¬æŸ¥è¯¢ $\pi$ æ•°ç»„çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†èŠ‚çœæœ´ç´ ç®—æ³•ä¸­ä»å¤´å¼€å§‹éå†æ‰€æµªè´¹æ‰çš„æ—¶é—´ã€‚ä¸è¿‡è¿™é‡Œï¼Œç”±äº $\pi[j-1] = \pi[0] = 0$ï¼Œæ„å‘³ç€æˆ‘ä»¬éå†è¿‡çš„å­—ç¬¦ä¸­ï¼Œæ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦æ¥è®©æˆ‘ä»¬ç›´æ¥ç§»åŠ¨ $j$ æŒ‡é’ˆä»¥ä½¿ $j$ æ‰€åœ¨çš„ $s$ å­—ç¬¦ä¸²å¼€å¤´ä¸ $i$ æ‰€åœ¨çš„ $s$ å­—ç¬¦ä¸²ä¸­éå†è¿‡çš„å­—ç¬¦ç›¸åŒ¹é…çš„ä½ç½®äº†ï¼ˆ$j$ æ‰€åœ¨ $s$ å­—ç¬¦ä¸²å‰ç¼€çš„ &lt;code>A&lt;/code> å·²ç»ä¸ &lt;code>ABA&lt;/code> ä¸­åç¼€é‡Œçš„ &lt;code>A&lt;/code> çš„ä½ç½®é‡åˆäº†ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯æŠŠ $j$ è®¾ä¸º $\pi[0] = 0$ï¼Œä» $j$ æ‰€åœ¨ $s$ å­—ç¬¦ä¸²çš„å¼€å¤´é‡æ–°å¼€å§‹éå†ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"> i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ABACABA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ABACABA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> j
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>è¿˜æ˜¯ä¸åŒ¹é…ï¼Œè®¾ $\pi[3] = 0$ã€‚å°† $i$ å‘åç§»åŠ¨ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-text" data-lang="text">&lt;span class="line">&lt;span class="cl"> i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ABACABA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ABACABA
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> j
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å‘ç°åŒ¹é…ï¼Œè®¾ $\pi[4] = 1$ã€‚å°† $i$ å’Œ $j$ åŒæ—¶å‘åç§»åŠ¨ï¼Œç›´åˆ°ç»“å°¾ï¼Œå°±å¯ä»¥å¾—å‡º $\pi[5] = 2$ å’Œ $\pi[6] = 3$ã€‚&lt;/p>
&lt;p>ä»ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœä¸åŒ¹é…ï¼Œå°±å°† $\pi[i]$ è®¾ä¸º $0$ï¼Œä»…ç§»åŠ¨ $i$ æŒ‡é’ˆï¼Œå¹¶ä¸”å¦‚æœ $j \ne 0$ï¼Œå°±æ ¹æ® $\pi$ æ•°ç»„ä¸­å·²æœ‰çš„å€¼è®© $j$ æŒ‡é’ˆ&lt;strong>å‘å‰&lt;/strong>è¿”å›åˆ°ä¸‹ä¸€ä¸ªå¯èƒ½å‡ºç°åŒ¹é…çš„ä½ç½®ï¼›å¦åˆ™ï¼Œ$\pi[i] = j +1$ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¹‹å‰æœ€å¤§é•¿åº¦çš„åŸºç¡€ä¸ŠåŠ ä¸Šè¿™æ–°éå†åˆ°çš„ä¸€ä¸ªå­—ç¬¦ã€‚&lt;/p>
&lt;p>è¿™å°±æ˜¯ KMP æ¨¡å¼åŒ¹é…ç®—æ³•èƒŒåçš„åŸç†ã€‚&lt;/p>
&lt;h2 id="ä»£ç å®ç°">ä»£ç å®ç°
&lt;/h2>&lt;p>ç»¼åˆä¸€ä¸‹ä¹‹å‰çš„æ¨ç†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»£ç åˆ†æˆå‡ ä¸ªæ­¥éª¤ï¼š&lt;/p>
&lt;ul>
&lt;li>è®¡ç®— $s$ çš„å‰ç¼€æ•°ç»„ $\pi$ï¼š
&lt;ul>
&lt;li>å¦‚æœå½“å‰ä½ç½®å­—ç¬¦ä¸åŒ¹é…ï¼Œ$j$ æŒ‡é’ˆå›æº¯åˆ°ä¸‹ä¸€ä¸ªå¯èƒ½å‡ºç°åŒ¹é…çš„ä½ç½®ï¼›&lt;/li>
&lt;li>å¦‚æœæˆåŠŸåŒ¹é…ï¼Œ$j$ æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä½ï¼›&lt;/li>
&lt;li>å­˜å‚¨ $\pi[i]$ çš„å€¼ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>åœ¨ $t$ ä¸­æŸ¥æ‰¾ $s$ï¼š
&lt;ul>
&lt;li>å¦‚æœå½“å‰ä½ç½®å­—ç¬¦ä¸åŒ¹é…ï¼Œ$j$ æŒ‡é’ˆå›æº¯åˆ°ä¸‹ä¸€ä¸ªå¯èƒ½å‡ºç°åŒ¹é…çš„ä½ç½®ï¼›&lt;/li>
&lt;li>å¦‚æœæˆåŠŸåŒ¹é…ï¼Œ$j$ æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä½ï¼›&lt;/li>
&lt;li>å¦‚æœ $j$ æŒ‡é’ˆå·²ç»æˆåŠŸåˆ°äº† $s$ ä¸²æœ«å°¾ï¼Œåˆ™è¾“å‡ºæ‰€åœ¨ä½ç½®å¹¶å›æº¯åˆ°ä¸‹ä¸€ä¸ªå¯èƒ½å‡ºç°åŒ¹é…çš„ä½ç½®ï¼ˆå› ä¸º $t$ ä¸­çš„ $s$ ä¸²å¯èƒ½é‡å ï¼‰ï¼Œç»§ç»­åŒ¹é…ã€‚&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">1e6&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">pi&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">string&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sync_with_stdio&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">nullptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">s&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pi&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pi&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pi&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">t&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="sc">&amp;#39; &amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">pi&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fflush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>æœ€é•¿ä¸Šå‡å­åºåˆ—é—®é¢˜çš„äºŒåˆ†ä¼˜åŒ–</title><link>https://eoin.blog/p/lis-w-binary-search/</link><pubDate>Fri, 10 May 2024 00:00:01 +0800</pubDate><guid>https://eoin.blog/p/lis-w-binary-search/</guid><description>&lt;ul>
&lt;li>æ¨¡æ¿é¢˜ç›®ï¼š&lt;a class="link" href="https://www.acwing.com/problem/content/898/" target="_blank" rel="noopener"
>AcWing 896&lt;/a>&lt;/li>
&lt;li>å…¸å‹ä¾‹é¢˜ï¼š&lt;a class="link" href="https://www.luogu.com.cn/problem/P1020" target="_blank" rel="noopener"
>å¯¼å¼¹æ‹¦æˆª&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="æœ´ç´ åšæ³•">æœ´ç´ åšæ³•
&lt;/h2>&lt;p>&lt;strong>æœ€é•¿ä¸Šå‡å­åºåˆ— (longest increasing subsequence, LIS)&lt;/strong> é—®é¢˜çš„åŠ¨æ€è§„åˆ’æœ´ç´ æ€è·¯ä¸ºï¼Œé’ˆå¯¹ç»™å®šåºåˆ—ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œè®¡ç®—ä¸€éä»¥è¯¥å…ƒç´ ç»“å°¾çš„æ‰€æœ‰ LISï¼Œå¹¶æ¯”è¾ƒè¿™äº›åºåˆ—çš„é•¿åº¦ï¼Œå–å¾—æœ€å¤§å€¼ã€‚ä¸ºäº†å‡å°å¤æ‚åº¦ï¼Œè®¡ç®—æ¯ä¸ªå…ƒç´ ç»“å°¾çš„ LIS é•¿åº¦è¿™ä¸€æ“ä½œï¼Œæˆ‘ä»¬é€šè¿‡åŠ¨æ€è§„åˆ’æä¾›çš„çŠ¶æ€è½¬ç§»æ¥å®ç°ï¼Œå³æ ¹æ®ä»¥å‰ä¸€ä¸ªå…ƒç´ ç»“å°¾çš„ LIS æœ€å¤§é•¿åº¦ï¼Œå¯¹å½“å‰å…ƒç´ ç»“å°¾çš„ LIS çš„æœ€å¤§é•¿åº¦è¿›è¡Œæ›´æ–°ã€‚æ ¹æ®è¿™ç§æ€æƒ³å¯ä»¥å†™å‡ºä»¥ä¸‹çš„ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">1e3&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">dp&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sync_with_stdio&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">nullptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dp&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">j&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">dp&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dp&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">dp&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ans&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dp&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">ans&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fflush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å¯ä»¥å¤§è‡´åˆ†æï¼Œè¿™ç§æ€è·¯ä¸‹ï¼Œä»£ç çš„å¤æ‚åº¦è¾¾åˆ°äº† $\mathcal{O}(n^2)$ï¼Œæ‰€ä»¥å¦‚æœæ•°æ®èŒƒå›´è¾ƒå¤§çš„è¯ï¼Œå°±æ— æ³•åœ¨æ—¶é™å†…å¾—å‡ºç»“æœäº†ã€‚&lt;/p>
&lt;h2 id="ä¼˜åŒ–æ€è·¯">ä¼˜åŒ–æ€è·¯
&lt;/h2>&lt;p>å¦‚æœè¯´ä¸Šé¢çš„æ€è·¯è¿˜æ¯”è¾ƒç¬¦åˆåŠ¨æ€è§„åˆ’çš„æ€è·¯ï¼Œé‚£ä¹ˆä¼˜åŒ–æ–¹å¼å°±éœ€è¦æ¢æ¢è„‘ç­‹ï¼Œæ¢ç”¨ä¸€ç§è´ªå¿ƒçš„æ€è·¯ã€‚è€ƒè™‘ä¸€ä¸ªåºåˆ— $A = \left \lbrace 1, 2, 5, 4, 3, 4\right \rbrace$ï¼Œå¹¶ç»´æŠ¤ä¸€ä¸ªåºåˆ— $F$ï¼Œæ¯ä¸€ä¸ªå…ƒç´  $F_i$ å­˜å‚¨é•¿åº¦ä¸º $i$ çš„ LIS ä¸­æœ«å°¾å…ƒç´ çš„æœ€å°å€¼ã€‚è¿™æ ·åšçš„å¥½å¤„åœ¨äºï¼Œåœ¨éå† $A$ ä¸­å…ƒç´ æ—¶ï¼Œå‡å¦‚éå†åˆ°çš„å…ƒç´ æ¯” $F$ ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½è¦å¤§ï¼Œé‚£ä¹ˆæ­å–œï¼Œè¿™ä¸ªåºåˆ—çš„ LIS å°±å¯ä»¥å¢åŠ ä¸€ä¸ªå…ƒç´ äº†ï¼›å‡å¦‚éå†åˆ°çš„å…ƒç´ æ¯” $F$ ä¸­çš„æŸä¸ªå…ƒç´ è¦å°ï¼Œå°±ç”¨å½“å‰å…ƒç´ &lt;strong>è¦†ç›–æ‰ç¬¬ä¸€ä¸ªå¤§äºæˆ–ç­‰äºå®ƒ&lt;/strong>çš„å…ƒç´ ï¼Œåœ¨ç»™å‰©ä¸‹çš„å…ƒç´ ç•™å‡ºæ›´å¤§ç©ºé—´çš„åŒæ—¶ï¼Œä¹Ÿä¸ä¼šå½±å“ LIS çš„é•¿åº¦ã€‚&lt;/p>
&lt;p>è¿™ä¹ˆè¯´å¯èƒ½æœ‰ç‚¹æŠ½è±¡ï¼Œä¸å¦‚æ‹¿å®é™…çš„ä¾‹å­æ¥è¯´æ˜ï¼Œæ›´åŠ ç›´è§‚ã€‚&lt;/p>
&lt;p>æˆ‘ä»¬ä»¤åºåˆ—ä¸­çš„ä¸‹æ ‡ä» $1$ å¼€å§‹ã€‚&lt;/p>
&lt;ul>
&lt;li>å½“ $i = 1$ æ—¶ï¼Œå¯¹äº $A_1 = 1$ï¼Œé•¿åº¦ä¸º $i = 1$ çš„ LIS çš„æœ«å°¾å…ƒç´ æœ€å°å½“ç„¶åªèƒ½æ˜¯ $1$ï¼Œæ‰€ä»¥å°† $F_1$ çš„å€¼è®¾ä¸º $1$ï¼›&lt;/li>
&lt;li>å½“ $i = 2$ æ—¶ï¼Œå¯¹äº $A_2 = 2$ï¼Œç”±äºç›®å‰ $F$ ä¸­è¿˜æ²¡æœ‰æ¯” $2$ å¤§çš„å…ƒç´ ï¼Œæ‰€ä»¥æŠŠå®ƒæ”¾åˆ° $F_2$ï¼Œä½œä¸ºé•¿åº¦ä¸º $2$ çš„ LIS æœ«å°¾çš„æœ€å°å…ƒç´ ï¼›&lt;/li>
&lt;li>å½“ $i = 3$ æ—¶ï¼Œå¯¹äº $A_3 = 5$ï¼Œç”±äºç›®å‰ $F$ ä¸­è¿˜æ²¡æœ‰æ¯” $5$ å¤§çš„å…ƒç´ ï¼Œæ‰€ä»¥æŠŠå®ƒæ”¾åˆ° $F_3$ï¼Œä½œä¸ºé•¿åº¦ä¸º $3$ çš„ LIS æœ«å°¾çš„æœ€å°å…ƒç´ ï¼›&lt;/li>
&lt;li>å½“ $i = 4$ æ—¶ï¼Œå¯¹äº $A_4 = 4$ï¼Œå®ƒæ¯” $F_3 = 5$ è¦å°ï¼Œæ‰€ä»¥ä¸ºäº†ç»™ååŠ å…¥çš„å…ƒç´ è…¾ç©ºé—´ï¼Œå°±æŠŠ $F_3$ çš„å€¼æ›´æ–°ä¸º $4$ï¼›&lt;/li>
&lt;li>å½“ $i = 5$ æ—¶ï¼Œå¯¹äº $A_5 = 3$ï¼Œå®ƒæ¯” $F_3 = 4$ è¦å°ï¼Œæ‰€ä»¥ä¸ºäº†ç»™ååŠ å…¥çš„å…ƒç´ è…¾ç©ºé—´ï¼Œå°±æŠŠ $F_3$ çš„å€¼æ›´æ–°ä¸º $3$ï¼›&lt;/li>
&lt;li>å½“ $i = 6$ æ—¶ï¼Œå¯¹äº $A_6 = 4$ï¼Œç”±äºç›®å‰ $F$ ä¸­è¿˜æ²¡æœ‰æ¯” $4$ å¤§çš„å…ƒç´ ï¼Œæ‰€ä»¥æŠŠå®ƒæ”¾åˆ° $F_4$ï¼Œä½œä¸ºé•¿åº¦ä¸º $4$ çš„ LIS æœ«å°¾çš„æœ€å°å…ƒç´ ã€‚&lt;/li>
&lt;/ul>
&lt;p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½å·²ç»å‘ç°ä¹‹å‰æˆ‘ä»¬è®¾è®¡ $F$ åºåˆ—åŠæœ‰å…³ä¸€ç³»åˆ—æ“ä½œçš„æ„ä¹‰äº†ã€‚&lt;/p>
&lt;p>å¦‚æœä¸è¿›è¡Œè¦†ç›–ï¼Œåœ¨ä¸Šé¢è¯´ $i = 4$ çš„æ—¶å€™æ²¡æœ‰æ›¿æ¢æ‰åŸæ¥çš„ $5$ï¼Œé‚£ä¹ˆå½“éå†åˆ° $A_6 = 4$ çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç° $4$ å°±æ— æ³•æ·»åŠ åˆ° LIS æœ«å°¾å…ƒç´ çš„åºåˆ—ä¸­ï¼Œä¹Ÿå°±æ— æ³•å¾—å‡º LIS çš„æ­£ç¡®é•¿åº¦äº†ã€‚å°†åŸåºåˆ—ä¸­çš„æ›´å°å…ƒç´ å­˜å…¥ $F$ åºåˆ—ï¼Œå°±èƒ½ç»™åæ¥çš„å…ƒç´ è…¾å‡ºæ›´å¤šçš„ç©ºé—´ï¼Œä»è€Œå°½å¯èƒ½åŠ é•¿ LISã€‚&lt;/p>
&lt;p>ä½†æ˜¯ï¼ŒæŒ‰ç…§æœ´ç´ å†™æ³•ï¼Œè¿™ç§æ€è·¯çš„å¤æ‚åº¦ä¾ç„¶æ˜¯ $\mathcal{O}(n^2)$ï¼Œæ‰€ä»¥è¿˜éœ€è¦æŒ–æ˜æˆ‘ä»¬ç»´æŠ¤çš„ $F$ åºåˆ—æ‰€å…·æœ‰çš„æ€§è´¨æ¥é€‰å–åˆé€‚çš„ç®—æ³•ä»¥é™ä½å¤æ‚åº¦ã€‚æŒ‰ç…§æˆ‘ä»¬å¯¹ $F$ åºåˆ—çš„æè¿°ï¼ŒåŠ ä¸Šä¸Šé¢ä¾‹å­çš„è§£é‡Šï¼Œä¸éš¾å‘ç°ï¼Œ$F$ åºåˆ—æ˜¯å•è°ƒé€’å¢çš„ã€‚è€Œå¯¹äºå…·æœ‰å•è°ƒæ€§çš„ã€éœ€è¦æŸ¥æ‰¾æŸä¸€ä¸ªå…ƒç´ ï¼ˆè¦æŸ¥æ‰¾ $F$ ä¸­ç¬¬ä¸€ä¸ªæ¯” $A_i$ å¤§çš„å…ƒç´ ï¼‰çš„é—®é¢˜ï¼Œå¸¸ç”¨çš„è§£å†³æ–¹æ³•å°±æ˜¯äºŒåˆ†äº†ã€‚ï¼ˆå¦‚æœä¸æ›¿æ¢&lt;strong>ç¬¬ä¸€ä¸ª&lt;/strong>æ¯” $A_i$ å¤§çš„å…ƒç´ ï¼Œè€Œæ˜¯æ›¿æ¢æˆäº†åé¢çš„æ•°ï¼Œå°±ä¼šç ´å $F$ åºåˆ—çš„å•è°ƒæ€§ï¼Œå¯¼è‡´æ— æ³•ä½¿ç”¨äºŒåˆ†è§£é¢˜ã€‚ï¼‰&lt;/p>
&lt;blockquote>
&lt;p>$\mathbf{F}$ &lt;strong>åºåˆ—å•è°ƒæ€§çš„è¯æ˜&lt;/strong>&lt;/p>
&lt;p>å‡è®¾å­˜åœ¨ $i &amp;lt; j$ï¼Œæ»¡è¶³ $F_i \geqslant F_j$ï¼Œåˆ™åºåˆ— $A$ ä¸­ä¸€å®šæœ‰ä¸€ä¸ªä»¥ $F_j$ ç»“å°¾çš„ LISï¼Œé‚£ä¹ˆæ˜¾ç„¶å¯ä»¥ä»è¯¥ $F_j$ ä¸ºç»“å°¾çš„ LIS ä¸­ä¸æ–­åˆ é™¤æœ«å°¾å…ƒç´ ï¼Œç›´åˆ°ç•™ä¸‹ä¸€ä¸ªé•¿åº¦ä¸º $i$ çš„ LISï¼Œè¿™ä¸ªæ–° LIS çš„æœ«å°¾å…ƒç´ ä¸€å®šå°äº $F_j$ï¼Œæ‰€ä»¥ä¹Ÿä¸€å®šå°äº $F_i$ã€‚ä½†æ ¹æ®æˆ‘ä»¬çš„å®šä¹‰ï¼Œè¿™ä¸ªæ–° LIS çš„æœ«å°¾å…ƒç´ åº”å½“ä¸º $F_i$ï¼Œä½†å®ƒåŒæ—¶æ¯” $F_i$ å°ï¼Œå› æ­¤äº§ç”ŸçŸ›ç›¾ï¼Œæ‰€ä»¥ $F_i \geqslant F_j$ ä¸æˆç«‹ï¼ŒåŸåºåˆ—å•è°ƒé€’å¢ã€‚&lt;/p>
&lt;/blockquote>
&lt;p>ä¸è¿‡è¿™ä¹Ÿä¼šå¼•å‡ºä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬è¦&lt;strong>è¦†ç›–æ‰&lt;/strong>è¿™ä¸ªå¤§äºç­‰äº $A_i$ çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯å°†æ›´å¤§çš„å…ƒç´ å‘åæŒªä¸€ä½å‘¢ï¼Ÿåè€…æ˜æ˜ä¹Ÿä¸ä¼šç ´å $F$ åºåˆ—çš„å•è°ƒæ€§ã€‚è¿˜æ˜¯æ‹¿ $A = \left \lbrace 1, 2, 5, 4, 3, 4\right \rbrace$ è¿™ä¸ªåºåˆ—ä¸¾ä¾‹ï¼šå¦‚æœæˆ‘ä»¬åœ¨éå†åˆ° $A_i = 4$ æ—¶ï¼Œå°† $F_3 = 5$ å‘åæŒªåˆ° $F_4 = 5$ï¼Œå°† $A_i = 4$ æ’å…¥åˆ°äº† $F_3$ çš„ä½ç½®ä¸Šï¼Œé‚£ä¹ˆæ˜¾ç„¶ $5$ ä¸å¯èƒ½æˆä¸ºä¸€ä¸ªé•¿åº¦ä¸º $4$ çš„ LIS çš„æœ«å°¾å…ƒç´ ï¼Œå› ä¸ºåŸåºåˆ—ä¸­ $5$ åŠä¹‹å‰ä¸€å…±éƒ½åªæœ‰ $3$ ä¸ªå…ƒç´ ã€‚æ”¾å¤§åˆ°ä»»æ„ä¸€ä¸ªåºåˆ— $A$ æ¥è®²ï¼Œç”±äºæˆ‘ä»¬éå†åˆ° $A$ ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½åªè€ƒè™‘å…¶ä¹‹å‰çš„å…ƒç´ æ‰€æ„æˆçš„ LISï¼Œå¦‚æœå°† $F$ ä¸­å…ƒç´ å‘åç§»åŠ¨ï¼Œå°±ä¼šå¯¼è‡´ $F$ ä¸­è¢«ç§»åŠ¨çš„å€¼æ— æ³•æ„æˆåˆæ³•çš„ LISã€‚&lt;/p>
&lt;h2 id="ä»£ç å®ç°">ä»£ç å®ç°
&lt;/h2>&lt;p>æ ¹æ®è¿™æ ·çš„æ€è·¯ï¼Œå¯ä»¥å†™å‡ºå¦‚ä¸‹ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">N&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">1e5&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ios&lt;/span>&lt;span class="o">::&lt;/span>&lt;span class="n">sync_with_stdio&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">false&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">tie&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">nullptr&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">cin&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">len&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">mid&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">mid&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">r&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">mid&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">len&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">len&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cout&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">len&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="n">endl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">fflush&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”±äºäºŒåˆ†çš„å¤æ‚åº¦åœ¨å¯¹æ•°çº§åˆ«ï¼Œæ‰€ä»¥ç®—æ³•çš„æ€»å¤æ‚åº¦å°±é™ä½åˆ°äº† $\mathcal{O}(n \log n)$ï¼Œå³å¯å¤„ç†æ›´å¤§çš„æ•°æ®èŒƒå›´ã€‚&lt;/p></description></item><item><title>æ‹“æ‰‘æ’åºåŠå…¶ä¸¤ç§å®ç°</title><link>https://eoin.blog/p/topological-sorting/</link><pubDate>Fri, 10 May 2024 00:00:00 +0800</pubDate><guid>https://eoin.blog/p/topological-sorting/</guid><description>&lt;p>&lt;strong>æ‹“æ‰‘æ’åº (topological sorting)&lt;/strong> è¦è§£å†³çš„é—®é¢˜æ˜¯ç»™ä¸€ä¸ª&lt;strong>æœ‰å‘æ— ç¯å›¾ (directed acyclic graph, DAG)&lt;/strong> çš„æ‰€æœ‰èŠ‚ç‚¹æ’åºã€‚æ¦‚æ‹¬åœ°æ¥è¯´ï¼Œæ‹“æ‰‘æ’åºå¯¹æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œæ’åºçš„ä¾æ®æ˜¯èŠ‚ç‚¹ä¹‹é—´çš„æŒ‡å‘å…³ç³»ï¼Œæ‰€ä»¥åªæœ‰æœ‰å‘å›¾æœ‰æ‹“æ‰‘æ’åºã€‚åœ¨å®é™…é—®é¢˜ä¸­ï¼Œå›¾ä¸­æœ‰å‘è¾¹çš„æ–¹å‘å¯ä»¥å…·ä½“åœ°ç†è§£ä¸ºäº‹ç‰©ä¹‹é—´çš„ä¾èµ–å…³ç³»æˆ–è€…å…ˆåé¡ºåºã€‚å› æ­¤ï¼Œå½“ä¾èµ–å…³ç³»å‡ºç°å¾ªç¯ç­‰é—®é¢˜çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯æœ‰å‘å›¾ä¸­å‡ºç°ç¯çš„æ—¶å€™ï¼Œå°±æ— æ³•è¿›è¡Œæ‹“æ‰‘æ’åºã€‚&lt;strong>ä¸€ä¸ªå›¾èƒ½è¿›è¡Œæ‹“æ‰‘æ’åºçš„å……è¦æ¡ä»¶æ˜¯å®ƒæœ‰å‘ä¸”æ— ç¯ã€‚&lt;/strong>&lt;/p>
&lt;p>å¯¹äºä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ $G = \left(V, E\right)$ï¼Œå¦‚æœä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„åºåˆ— $a$ æ»¡è¶³ $\forall u \in V, u \in a$ï¼Œä¸” $\forall (u \rightarrow v) \in E$ï¼Œ$u$ åœ¨åºåˆ—ä¸­å…ˆäº $v$ å‡ºç°ï¼Œåˆ™ $a$ ä¸º $G$ çš„ä¸€ä¸ªåˆæ³•æ‹“æ‰‘åºã€‚&lt;/p>
&lt;p>&lt;img src="https://eoin.blog/p/topological-sorting/dag.png"
width="225"
height="266"
srcset="https://eoin.blog/p/topological-sorting/dag_hud394d5eb945be9ceaab396eda29e0a20_11172_480x0_resize_box_3.png 480w, https://eoin.blog/p/topological-sorting/dag_hud394d5eb945be9ceaab396eda29e0a20_11172_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾"
class="gallery-image"
data-flex-grow="84"
data-flex-basis="203px"
>&lt;/p>
&lt;p>ä»¥ä¸Šå›¾ä¸­æ‰€ç¤ºçš„ DAG ä¸ºä¾‹ï¼Œä¸€ä¸ªåˆæ³•çš„æ‹“æ‰‘åºä¸º $\left \lbrace 1, 2, 4, 5, 3 \right \rbrace$ã€‚&lt;/p>
&lt;h2 id="bfs-æ±‚æ‹“æ‰‘åº">BFS æ±‚æ‹“æ‰‘åº
&lt;/h2>&lt;p>ä»æ—¶é—´å¤æ‚åº¦è§’åº¦ä»¥åŠå¸¸æ•°è§’åº¦ç€æƒ³ï¼Œæˆ‘ä»¬é€šå¸¸é€šè¿‡ BFS æ±‚æ‹“æ‰‘æ’åºï¼Œè¿™ä¸€ç®—æ³•&lt;a class="link" href="https://web.archive.org/web/20240107085609/https://dl.acm.org/doi/pdf/10.1145/368996.369025" target="_blank" rel="noopener"
>æœ€åˆç”± A. Kahn æå‡º&lt;/a>ã€‚é¦–å…ˆï¼Œåœ¨ä¸€ä¸ªé›†åˆä¸­åŠ å…¥å›¾ä¸­æ‰€æœ‰å…¥åº¦ä¸º $0$ çš„èŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹æ²¡æœ‰å‰é©±ï¼Œæ‰€ä»¥ä¸€å®šæ˜¯ä¾èµ–é“¾çš„æœ€åº•å±‚ï¼›æ¥ç€ï¼Œä»é›†åˆä¸­å–å‡ºæŸä¸€ä¸ªå…ƒç´ ï¼ŒåŸºäºè¯¥èŠ‚ç‚¹è¿›è¡Œæ‰©å±•ï¼Œå°†å…¶æ‰€æœ‰çš„åç»§èŠ‚ç‚¹çš„å…¥åº¦ $-1$ã€‚é‡å¤æ­¤æ“ä½œï¼Œç›´åˆ°æŸä¸€ä¸ªåç»§èŠ‚ç‚¹çš„å…¥åº¦é™ä¸º $0$ã€‚è¿™æ—¶ï¼Œè¿™ä¸ªåç»§èŠ‚ç‚¹çš„æ‰€æœ‰å‰é©±å°±å¯ä»¥ç¡®ä¿å…¨éƒ¨éå†å®Œäº†ï¼Œå› æ­¤å°†è¯¥èŠ‚ç‚¹åŠ å…¥é›†åˆä¸­ï¼Œç»§ç»­è¿›è¡Œæ‹“æ‰‘æ’åºï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºä¸ºæ­¢ã€‚å¦‚æœè¿™æ ·çš„æ“ä½œå®Œå…¨ä½œç”¨äºä¸€ä¸ª DAG ä¸Šï¼Œåˆ™èŠ‚ç‚¹ä»é˜Ÿé¦–æˆ–æ ˆé¡¶å–å‡ºçš„é¡ºåºå°±æ˜¯è¯¥ DAG çš„ä¸€ä¸ªåˆæ³•çš„æ‹“æ‰‘åºåˆ—ï¼Œå…¶ä¸­&lt;strong>æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½å‡ºç°åœ¨å…¶æ‰€æœ‰å‰é©±çš„åé¢&lt;/strong>ã€‚&lt;/p>
&lt;p>å¦‚æœä¸Šè¿°æ“ä½œè¢«æ‰§è¡Œåœ¨ä¸€ä¸ªæœ‰ç¯å›¾ä¸Šï¼Œåˆ™æœ€ç»ˆå¾—åˆ°çš„åºåˆ—ä¼šå‡ºç°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š&lt;/p>
&lt;ul>
&lt;li>æœ€åˆåŠ å…¥é›†åˆæ—¶ï¼Œæ‰¾ä¸åˆ°ä»»ä½•å…¥åº¦ä¸º $0$ çš„èŠ‚ç‚¹ï¼Œè¯´æ˜å›¾ä¸­ä¸€å®šæœ‰ç¯ï¼›&lt;/li>
&lt;li>æ‰€å¾—åºåˆ—æ‰€åŒ…å«çš„èŠ‚ç‚¹æ•°å°äºæ€»èŠ‚ç‚¹æ•°ï¼Œè¯´æ˜åœ¨æ’åºè¿‡ç¨‹ä¸­åœ¨éå†å®Œæ‰€æœ‰ç‚¹ä¹‹å‰é›†åˆå°±ç©ºäº†ï¼Œè¯´æ˜è¿™äº›ç‚¹çš„å…¥åº¦å‡ä¸ä¸º $0$ï¼Œåˆ™å›¾ä¸­ä¸€å®šæœ‰ç¯ï¼Œå¹¶ä¸”æ²¡æœ‰è¿›å…¥é›†åˆçš„ç‚¹å°±æ˜¯ç¯è·¯ä¸Šçš„ç‚¹ï¼Œå› ä¸ºä»å¤–ç•Œæ— æ³•è¿›å…¥ç¯è·¯ï¼Œè‡ªç„¶ä¹Ÿæ— æ³•æŠŠç¯è·¯ä¸Šçš„ç‚¹çš„å…¥åº¦é™ä½ä¸º $0$ã€‚&lt;/li>
&lt;/ul>
&lt;p>å¯ä»¥æ ¹æ®ä¸Šè¿°ä¸¤æ¡æ€§è´¨åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç¯å¹¶è·å–å›¾ä¸­ç¯ä¸Šçš„èŠ‚ç‚¹ã€‚&lt;/p>
&lt;p>ç”±äºæ‹“æ‰‘æ’åºçš„æœ€ç»ˆç»“æœæ˜¯å°†æ‰€æœ‰èŠ‚ç‚¹çš„å…¥åº¦å…¨éƒ¨é™ä½è‡³ $0$ï¼Œè€Œå…¥åº¦çš„æ€»å’Œå°±æ˜¯è¾¹çš„æ€»æ•°ï¼Œæ‰€ä»¥é€šè¿‡ BFS æ±‚æ‹“æ‰‘æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º $\mathcal{O}\left(V + E\right)$ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">topological_sort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">queue&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">q&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">seq&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">empty&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">front&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">seq&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">push_back&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="nl">v&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">edges&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">--&lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">q&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">seq&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="dfs-æ±‚æ‹“æ‰‘åº">DFS æ±‚æ‹“æ‰‘åº
&lt;/h2>&lt;p>è¿˜æœ‰ä¸€ç§é€šè¿‡ DFS æ±‚æ‹“æ‰‘æ’åºçš„æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•ä¸éœ€è¦ç›´æ¥ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„åº¦æ•°ã€‚å®ƒçš„åŸç†æ˜¯ä¸æ–­ä»èŠ‚ç‚¹é›†ä¸­å–å‡ºèŠ‚ç‚¹ï¼Œå¹¶ä»è¯¥èŠ‚ç‚¹å¼€å§‹ï¼Œå¯¹æ‰€æœ‰å­èŠ‚ç‚¹è¿›è¡Œ DFSï¼Œå¹¶åœ¨å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹å…¨éƒ¨æœç´¢å®Œæˆä¹‹åå°†è¯¥èŠ‚ç‚¹æ’å…¥åºåˆ—ä¸­ã€‚ç”±äºå­èŠ‚ç‚¹çš„æœç´¢ä¸€å®šåœ¨å½“å‰èŠ‚ç‚¹è¢«æ’å…¥åºåˆ—ä¹‹å‰å®Œæˆï¼Œæ‰€ä»¥æœ€ç»ˆå¾—åˆ°çš„åºåˆ—æ˜¯ä¸€ä¸ªåˆæ³•çš„é€†æ‹“æ‰‘åºï¼Œå°†å…¶è¿›è¡Œç¿»è½¬å³å¯å¾—åˆ°ä¸€ä¸ªåˆæ³•çš„æ‹“æ‰‘åºã€‚&lt;/p>
&lt;p>ç”±äºæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šè¢«æœç´¢ä¸€æ¬¡ï¼Œä¸”æ¯æ¡è¾¹ä¹Ÿæœ€å¤šè¢«éå†ä¸€æ¬¡ï¼Œæ‰€ä»¥è¯¥ç®—æ³•çš„æ•´ä½“æ—¶é—´å¤æ‚åº¦åŒæ ·æ˜¯ $\mathcal{O}\left(V + E\right)$ã€‚å½“ç„¶ï¼Œåœ¨å®é™…ç¨‹åºå®ç°ä¸­ï¼ŒDFS è¿˜éœ€è¦è€ƒè™‘é€’å½’å¸¦æ¥çš„é¢å¤–æ—¶é—´æ¶ˆè€—ï¼Œæ‰€ä»¥ä½¿ç”¨å¸¸æ•°è¾ƒå°çš„ BFS è¿˜æ˜¯æ›´åŠ å¸¸è§çš„é€‰æ‹©ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">DFS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&amp;amp;&lt;/span> &lt;span class="n">seq&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vis&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="nl">v&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">edges&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">vis&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DFS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">v&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">seq&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">seq&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">push_back&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">topological_sort&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">vector&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">seq&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">u&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">u&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">vis&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DFS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">u&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">seq&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">reverse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">seq&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">begin&lt;/span>&lt;span class="p">(),&lt;/span> &lt;span class="n">seq&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">seq&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>å½’æ¡£</title><link>https://eoin.blog/archives/</link><pubDate>Sun, 06 Mar 2022 00:00:00 +0000</pubDate><guid>https://eoin.blog/archives/</guid><description/></item><item><title>æœç´¢</title><link>https://eoin.blog/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://eoin.blog/search/</guid><description/></item><item><title>é¡¹ç›®</title><link>https://eoin.blog/projects/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://eoin.blog/projects/</guid><description>&lt;blockquote>
&lt;p>éŸ³æ¸¸äººå–œæ¬¢ç»™è‡ªå·±æ‰¾ç½ªå—ã€‚&lt;/p>&lt;span class="cite">&lt;span>â€• &lt;/span>&lt;span>æˆ‘çš„æŸä½åŒå­¦&lt;/span>&lt;cite>&lt;/cite>&lt;/span>&lt;/blockquote>
&lt;p>æˆ‘æ˜¯éŸ³æ¸¸äººã€‚æ‰€ä»¥è¿™é‡Œæ˜¯ä¸€äº›æˆ‘ç»™è‡ªå·±æ‰¾æ¥å—çš„ç½ªï¼Œæ¬¢è¿çœ‹ä¸€çœ‹ã€‚&lt;/p></description></item><item><title>å‹é“¾</title><link>https://eoin.blog/friends/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://eoin.blog/friends/</guid><description>&lt;p>ç»¼åˆè€ƒé‡ä¸ªäººéšç§ä¸ç¤¾äº¤æ´»åŠ¨ç­‰æ–¹é¢å› ç´ ï¼Œæš‚ä¸æ¥å—ä¸»åŠ¨çš„å‹é“¾ç”³è¯·ï¼Œæœªæ¥å¯èƒ½ä¹Ÿä¸ä¼šæ‰“ç®—å…è®¸ä¸»åŠ¨çš„å‹é“¾ç”³è¯·ï¼Œè¯·è°…è§£ã€‚&lt;/p></description></item></channel></rss>